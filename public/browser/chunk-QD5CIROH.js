import{a as I}from"./chunk-CNSQHFGC.js";import{a as w}from"./chunk-CPZ5TQFA.js";import{a as C,b as a,c as _,d as A,e as x,f as y,g as P,h as N,i as M,j as D,k as q,l as F,m as T,o as O}from"./chunk-BTJ4JXKR.js";import{$ as l,A as c,D as b,R as d,X as s,Z as e,_ as t,a as f,ba as u,da as i,ia as v,pa as S,ra as h,sa as g,va as E}from"./chunk-ZH3N2TKB.js";import"./chunk-GABUHZQP.js";import{d as p}from"./chunk-5AFINJGR.js";var Y=(()=>{class m{constructor(){this.listadoActores=[],this.actoresSubscription=new f,this.fb=c(F),this.router=c(E),this.http=c(h),this.peliculaService=c(w),this.actorService=c(O),this.errorMessage=null,this.actorSeleccionado=null,this.formPelicula=this.fb.nonNullable.group({id:["",a.required],nombre:["",a.required],tipo:["",a.required],fecha_estreno:["",a.required],cantidad_publico:["",a.required],imagen:["",a.required]})}ngOnInit(){this.obtenerActores()}ngOnDestroy(){this.actoresSubscription&&this.actoresSubscription.unsubscribe()}onSubmit(){return p(this,null,function*(){try{this.altaPelicula(),this.router.navigate(["/Peliculas"])}catch(o){this.errorMessage=o}})}altaPelicula(){let o=this.formPelicula.getRawValue();if(!this.actorSeleccionado){this.errorMessage="Por favor, selecciona un actor para el protagonista";return}let n={cantidad_publico:o.cantidad_publico,fecha_estreno:new Date(o.fecha_estreno),id:o.id,imagen:o.imagen,nombre:o.nombre,protagonista_id:this.actorSeleccionado.uid,tipo:o.tipo};this.peliculaService.agregarPelicula(n).then(()=>{console.log("Pel\xEDcula agregada exitosamente"),this.router.navigate(["/Peliculas"])}).catch(r=>{console.error("Error al agregar pel\xEDcula:",r),this.errorMessage=r.message})}obtenerActores(){this.actoresSubscription=this.actorService.obtenerActores().subscribe(o=>{this.listadoActores=o,console.log(this.listadoActores)})}seleccionarActor(o){this.actorSeleccionado=o}static{this.\u0275fac=function(n){return new(n||m)}}static{this.\u0275cmp=b({type:m,selectors:[["app-alta-pelicula"]],standalone:!0,features:[v],decls:65,vars:3,consts:[[1,"bg-light"],[1,"container"],[1,"py-5","text-center"],[1,"lead"],[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[3,"actorSeleccionado","actores"],[1,"col-md-7","col-lg-8"],[1,"mb-3"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-sm-4"],["for","id",1,"form-label"],["type","number","id","ID","placeholder","123","value","","formControlName","id",1,"form-control"],[1,"invalid-feedback"],[1,"col-sm-8"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","","value","","formControlName","nombre",1,"form-control"],[1,"col-md-4"],["for","tipo",1,"form-label"],["id","tipo","formControlName","tipo",1,"form-select"],["value",""],["value","terror"],["value","comedia"],["value","amor"],["value","otros"],["for","fecha",1,"form-label"],["type","date","id","fecha","placeholder","","value","","formControlName","fecha_estreno",1,"form-control"],["for","publico",1,"form-label"],["type","number","id","publico","placeholder","","value","","formControlName","cantidad_publico",1,"form-control"],[1,"col-sm-9"],["type","text","id","img","placeholder","","value","","formControlName","imagen",1,"form-control"],[1,"my-4"],["type","submit",1,"w-100","btn","btn-primary","btn-lg",3,"disabled"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"div",1)(2,"main")(3,"div",2)(4,"h2"),i(5,"Alta pel\xEDcula"),t(),e(6,"p",3),i(7,"Completa los campos para dar de alta una pel\xEDcula"),t()(),e(8,"div",4)(9,"div",5)(10,"app-tabla-actores",6),u("actorSeleccionado",function(G){return r.seleccionarActor(G)}),t()(),e(11,"div",7)(12,"h4",8),i(13,"Datos"),t(),e(14,"form",9),u("ngSubmit",function(){return r.onSubmit()}),e(15,"div",10)(16,"div",11)(17,"label",12),i(18,"ID"),t(),l(19,"input",13),e(20,"div",14),i(21," ID v\xE1lido requerido "),t()(),e(22,"div",15)(23,"label",16),i(24,"Nombre"),t(),l(25,"input",17),e(26,"div",14),i(27," Nombre v\xE1lido requerido "),t()(),e(28,"div",18)(29,"label",19),i(30,"Tipo"),t(),e(31,"select",20)(32,"option",21),i(33,"Seleccion\xE1..."),t(),e(34,"option",22),i(35,"Terror"),t(),e(36,"option",23),i(37,"Comedia"),t(),e(38,"option",24),i(39,"Amor"),t(),e(40,"option",25),i(41,"Otros"),t()(),e(42,"div",14),i(43," Por favor selecciona un tipo v\xE1lido "),t()(),e(44,"div",11)(45,"label",26),i(46,"Fecha de estreno"),t(),l(47,"input",27),e(48,"div",14),i(49," Fecha de estreno requerida "),t()(),e(50,"div",11)(51,"label",28),i(52,"Cantidad de p\xFAblico"),t(),l(53,"input",29),e(54,"div",14),i(55," Cantidad de publico v\xE1lido requerido "),t()(),e(56,"div",30)(57,"label",28),i(58,"Imagen de la pel\xEDcula"),t(),l(59,"input",31),e(60,"div",14),i(61," Imagen inv\xE1lida "),t()()(),l(62,"hr",32),e(63,"button",33),i(64,"Confirmar alta"),t()()()()()()()),n&2&&(d(10),s("actores",r.listadoActores),d(4),s("formGroup",r.formPelicula),d(49),s("disabled",r.formPelicula.invalid||r.actorSeleccionado==null))},dependencies:[S,T,x,D,q,C,y,M,_,A,P,N,g,I],styles:[".active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;cursor:pointer}"]})}}return m})();export{Y as AltaPeliculaComponent};
