import{a as H}from"./chunk-JFMVKKMC.js";import{a as O,b as d,c as D,d as V,e as k,f as q,g as j,h as z,l as G,m as I,o as R}from"./chunk-BTJ4JXKR.js";import{$ as m,A as c,D as u,J as _,K as y,O as x,R as s,W as A,X as l,Z as i,_ as t,a as C,aa as E,ba as p,ca as h,da as a,ea as S,ia as f,ja as P,ma as M,na as N,pa as b,ra as w,sa as T,va as F}from"./chunk-ZH3N2TKB.js";import"./chunk-GABUHZQP.js";import{d as v}from"./chunk-5AFINJGR.js";var J=o=>({selected:o});function K(o,$){if(o&1){let e=E();i(0,"li",6),p("click",function(){let r=_(e).$implicit,g=h();return y(g.seleccionarPais(r))}),i(1,"div")(2,"h6",7),a(3),t()()()}if(o&2){let e=$.$implicit,n=h();l("ngClass",P(2,J,e===n.paisSeleccionadoLista)),s(3),S(e.name.common)}}var L=(()=>{class o{constructor(){this.paises=[],this.paisSeleccionado=new x}seleccionarPais(e){this.paisSeleccionadoLista=e,this.paisSeleccionado.emit(e)}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=u({type:o,selectors:[["app-tabla-paises"]],inputs:{paises:"paises"},outputs:{paisSeleccionado:"paisSeleccionado"},standalone:!0,features:[f],decls:8,vars:2,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],[1,"badge","bg-primary","rounded-pill"],[1,"scrollable-list"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","lh-sm",3,"click","ngClass"],[1,"my-0"]],template:function(n,r){n&1&&(i(0,"h4",0)(1,"span",1),a(2,"Paises"),t(),i(3,"span",2),a(4),t()(),i(5,"div",3)(6,"ul",4),A(7,K,4,4,"li",5),t()()),n&2&&(s(4),S(r.paises.length),s(3),l("ngForOf",r.paises))},dependencies:[b,M,N],styles:[".scrollable-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}"]})}}return o})();var fe=(()=>{class o{constructor(){this.listadoPaises=[],this.paisesSubscription=new C,this.fb=c(G),this.router=c(F),this.http=c(w),this.paisService=c(H),this.actorService=c(R),this.errorMessage=null,this.formActor=this.fb.nonNullable.group({nombre:["",d.required],apellido:["",d.required],dni:["",d.required],edad:["",d.required]})}ngOnInit(){this.obtenerPaises()}ngOnDestroy(){this.paisesSubscription&&this.paisesSubscription.unsubscribe()}onSubmit(){return v(this,null,function*(){try{this.altaActor(),this.router.navigate(["/Actores"])}catch(e){this.errorMessage=e}})}altaActor(){let e=this.formActor.getRawValue();if(!this.paisSeleccionado){this.errorMessage="Por favor, selecciona un pais para el actor";return}let n={nombre:e.nombre,apellido:e.apellido,edad:e.edad,dni:e.dni,pais:this.paisSeleccionado.name.common};this.actorService.agregarActor(n).then(()=>{console.log("Actor agregado exitosamente"),this.router.navigate(["/Actores"])}).catch(r=>{console.error("Error al agregar actor:",r),this.errorMessage=r.message})}obtenerPaises(){this.paisService.obtenerPaises().subscribe({next:e=>{this.listadoPaises=e,console.log("Todos los pa\xEDses:",this.listadoPaises)},error:e=>{console.error("Error al obtener todos los pa\xEDses:",e)},complete:()=>{console.log("Solicitud completada")}})}seleccionarPais(e){this.paisSeleccionado=e}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=u({type:o,selectors:[["app-alta-actor"]],standalone:!0,features:[f],decls:35,vars:3,consts:[[1,"bg-light"],[1,"container"],[1,"py-5","text-center"],[1,"lead"],[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[3,"paisSeleccionado","paises"],[1,"col-md-7","col-lg-8"],[1,"mb-3"],[3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-sm-6"],["for","firstName",1,"form-label"],["type","text","id","firstName","placeholder","","value","","formControlName","nombre",1,"form-control"],["for","lastName",1,"form-label"],["type","text","id","lastName","placeholder","","value","","formControlName","apellido",1,"form-control"],[1,"col-6"],["for","address2",1,"form-label"],["type","number","id","address2","placeholder","42","formControlName","edad",1,"form-control"],["type","text","id","address2","placeholder","43243054","formControlName","dni",1,"form-control"],[1,"my-4"],["type","submit",1,"w-100","btn","btn-primary","btn-lg",3,"disabled"]],template:function(n,r){n&1&&(i(0,"div",0)(1,"div",1)(2,"main")(3,"div",2)(4,"h2"),a(5,"Alta actor"),t(),i(6,"p",3),a(7,"Completa los campos para dar de alta un actor o actriz."),t()(),i(8,"div",4)(9,"div",5)(10,"app-tabla-paises",6),p("paisSeleccionado",function(B){return r.seleccionarPais(B)}),t()(),i(11,"div",7)(12,"h4",8),a(13,"Datos"),t(),i(14,"form",9),p("ngSubmit",function(){return r.onSubmit()}),i(15,"div",10)(16,"div",11)(17,"label",12),a(18,"Nombre"),t(),m(19,"input",13),t(),i(20,"div",11)(21,"label",14),a(22,"Apellido"),t(),m(23,"input",15),t(),i(24,"div",16)(25,"label",17),a(26,"Edad"),t(),m(27,"input",18),t(),i(28,"div",16)(29,"label",17),a(30,"Documento"),t(),m(31,"input",19),t()(),m(32,"hr",20),i(33,"button",21),a(34,"Confirmar alta"),t()()()()()()()),n&2&&(s(10),l("paises",r.listadoPaises),s(4),l("formGroup",r.formActor),s(19),l("disabled",r.formActor.invalid||r.paisSeleccionado==null))},dependencies:[b,I,k,O,q,D,V,j,z,T,L],styles:[".bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}"]})}}return o})();export{fe as AltaActorComponent};
