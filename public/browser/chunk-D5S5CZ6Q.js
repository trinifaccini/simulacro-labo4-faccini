import{a as L}from"./chunk-CPZ5TQFA.js";import{m as A,o as H}from"./chunk-BTJ4JXKR.js";import{$ as v,A as S,D as p,I as C,J as _,K as P,O as E,Q as y,R as a,S as D,W as f,X as r,Z as l,_ as i,a as g,aa as I,ba as b,ca as u,da as o,ea as w,fa as s,ga as F,ia as m,ja as M,ma as T,na as O,oa as N,pa as d,ra as k,sa as j,va as V}from"./chunk-ZH3N2TKB.js";import"./chunk-GABUHZQP.js";import"./chunk-5AFINJGR.js";var B=t=>({selected:t});function G(t,h){if(t&1){let e=I();l(0,"li",7),b("click",function(){let c=_(e).$implicit,x=u();return P(x.seleccionarPelicula(c))}),l(1,"div")(2,"h6",8),o(3),i()()()}if(t&2){let e=h.$implicit,n=u();r("ngClass",M(2,B,e===n.peliculaSeleccionadaLista)),a(3),s("",e.nombre," ")}}var R=(()=>{class t{constructor(){this.peliculas=[],this.peliculaSeleccionada=new E}seleccionarPelicula(e){this.peliculaSeleccionadaLista=e,this.peliculaSeleccionada.emit(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-tabla-peliculas"]],inputs:{peliculas:"peliculas"},outputs:{peliculaSeleccionada:"peliculaSeleccionada"},standalone:!0,features:[m],decls:9,vars:2,consts:[[1,"container-fluid","py-5"],[1,"col-md-5","col-lg-4","order-md-last"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"display-5","fw-bold"],[1,"badge","bg-primary","rounded-pill"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","lh-sm",3,"click","ngClass"],[1,"my-0"]],template:function(n,c){n&1&&(l(0,"div",0)(1,"div",1)(2,"h4",2)(3,"h1",3),o(4,"Listado"),i(),l(5,"span",4),o(6),i()(),l(7,"ul",5),f(8,G,4,4,"li",6),i()()()),n&2&&(a(6),w(c.peliculas.length),a(2),r("ngForOf",c.peliculas))},dependencies:[d,T,O],styles:[".selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}"]})}}return t})();function J(t,h){if(t&1&&(l(0,"div")(1,"h3"),o(2,"Protagonista"),i(),l(3,"p"),o(4),i(),l(5,"p"),o(6),i(),l(7,"p"),o(8),i()()),t&2){let e=u(2);a(4),F("Nombre: ",e.actorProtagonista.nombre," ",e.actorProtagonista.apellido,""),a(2),s("Edad: ",e.actorProtagonista.edad,""),a(2),s("Pa\xEDs: ",e.actorProtagonista.pais,"")}}function K(t,h){if(t&1&&(l(0,"div")(1,"p"),o(2),i(),l(3,"p"),o(4),i(),l(5,"p"),o(6),i(),l(7,"p"),o(8),i(),l(9,"p"),o(10),i(),l(11,"p"),v(12,"img",1),i(),f(13,J,9,4,"div",0),i()),t&2){let e=u();a(2),s("ID: ",e.pelicula.id,""),a(2),s("Nombre: ",e.pelicula.nombre,""),a(2),s("Tipo: ",e.pelicula.tipo,""),a(2),s("Fecha de Estreno: ",e.pelicula.fecha_estreno,""),a(2),s("Cantidad de P\xFAblico: ",e.pelicula.cantidad_publico,""),a(2),r("src",e.pelicula.imagen,y),a(),r("ngIf",e.actorProtagonista)}}var $=(()=>{class t{constructor(e){this.actorService=e,this.actoresSubscription=new g}ngOnChanges(e){if(e.pelicula&&e.pelicula.currentValue){let n=e.pelicula.currentValue;this.actoresSubscription=this.actorService.obtenerActorPorUid(n.protagonista_id).subscribe(c=>{c?this.actorProtagonista=c:console.log("El protagonista no fue encontrado en Firestore.")})}}ngOnDestroy(){this.actoresSubscription&&this.actoresSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(D(H))}}static{this.\u0275cmp=p({type:t,selectors:[["app-detalle-pelicula"]],inputs:{pelicula:"pelicula"},standalone:!0,features:[C,m],decls:1,vars:1,consts:[[4,"ngIf"],["alt","Foto de la Pel\xEDcula","width","100",3,"src"]],template:function(n,c){n&1&&f(0,K,14,7,"div",0),n&2&&r("ngIf",c.pelicula)},dependencies:[d,N]})}}return t})();var Se=(()=>{class t{constructor(){this.listaPeliculas=[],this.peliculasSubscription=new g,this.router=S(V),this.http=S(k),this.peliculaService=S(L),this.errorMessage=null,this.peliculaSeleccionada=null}ngOnInit(){this.obtenerPeliculas()}ngOnDestroy(){this.peliculasSubscription&&this.peliculasSubscription.unsubscribe()}obtenerPeliculas(){this.peliculasSubscription=this.peliculaService.obtenerPeliculas().subscribe(e=>{this.listaPeliculas=e,console.log(this.listaPeliculas)})}mostrarDetalle(e){this.peliculaSeleccionada=e}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-peliculas"]],standalone:!0,features:[m],decls:13,vars:2,consts:[[1,"container","py-4"],[1,"pricing-header","p-3","pb-md-4","mx-auto","text-center"],[1,"display-4","fw-normal"],[1,"p-5","mb-4","bg-light","rounded-3"],[3,"peliculaSeleccionada","peliculas"],[1,"row","align-items-md-stretch"],[1,"col-md-6"],[1,"h-100","p-5","text-white","bg-dark","rounded-3"],[3,"pelicula"]],template:function(n,c){n&1&&(l(0,"div",0)(1,"header")(2,"div",1)(3,"h1",2),o(4,"Peliculas"),i()()(),l(5,"div",3)(6,"app-tabla-peliculas",4),b("peliculaSeleccionada",function(z){return c.mostrarDetalle(z)}),i()(),l(7,"div",5)(8,"div",6)(9,"div",7)(10,"h2"),o(11,"Detalle pel\xEDcula seleccionada"),i(),v(12,"app-detalle-pelicula",8),i()()()()),n&2&&(a(6),r("peliculas",c.listaPeliculas),a(6),r("pelicula",c.peliculaSeleccionada))},dependencies:[d,A,j,R,$]})}}return t})();export{Se as PeliculasComponent};
