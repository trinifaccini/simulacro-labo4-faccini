import{A as xw,B as Rw,C as Mw,D as Nw,E as Pw,F as Cu,G as bu,H as vn,a as G,b as je,bb as Si,c as hh,d as N,e as Iw,f as Tu,g as Ew,h as Dw,j as Tw,l as Cw,m as Ts,r as fh,s as bw,t as Sw,v as ph,x as He,y as Aw,z as Qt}from"./chunk-5AFINJGR.js";function J(n){return typeof n=="function"}function Ai(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Su=Ai(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Nr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(o){e=o instanceof Su?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ow(o)}catch(s){e=e??[],s instanceof Su?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Su(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ow(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Nr(t,e)}remove(e){let{_finalizers:t}=this;t&&Nr(t,e),e instanceof n&&e._removeParent(this)}};Pe.EMPTY=(()=>{let n=new Pe;return n.closed=!0,n})();var gh=Pe.EMPTY;function Au(n){return n instanceof Pe||n&&"closed"in n&&J(n.remove)&&J(n.add)&&J(n.unsubscribe)}function Ow(n){J(n)?n():n.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xi={setTimeout(n,e,...t){let{delegate:r}=xi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xu(n){xi.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(n);else throw n})}function Cs(){}var kw=mh("C",void 0,void 0);function Fw(n){return mh("E",void 0,n)}function Lw(n){return mh("N",n,void 0)}function mh(n,e,t){return{kind:n,value:e,error:t}}var Pr=null;function Ri(n){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Pr;if(e&&(Pr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Pr;if(Pr=null,t)throw r}}else n()}function Vw(n){Vt.useDeprecatedSynchronousErrorHandling&&Pr&&(Pr.errorThrown=!0,Pr.error=n)}var Or=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Au(e)&&e.add(this)):this.destination=jb}static create(e,t,r){return new wn(e,t,r)}next(e){this.isStopped?vh(Lw(e),this):this._next(e)}error(e){this.isStopped?vh(Fw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vh(kw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Lb=Function.prototype.bind;function yh(n,e){return Lb.call(n,e)}var wh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ru(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ru(r)}else Ru(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ru(t)}}},wn=class extends Or{constructor(e,t,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yh(e.next,o),error:e.error&&yh(e.error,o),complete:e.complete&&yh(e.complete,o)}):i=e}this.destination=new wh(i)}};function Ru(n){Vt.useDeprecatedSynchronousErrorHandling?Vw(n):xu(n)}function Vb(n){throw n}function vh(n,e){let{onStoppedNotification:t}=Vt;t&&xi.setTimeout(()=>t(n,e))}var jb={closed:!0,next:Cs,error:Vb,complete:Cs};var Mi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ht(n){return n}function _h(...n){return Ih(n)}function Ih(n){return n.length===0?ht:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Bb(t)?t:new wn(t,r,i);return Ri(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=jw(r),new r((i,o)=>{let s=new wn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Mi](){return this}pipe(...t){return Ih(t)(this)}toPromise(t){return t=jw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function jw(n){var e;return(e=n??Vt.Promise)!==null&&e!==void 0?e:Promise}function Ub(n){return n&&J(n.next)&&J(n.error)&&J(n.complete)}function Bb(n){return n&&n instanceof Or||Ub(n)&&Au(n)}function Eh(n){return J(n?.lift)}function ie(n){return e=>{if(Eh(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new Dh(n,e,t,r,i)}var Dh=class extends Or{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ni(){return ie((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Pi=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Eh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Ni()(this)}};var Uw=Ai(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Mu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Uw}next(t){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gh:(this.currentObservers=null,o.push(t),new Pe(()=>{this.currentObservers=null,Nr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new Mu(e,t),n})(),Mu=class extends Ge{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gh}};var Je=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bs={now(){return(bs.delegate||Date).now()},delegate:void 0};var Nu=class extends Ge{constructor(e=1/0,t=1/0,r=bs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Pu=class extends Pe{constructor(e,t){super()}schedule(e,t=0){return this}};var Ss={setInterval(n,e,...t){let{delegate:r}=Ss;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ss;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Oi=class extends Pu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ss.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ss.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Nr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ki=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ki.now=bs.now;var Fi=class extends ki{constructor(e,t=ki.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Th=new Fi(Oi);var Ou=class extends Oi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ku=class extends Fi{};var Ch=new ku(Ou);var ft=new le(n=>n.complete());function Bw(n){return n&&J(n.schedule)}function bh(n){return n[n.length-1]}function Fu(n){return J(bh(n))?n.pop():void 0}function Yt(n){return Bw(bh(n))?n.pop():void 0}function $w(n,e){return typeof bh(n)=="number"?n.pop():e}var Lu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Vu(n){return J(n?.then)}function ju(n){return J(n[Mi])}function Uu(n){return Symbol.asyncIterator&&J(n?.[Symbol.asyncIterator])}function Bu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $b(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $u=$b();function qu(n){return J(n?.[$u])}function zu(n){return Ew(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Tu(t.read());if(i)return yield Tu(void 0);yield yield Tu(r)}}finally{t.releaseLock()}})}function Hu(n){return J(n?.getReader)}function Ce(n){if(n instanceof le)return n;if(n!=null){if(ju(n))return qb(n);if(Lu(n))return zb(n);if(Vu(n))return Hb(n);if(Uu(n))return qw(n);if(qu(n))return Gb(n);if(Hu(n))return Wb(n)}throw Bu(n)}function qb(n){return new le(e=>{let t=n[Mi]();if(J(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zb(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Hb(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xu)})}function Gb(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function qw(n){return new le(e=>{Kb(n,e).catch(t=>e.error(t))})}function Wb(n){return qw(zu(n))}function Kb(n,e){var t,r,i,o;return Iw(this,void 0,void 0,function*(){try{for(t=Dw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function wt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function qn(n,e=0){return ie((t,r)=>{t.subscribe(oe(r,i=>wt(r,n,()=>r.next(i),e),()=>wt(r,n,()=>r.complete(),e),i=>wt(r,n,()=>r.error(i),e)))})}function zn(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zw(n,e){return Ce(n).pipe(zn(e),qn(e))}function Hw(n,e){return Ce(n).pipe(zn(e),qn(e))}function Gw(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Ww(n,e){return new le(t=>{let r;return wt(t,e,()=>{r=n[$u](),wt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Gu(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{wt(t,e,()=>{let r=n[Symbol.asyncIterator]();wt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Kw(n,e){return Gu(zu(n),e)}function Qw(n,e){if(n!=null){if(ju(n))return zw(n,e);if(Lu(n))return Gw(n,e);if(Vu(n))return Hw(n,e);if(Uu(n))return Gu(n,e);if(qu(n))return Ww(n,e);if(Hu(n))return Kw(n,e)}throw Bu(n)}function xe(n,e){return e?Qw(n,e):Ce(n)}function X(...n){let e=Yt(n);return xe(n,e)}function Li(n,e){let t=J(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function Sh(n){return!!n&&(n instanceof le||J(n.lift)&&J(n.subscribe))}var _n=Ai(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function se(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Qb}=Array;function Yb(n,e){return Qb(e)?n(...e):n(e)}function Wu(n){return se(e=>Yb(n,e))}var{isArray:Zb}=Array,{getPrototypeOf:Jb,prototype:Xb,keys:eS}=Object;function Ku(n){if(n.length===1){let e=n[0];if(Zb(e))return{args:e,keys:null};if(tS(e)){let t=eS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tS(n){return n&&typeof n=="object"&&Jb(n)===Xb}function Qu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Yu(...n){let e=Yt(n),t=Fu(n),{args:r,keys:i}=Ku(n);if(r.length===0)return xe([],e);let o=new le(nS(r,e,i?s=>Qu(i,s):ht));return t?o.pipe(Wu(t)):o}function nS(n,e,t=ht){return r=>{Yw(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Yw(e,()=>{let l=xe(n[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Yw(n,e,t){n?wt(t,n,e):e()}function Zw(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=C=>l<r?S(C):u.push(C),S=C=>{o&&e.next(C),l++;let A=!1;Ce(t(C,h++)).subscribe(oe(e,k=>{i?.(k),o?v(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let k=u.shift();s?wt(e,s,()=>S(k)):S(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(oe(e,v,()=>{p=!0,m()})),()=>{a?.()}}function We(n,e,t=1/0){return J(e)?We((r,i)=>se((o,s)=>e(r,o,i,s))(Ce(n(r,i))),t):(typeof e=="number"&&(t=e),ie((r,i)=>Zw(r,i,n,t)))}function As(n=1/0){return We(ht,n)}function Jw(){return As(1)}function Vi(...n){return Jw()(xe(n,Yt(n)))}function Zu(n){return new le(e=>{Ce(n()).subscribe(e)})}function rS(...n){let e=Fu(n),{args:t,keys:r}=Ku(n),i=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ce(t[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Qu(r,a):a),o.complete())}))}});return e?i.pipe(Wu(e)):i}function iS(...n){let e=Yt(n),t=$w(n,1/0),r=n;return r.length?r.length===1?Ce(r[0]):As(t)(xe(r,e)):ft}function Tt(n,e){return ie((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Hn(n){return ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Ce(n(s,Hn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Xw(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Gn(n,e){return J(e)?We(n,e,1):We(n,1)}function Wn(n){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function In(n){return n<=0?()=>ft:ie((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ah(n){return se(()=>n)}function oS(n,e=ht){return n=n??sS,ie((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function sS(n,e){return n===e}function Ju(n=aS){return ie((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function aS(){return new _n}function Kn(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Zt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):ht,In(1),t?Wn(e):Ju(()=>new _n))}function ji(n){return n<=0?()=>ft:ie((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):ht,ji(1),t?Wn(e):Ju(()=>new _n))}function uS(){return ie((n,e)=>{let t,r=!1;n.subscribe(oe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Rh(n,e){return ie(Xw(n,e,arguments.length>=2,!0))}function e_(n={}){let{connector:e=()=>new Ge,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},S=()=>{let C=s;v(),C?.unsubscribe()};return ie((C,A)=>{l++,!p&&!h&&m();let k=u=u??e();A.add(()=>{l--,l===0&&!p&&!h&&(a=Mh(S,i))}),k.subscribe(A),!s&&l>0&&(s=new wn({next:$=>k.next($),error:$=>{p=!0,m(),a=Mh(v,t,$),k.error($)},complete:()=>{h=!0,m(),a=Mh(v,r),k.complete()}}),Ce(C).subscribe(s))})(o)}}function Mh(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new wn({next:()=>{r.unsubscribe(),n()}});return Ce(e(...t)).subscribe(r)}function cS(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,e_({connector:()=>new Nu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Nh(...n){let e=Yt(n);return ie((t,r)=>{(e?Vi(n,t,e):Vi(n,t)).subscribe(r)})}function ot(n,e){return ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;Ce(n(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function lS(n,e){return J(e)?ot(()=>n,e):ot(()=>n)}function Ph(n){return ie((e,t)=>{Ce(n).subscribe(oe(t,()=>t.complete(),Cs)),!t.closed&&e.subscribe(t)})}function Ue(n,e,t){let r=J(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ht}var t_=null;var Oh=1,n_=Symbol("SIGNAL");function me(n){let e=t_;return t_=n,e}var r_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dS(n){if(!(Lh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Oh)){if(!n.producerMustRecompute(n)&&!kh(n)){n.dirty=!1,n.lastCleanEpoch=Oh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Oh}}function i_(n){return n&&(n.nextProducerIndex=0),me(n)}function o_(n,e){if(me(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Lh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Fh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function kh(n){Xu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dS(t),r!==t.version))return!0}return!1}function s_(n){if(Xu(n),Lh(n))for(let e=0;e<n.producerNode.length;e++)Fh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Fh(n,e){if(hS(n),Xu(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Fh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Xu(i),i.producerIndexOfThis[r]=e}}function Lh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Xu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function hS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function fS(){throw new Error}var pS=fS;function a_(n){pS=n}var H_="https://g.co/ng/security#xss",K=class extends Error{constructor(e,t){super(Ac(e,t)),this.code=e}};function Ac(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function qs(n){return{toString:n}.toString()}var ec="__parameters__";function gS(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function G_(n,e,t){return qs(()=>{let r=gS(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(ec)?u[ec]:Object.defineProperty(u,ec,{value:[]})[ec];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xs=globalThis;function Ie(n){for(let e in n)if(n[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function mS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(gt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function u_(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var yS=Ie({__forward_ref__:Ie});function W_(n){return n.__forward_ref__=W_,n.toString=function(){return gt(this())},n}function pt(n){return K_(n)?n():n}function K_(n){return typeof n=="function"&&n.hasOwnProperty(yS)&&n.__forward_ref__===W_}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function eo(n){return{providers:n.providers||[],imports:n.imports||[]}}function xc(n){return c_(n,Y_)||c_(n,Z_)}function Q_(n){return xc(n)!==null}function c_(n,e){return n.hasOwnProperty(e)?n[e]:null}function vS(n){let e=n&&(n[Y_]||n[Z_]);return e||null}function l_(n){return n&&(n.hasOwnProperty(d_)||n.hasOwnProperty(wS))?n[d_]:null}var Y_=Ie({\u0275prov:Ie}),d_=Ie({\u0275inj:Ie}),Z_=Ie({ngInjectableDef:Ie}),wS=Ie({ngInjectorDef:Ie}),Y=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function J_(n){return n&&!!n.\u0275providers}var _S=Ie({\u0275cmp:Ie}),IS=Ie({\u0275dir:Ie}),ES=Ie({\u0275pipe:Ie}),DS=Ie({\u0275mod:Ie}),uc=Ie({\u0275fac:Ie}),Rs=Ie({__NG_ELEMENT_ID__:Ie}),h_=Ie({__NG_ENV_ID__:Ie});function Ms(n){return typeof n=="string"?n:n==null?"":String(n)}function TS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ms(n)}function CS(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new K(-200,n)}function Uf(n,e){throw new K(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Xh;function X_(){return Xh}function xt(n){let e=Xh;return Xh=n,e}function eI(n,e,t){let r=xc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;Uf(n,"Injector")}var bS={},Ns=bS,ef="__NG_DI_FLAG__",cc="ngTempTokenPath",SS="ngTokenPath",AS=/\n/gm,xS="\u0275",f_="__source",qi;function RS(){return qi}function Qn(n){let e=qi;return qi=n,e}function MS(n,e=ue.Default){if(qi===void 0)throw new K(-203,!1);return qi===null?eI(n,void 0,e):qi.get(n,e&ue.Optional?null:void 0,e)}function ee(n,e=ue.Default){return(X_()||MS)(pt(n),e)}function U(n,e=ue.Default){return ee(n,Rc(e))}function Rc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function tf(n){let e=[];for(let t=0;t<n.length;t++){let r=pt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],u=NS(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function tI(n,e){return n[ef]=e,n.prototype[ef]=e,n}function NS(n){return n[ef]}function PS(n,e,t,r){let i=n[cc];throw e[f_]&&i.unshift(e[f_]),n.message=OS(`
`+n.message,i,t,r),n[SS]=i,n[cc]=null,n}function OS(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xS?n.slice(2):n;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):gt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(AS,`
  `)}`}var Hr=tI(G_("Optional"),8);var nI=tI(G_("SkipSelf"),4);function Hi(n,e){let t=n.hasOwnProperty(uc);return t?n[uc]:null}function Bf(n,e){n.forEach(t=>Array.isArray(t)?Bf(t,e):e(t))}function rI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function kS(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function FS(n,e,t){let r=zs(n,e);return r>=0?n[r|1]=t:(r=~r,kS(n,r,e,t)),r}function Vh(n,e){let t=zs(n,e);if(t>=0)return n[t|1]}function zs(n,e){return LS(n,e,1)}function LS(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Gi={},Rt=[],Wi=new Y(""),iI=new Y("",-1),oI=new Y(""),dc=class{get(e,t=Ns){if(t===Ns){let r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return t}},sI=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(sI||{}),en=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(en||{}),En=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(En||{});function VS(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function nf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];US(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function jS(n){return n===3||n===4||n===6}function US(n){return n.charCodeAt(0)===64}function Ps(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?p_(n,t,i,null,e[++r]):p_(n,t,i,null,null))}}return n}function p_(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var aI="ng-template";function BS(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&VS(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($f(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function $f(n){return n.type===4&&n.value!==aI}function $S(n,e,t){let r=n.type===4&&!t?aI:n.value;return e===r}function qS(n,e,t){let r=4,i=n.attrs,o=i!==null?GS(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!jt(r)&&!jt(u))return!1;if(s&&jt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!$S(n,u,t)||u===""&&e.length===1){if(jt(r))return!1;s=!0}}else if(r&8){if(i===null||!BS(n,i,u,t)){if(jt(r))return!1;s=!0}}else{let l=e[++a],h=zS(u,i,$f(n),t);if(h===-1){if(jt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(jt(r))return!1;s=!0}}}}return jt(r)||s}function jt(n){return(n&1)===0}function zS(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return WS(e,n)}function HS(n,e,t=!1){for(let r=0;r<e.length;r++)if(qS(n,e[r],t))return!0;return!1}function GS(n){for(let e=0;e<n.length;e++){let t=n[e];if(jS(t))return e}return n.length}function WS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function g_(n,e){return n?":not("+e.trim()+")":e}function KS(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!jt(s)&&(e+=g_(o,i),i=""),r=s,o=o||!jt(r);t++}return i!==""&&(e+=g_(o,i)),e}function QS(n){return n.map(KS).join(",")}function YS(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!jt(i))break;i=o}r++}return{attrs:e,classes:t}}function uI(n){return qs(()=>{let e=fI(n),t=je(G({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===sI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||en.Emulated,styles:n.styles||Rt,_:null,schemas:n.schemas||null,tView:null,id:""});pI(t);let r=n.dependencies;return t.directiveDefs=y_(r,!1),t.pipeDefs=y_(r,!0),t.id=XS(t),t})}function ZS(n){return Lr(n)||cI(n)}function JS(n){return n!==null}function to(n){return qs(()=>({type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function m_(n,e){if(n==null)return Gi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=En.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==En.None?[r,a]:r,e[o]=s):t[o]=r}return t}function no(n){return qs(()=>{let e=fI(n);return pI(e),e})}function Lr(n){return n[_S]||null}function cI(n){return n[IS]||null}function lI(n){return n[ES]||null}function dI(n){let e=Lr(n)||cI(n)||lI(n);return e!==null?e.standalone:!1}function hI(n,e){let t=n[DS]||null;if(!t&&e===!0)throw new Error(`Type ${gt(n)} does not have '\u0275mod' property.`);return t}function fI(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Gi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:m_(n.inputs,e),outputs:m_(n.outputs),debugInfo:null}}function pI(n){n.features?.forEach(e=>e(n))}function y_(n,e){if(!n)return null;let t=e?lI:ZS;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(JS)}function XS(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tr(n){return{\u0275providers:n}}function eA(...n){return{\u0275providers:gI(!0,n),\u0275fromNgModule:!0}}function gI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bf(e,s=>{let a=s;rf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&mI(i,o),t}function mI(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qf(i,o=>{e(o,r)})}}function rf(n,e,t,r){if(n=pt(n),!n)return!1;let i=null,o=l_(n),s=!o&&Lr(n);if(!o&&!s){let u=n.ngModule;if(o=l_(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bf(o.imports,h=>{rf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&mI(l,e)}if(!a){let l=Hi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Rt},i),e({provide:oI,useValue:i,multi:!0},i),e({provide:Wi,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;qf(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function qf(n,e){for(let t of n)J_(t)&&(t=t.\u0275providers),Array.isArray(t)?qf(t,e):e(t)}var tA=Ie({provide:String,useValue:Ie});function yI(n){return n!==null&&typeof n=="object"&&tA in n}function nA(n){return!!(n&&n.useExisting)}function rA(n){return!!(n&&n.useFactory)}function Ki(n){return typeof n=="function"}function iA(n){return!!n.useClass}var Mc=new Y(""),rc={},oA={},jh;function zf(){return jh===void 0&&(jh=new dc),jh}var _t=class{},Os=class extends _t{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sf(e,s=>this.processProvider(s)),this.records.set(iI,Ui(void 0,this)),i.has("environment")&&this.records.set(_t,Ui(void 0,this));let o=this.records.get(Mc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(oI,Rt,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Qn(this),r=xt(void 0),i;try{return e()}finally{Qn(t),xt(r)}}get(e,t=Ns,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(h_))return e[h_](this);r=Rc(r);let i,o=Qn(this),s=xt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=lA(e)&&xc(e);l&&this.injectableDefInScope(l)?u=Ui(of(e),rc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ue.Self?zf():this.parent;return t=r&ue.Optional&&t===Ns?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[cc]=a[cc]||[]).unshift(gt(e)),o)throw a;return PS(a,e,"R3InjectorError",this.source)}else throw a}finally{xt(s),Qn(o)}}resolveInjectorInitializers(){let e=me(null),t=Qn(this),r=xt(void 0),i;try{let o=this.get(Wi,Rt,ue.Self);for(let s of o)s()}finally{Qn(t),xt(r),me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=pt(e);let t=Ki(e)?e:pt(e&&e.provide),r=aA(e);if(!Ki(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ui(void 0,rc,!0),i.factory=()=>tf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=me(null);try{return t.value===rc&&(t.value=oA,t.value=t.factory()),typeof t.value=="object"&&t.value&&cA(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=pt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function of(n){let e=xc(n),t=e!==null?e.factory:Hi(n);if(t!==null)return t;if(n instanceof Y)throw new K(204,!1);if(n instanceof Function)return sA(n);throw new K(204,!1)}function sA(n){if(n.length>0)throw new K(204,!1);let t=vS(n);return t!==null?()=>t.factory(n):()=>new n}function aA(n){if(yI(n))return Ui(void 0,n.useValue);{let e=vI(n);return Ui(e,rc)}}function vI(n,e,t){let r;if(Ki(n)){let i=pt(n);return Hi(i)||of(i)}else if(yI(n))r=()=>pt(n.useValue);else if(rA(n))r=()=>n.useFactory(...tf(n.deps||[]));else if(nA(n))r=()=>ee(pt(n.useExisting));else{let i=pt(n&&(n.useClass||n.provide));if(uA(n))r=()=>new i(...tf(n.deps));else return Hi(i)||of(i)}return r}function Ui(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uA(n){return!!n.deps}function cA(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lA(n){return typeof n=="function"||typeof n=="object"&&n instanceof Y}function sf(n,e){for(let t of n)Array.isArray(t)?sf(t,e):t&&J_(t)?sf(t.\u0275providers,e):e(t)}function Cn(n,e){n instanceof Os&&n.assertNotDestroyed();let t,r=Qn(n),i=xt(void 0);try{return e()}finally{Qn(r),xt(i)}}function dA(){return X_()!==void 0||RS()!=null}function hA(n){return typeof n=="function"}var bn=0,he=1,Z=2,st=3,Bt=4,zt=5,hc=6,ks=7,$t=8,Qi=9,qt=10,at=11,Fs=12,v_=13,ro=14,tn=15,Nc=16,Bi=17,Yi=18,Pc=19,wI=20,Yn=21,Uh=22,Vr=23,Zn=25,_I=1;var jr=7,fc=8,pc=9,Mt=10,Hf=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Hf||{});function kr(n){return Array.isArray(n)&&typeof n[_I]=="object"}function Sn(n){return Array.isArray(n)&&n[_I]===!0}function II(n){return(n.flags&4)!==0}function Oc(n){return n.componentOffset>-1}function Gf(n){return(n.flags&1)===1}function Jn(n){return!!n.template}function fA(n){return(n[Z]&512)!==0}var af=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function EI(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function kc(){return DI}function DI(n){return n.type.prototype.ngOnChanges&&(n.setInput=gA),pA}kc.ngInherit=!0;function pA(){let n=CI(this),e=n?.current;if(e){let t=n.previous;if(t===Gi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function gA(n,e,t,r,i){let o=this.declaredInputs[r],s=CI(n)||mA(n,{previous:Gi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new af(l&&l.currentValue,t,u===Gi),EI(n,e,i,t)}var TI="__ngSimpleChanges__";function CI(n){return n[TI]||null}function mA(n,e){return n[TI]=e}var w_=null;var Jt=function(n,e,t){w_?.(n,e,t)},yA="svg",vA="math",wA=!1;function _A(){return wA}function nn(n){for(;Array.isArray(n);)n=n[bn];return n}function bI(n,e){return nn(e[n])}function Ht(n,e){return nn(e[n.index])}function SI(n,e){return n.data[e]}function nr(n,e){let t=e[n];return kr(t)?t:t[bn]}function Wf(n){return(n[Z]&128)===128}function IA(n){return Sn(n[st])}function gc(n,e){return e==null?null:n[e]}function AI(n){n[Bi]=0}function EA(n){n[Z]&1024||(n[Z]|=1024,Wf(n)&&Ls(n))}function DA(n,e){for(;n>0;)e=e[ro],n--;return e}function Kf(n){return!!(n[Z]&9216||n[Vr]?.dirty)}function uf(n){n[qt].changeDetectionScheduler?.notify(1),Kf(n)?Ls(n):n[Z]&64&&(_A()?(n[Z]|=1024,Ls(n)):n[qt].changeDetectionScheduler?.notify())}function Ls(n){n[qt].changeDetectionScheduler?.notify();let e=Vs(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Wf(e)));)e=Vs(e)}function xI(n,e){if((n[Z]&256)===256)throw new K(911,!1);n[Yn]===null&&(n[Yn]=[]),n[Yn].push(e)}function TA(n,e){if(n[Yn]===null)return;let t=n[Yn].indexOf(e);t!==-1&&n[Yn].splice(t,1)}function Vs(n){let e=n[st];return Sn(e)?e[st]:e}var ce={lFrame:VI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function CA(){return ce.lFrame.elementDepthCount}function bA(){ce.lFrame.elementDepthCount++}function SA(){ce.lFrame.elementDepthCount--}function RI(){return ce.bindingsEnabled}function AA(){return ce.skipHydrationRootTNode!==null}function xA(n){return ce.skipHydrationRootTNode===n}function RA(){ce.skipHydrationRootTNode=null}function Se(){return ce.lFrame.lView}function rn(){return ce.lFrame.tView}function N$(n){return ce.lFrame.contextLView=n,n[$t]}function P$(n){return ce.lFrame.contextLView=null,n}function Nt(){let n=MI();for(;n!==null&&n.type===64;)n=n.parent;return n}function MI(){return ce.lFrame.currentTNode}function MA(){let n=ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Hs(n,e){let t=ce.lFrame;t.currentTNode=n,t.isParent=e}function NI(){return ce.lFrame.isParent}function NA(){ce.lFrame.isParent=!1}function PA(){let n=ce.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function OA(){return ce.lFrame.bindingIndex}function kA(n){return ce.lFrame.bindingIndex=n}function PI(){return ce.lFrame.bindingIndex++}function OI(n){let e=ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function FA(){return ce.lFrame.inI18n}function LA(n,e){let t=ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,cf(e)}function VA(){return ce.lFrame.currentDirectiveIndex}function cf(n){ce.lFrame.currentDirectiveIndex=n}function jA(n){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function kI(n){ce.lFrame.currentQueryIndex=n}function UA(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[zt]:null}function FI(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=UA(o),i===null||(o=o[ro],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ce.lFrame=LI();return r.currentTNode=e,r.lView=n,!0}function Qf(n){let e=LI(),t=n[he];ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function LI(){let n=ce.lFrame,e=n===null?null:n.child;return e===null?VI(n):e}function VI(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jI(){let n=ce.lFrame;return ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var UI=jI;function Yf(){let n=jI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function BA(n){return(ce.lFrame.contextLView=DA(n,ce.lFrame.contextLView))[$t]}function Gr(){return ce.lFrame.selectedIndex}function Ur(n){ce.lFrame.selectedIndex=n}function $A(){let n=ce.lFrame;return SI(n.tView,n.selectedIndex)}function qA(){return ce.lFrame.currentNamespace}var BI=!0;function Zf(){return BI}function Jf(n){BI=n}function zA(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=DI(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Xf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ic(n,e,t){$I(n,e,3,t)}function oc(n,e,t,r){(n[Z]&3)===t&&$I(n,e,t,r)}function Bh(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function $I(n,e,t,r){let i=r!==void 0?n[Bi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Bi]+=65536),(a<o||o==-1)&&(HA(n,t,e,u),n[Bi]=(n[Bi]&4294901760)+u+2),u++}function __(n,e){Jt(4,n,e);let t=me(null);try{e.call(n)}finally{me(t),Jt(5,n,e)}}function HA(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[Bi]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,__(a,o)):__(a,o)}var zi=-1,Br=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function GA(n){return n instanceof Br}function WA(n){return(n.flags&8)!==0}function KA(n){return(n.flags&16)!==0}function qI(n){return n!==zi}function mc(n){return n&32767}function QA(n){return n>>16}function yc(n,e){let t=QA(n),r=e;for(;t>0;)r=r[ro],t--;return r}var lf=!0;function I_(n){let e=lf;return lf=n,e}var YA=256,zI=YA-1,HI=5,ZA=0,Xt={};function JA(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Rs)&&(r=t[Rs]),r==null&&(r=t[Rs]=ZA++);let i=r&zI,o=1<<i;e.data[n+(i>>HI)]|=o}function vc(n,e){let t=GI(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,$h(r.data,n),$h(e,null),$h(r.blueprint,null));let i=ep(n,e),o=n.injectorIndex;if(qI(i)){let s=mc(i),a=yc(i,e),u=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function $h(n,e){n.push(0,0,0,0,0,0,0,0,e)}function GI(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ep(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ZI(i),r===null)return zi;if(t++,i=i[ro],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return zi}function df(n,e,t){JA(n,e,t)}function WI(n,e,t){if(t&ue.Optional||n!==void 0)return n;Uf(e,"NodeInjector")}function KI(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[Qi],o=xt(void 0);try{return i?i.get(e,r,t&ue.Optional):eI(e,r,t&ue.Optional)}finally{xt(o)}}return WI(r,e,t)}function QI(n,e,t,r=ue.Default,i){if(n!==null){if(e[Z]&2048&&!(r&ue.Self)){let s=rx(n,e,t,r,Xt);if(s!==Xt)return s}let o=YI(n,e,t,r,Xt);if(o!==Xt)return o}return KI(e,t,r,i)}function YI(n,e,t,r,i){let o=tx(t);if(typeof o=="function"){if(!FI(e,n,r))return r&ue.Host?WI(i,t,r):KI(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))Uf(t);else return s}finally{UI()}}else if(typeof o=="number"){let s=null,a=GI(n,e),u=zi,l=r&ue.Host?e[tn][zt]:null;for((a===-1||r&ue.SkipSelf)&&(u=a===-1?ep(n,e):e[a+8],u===zi||!D_(r,!1)?a=-1:(s=e[he],a=mc(u),e=yc(u,e)));a!==-1;){let h=e[he];if(E_(o,a,h.data)){let p=XA(a,e,t,s,r,l);if(p!==Xt)return p}u=e[a+8],u!==zi&&D_(r,e[he].data[a+8]===l)&&E_(o,a,e)?(s=h,a=mc(u),e=yc(u,e)):a=-1}}return i}function XA(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],u=r==null?Oc(a)&&lf:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=ex(a,s,t,u,l);return h!==null?Zi(e,s,h,a):Xt}function ex(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let S=s[v];if(v<u&&t===S||v>=u&&S.type===t)return v}if(i){let v=s[u];if(v&&Jn(v)&&v.type===t)return u}return null}function Zi(n,e,t,r){let i=n[t],o=e.data;if(GA(i)){let s=i;s.resolving&&CS(TS(o[t]));let a=I_(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?xt(s.injectImpl):null,h=FI(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&zA(t,o[t],e)}finally{l!==null&&xt(l),I_(a),s.resolving=!1,UI()}}return i}function tx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Rs)?n[Rs]:void 0;return typeof e=="number"?e>=0?e&zI:nx:e}function E_(n,e,t){let r=1<<n;return!!(t[e+(n>>HI)]&r)}function D_(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var Fr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return QI(this._tNode,this._lView,e,Rc(r),t)}};function nx(){return new Fr(Nt(),Se())}function tp(n){return qs(()=>{let e=n.prototype.constructor,t=e[uc]||hf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[uc]||hf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function hf(n){return K_(n)?()=>{let e=hf(pt(n));return e&&e()}:Hi(n)}function rx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!(s[Z]&512);){let a=YI(o,s,t,r|ue.Self,Xt);if(a!==Xt)return a;let u=o.parent;if(!u){let l=s[wI];if(l){let h=l.get(t,Xt,r);if(h!==Xt)return h}u=ZI(s),s=s[ro]}o=u}return i}function ZI(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[zt]:null}function T_(n,e=null,t=null,r){let i=JI(n,e,t,r);return i.resolveInjectorInitializers(),i}function JI(n,e=null,t=null,r,i=new Set){let o=[t||Rt,eA(n)];return r=r||(typeof n=="object"?void 0:gt(n)),new Os(o,e||zf(),r||null,i)}var Wr=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Ns}static{this.NULL=new dc}static create(t,r){if(Array.isArray(t))return T_({name:""},r,t,"");{let i=t.name??"";return T_({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Q({token:n,providedIn:"any",factory:()=>ee(iI)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var ix="ngOriginalError";function qh(n){return n[ix]}var Dn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&qh(e);for(;t&&qh(t);)t=qh(t);return t||null}},XI=new Y("",{providedIn:"root",factory:()=>U(Dn).handleError.bind(void 0)}),eE=(()=>{class n{static{this.__NG_ELEMENT_ID__=ox}static{this.__NG_ENV_ID__=t=>t}}return n})(),ff=class extends eE{constructor(e){super(),this._lView=e}onDestroy(e){return xI(this._lView,e),()=>TA(this._lView,e)}};function ox(){return new ff(Se())}function sx(){return Fc(Nt(),Se())}function Fc(n,e){return new Gs(Ht(n,e))}var Gs=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=sx}}return n})();var pf=class extends Ge{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,dA()&&(this.destroyRef=U(eE,{optional:!0})??void 0)}emit(e){let t=me(null);try{super.next(e)}finally{me(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=zh(o),i&&(i=zh(i)),s&&(s=zh(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}};function zh(n){return e=>{setTimeout(n,void 0,e)}}var Ut=pf;function tE(n){return(n.flags&128)===128}var nE=new Map,ax=0;function ux(){return ax++}function cx(n){nE.set(n[Pc],n)}function lx(n){nE.delete(n[Pc])}var C_="__ngContext__";function $r(n,e){kr(e)?(n[C_]=e[Pc],cx(e)):n[C_]=e}function rE(n){return oE(n[Fs])}function iE(n){return oE(n[Bt])}function oE(n){for(;n!==null&&!Sn(n);)n=n[Bt];return n}var gf;function sE(n){gf=n}function dx(){if(gf!==void 0)return gf;if(typeof document<"u")return document;throw new K(210,!1)}var np=new Y("",{providedIn:"root",factory:()=>hx}),hx="ng",rp=new Y(""),Gt=new Y("",{providedIn:"platform",factory:()=>"unknown"});var ip=new Y("",{providedIn:"root",factory:()=>dx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fx="h",px="b";var gx=()=>null;function op(n,e,t=!1){return gx(n,e,t)}var aE=!1,mx=new Y("",{providedIn:"root",factory:()=>aE});var wc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${H_})`}};function Lc(n){return n instanceof wc?n.changingThisBreaksApplicationSecurity:n}function uE(n,e){let t=yx(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${H_})`)}return t===e}function yx(n){return n instanceof wc&&n.getTypeName()||null}var vx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cE(n){return n=String(n),n.match(vx)?n:"unsafe:"+n}var sp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(sp||{});function O$(n){let e=wx();return e?e.sanitize(sp.URL,n)||"":uE(n,"URL")?Lc(n):cE(Ms(n))}function wx(){let n=Se();return n&&n[qt].sanitizer}function lE(n){return n instanceof Function?n():n}var Tn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Tn||{}),_x;function ap(n,e){return _x(n,e)}function $i(n,e,t,r,i){if(r!=null){let o,s=!1;Sn(r)?o=r:kr(r)&&(s=!0,r=r[bn]);let a=nn(r);n===0&&t!==null?i==null?gE(e,t,a):_c(e,t,a,i||null,!0):n===1&&t!==null?_c(e,t,a,i||null,!0):n===2?Lx(e,a,s):n===3&&e.destroyNode(a),o!=null&&jx(e,n,o,t,i)}}function Ix(n,e){return n.createText(e)}function Ex(n,e,t){n.setValue(e,t)}function dE(n,e,t){return n.createElement(e,t)}function Dx(n,e){hE(n,e),e[bn]=null,e[zt]=null}function Tx(n,e,t,r,i,o){r[bn]=i,r[zt]=e,Vc(n,r,t,1,i,o)}function hE(n,e){e[qt].changeDetectionScheduler?.notify(1),Vc(n,e,e[at],2,null,null)}function Cx(n){let e=n[Fs];if(!e)return Hh(n[he],n);for(;e;){let t=null;if(kr(e))t=e[Fs];else{let r=e[Mt];r&&(t=r)}if(!t){for(;e&&!e[Bt]&&e!==n;)kr(e)&&Hh(e[he],e),e=e[st];e===null&&(e=n),kr(e)&&Hh(e[he],e),t=e&&e[Bt]}e=t}}function bx(n,e,t,r){let i=Mt+r,o=t.length;r>0&&(t[i-1][Bt]=e),r<o-Mt?(e[Bt]=t[i],rI(t,Mt+r,e)):(t.push(e),e[Bt]=null),e[st]=t;let s=e[Nc];s!==null&&t!==s&&Sx(s,e);let a=e[Yi];a!==null&&a.insertView(n),uf(e),e[Z]|=128}function Sx(n,e){let t=n[pc],i=e[st][st][tn];e[tn]!==i&&(n[Z]|=Hf.HasTransplantedViews),t===null?n[pc]=[e]:t.push(e)}function fE(n,e){let t=n[pc],r=t.indexOf(e);t.splice(r,1)}function mf(n,e){if(n.length<=Mt)return;let t=Mt+e,r=n[t];if(r){let i=r[Nc];i!==null&&i!==n&&fE(i,r),e>0&&(n[t-1][Bt]=r[Bt]);let o=lc(n,Mt+e);Dx(r[he],r);let s=o[Yi];s!==null&&s.detachView(o[he]),r[st]=null,r[Bt]=null,r[Z]&=-129}return r}function pE(n,e){if(!(e[Z]&256)){let t=e[at];t.destroyNode&&Vc(n,e,t,3,null,null),Cx(e)}}function Hh(n,e){if(e[Z]&256)return;let t=me(null);try{e[Z]&=-129,e[Z]|=256,e[Vr]&&s_(e[Vr]),xx(n,e),Ax(n,e),e[he].type===1&&e[at].destroy();let r=e[Nc];if(r!==null&&Sn(e[st])){r!==e[st]&&fE(r,e);let i=e[Yi];i!==null&&i.detachView(n)}lx(e)}finally{me(t)}}function Ax(n,e){let t=n.cleanup,r=e[ks];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[ks]=null);let i=e[Yn];if(i!==null){e[Yn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function xx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Br)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Jt(4,a,u);try{u.call(a)}finally{Jt(5,a,u)}}else{Jt(4,i,o);try{o.call(i)}finally{Jt(5,i,o)}}}}}function Rx(n,e,t){return Mx(n,e.parent,t)}function Mx(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[bn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===en.None||o===en.Emulated)return null}return Ht(r,t)}}function _c(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gE(n,e,t){n.appendChild(e,t)}function b_(n,e,t,r,i){r!==null?_c(n,e,t,r,i):gE(n,e,t)}function Nx(n,e,t,r){n.removeChild(e,t,r)}function up(n,e){return n.parentNode(e)}function Px(n,e){return n.nextSibling(e)}function Ox(n,e,t){return Fx(n,e,t)}function kx(n,e,t){return n.type&40?Ht(n,t):null}var Fx=kx,S_;function cp(n,e,t,r){let i=Rx(n,r,e),o=e[at],s=r.parent||e[zt],a=Ox(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)b_(o,i,t[u],a,!1);else b_(o,i,t,a,!1);S_!==void 0&&S_(o,r,e,t,i)}function sc(n,e){if(e!==null){let t=e.type;if(t&3)return Ht(e,n);if(t&4)return yf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return sc(n,r);{let i=n[e.index];return Sn(i)?yf(-1,i):nn(i)}}else{if(t&32)return ap(e,n)()||nn(n[e.index]);{let r=mE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vs(n[tn]);return sc(i,r)}else return sc(n,e.next)}}}return null}function mE(n,e){if(e!==null){let r=n[tn][zt],i=e.projection;return r.projection[i]}return null}function yf(n,e){let t=Mt+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return sc(r,i)}return e[jr]}function Lx(n,e,t){let r=up(n,e);r&&Nx(n,r,e,t)}function lp(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],u=t.type;if(s&&e===0&&(a&&$r(nn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)lp(n,e,t.child,r,i,o,!1),$i(e,n,i,a,o);else if(u&32){let l=ap(t,r),h;for(;h=l();)$i(e,n,i,h,o);$i(e,n,i,a,o)}else u&16?Vx(n,e,r,t,i,o):$i(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Vc(n,e,t,r,i,o){lp(t,r,n.firstChild,e,i,o,!1)}function Vx(n,e,t,r,i,o){let s=t[tn],u=s[zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];$i(e,n,i,h,o)}else{let l=u,h=s[st];tE(r)&&(l.flags|=128),lp(n,e,l,h,i,o,!0)}}function jx(n,e,t,r,i){let o=t[jr],s=nn(t);o!==s&&$i(e,n,r,o,i);for(let a=Mt;a<t.length;a++){let u=t[a];Vc(u[he],u,n,e,r,o)}}function Ux(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Tn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tn.Important),n.setStyle(t,r,i,o))}}function Bx(n,e,t){n.setAttribute(e,"style",t)}function yE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function vE(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&nf(n,e,r),i!==null&&yE(n,e,i),o!==null&&Bx(n,e,o)}var An={};function k$(n=1){wE(rn(),Se(),Gr()+n,!1)}function wE(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ic(e,o,t)}else{let o=n.preOrderHooks;o!==null&&oc(e,o,0,t)}Ur(t)}function Pt(n,e=ue.Default){let t=Se();if(t===null)return ee(n,e);let r=Nt();return QI(r,t,pt(n),e)}function _E(n,e,t,r,i,o){let s=me(null);try{let a=null;i&En.SignalBased&&(a=e[r][n_]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&En.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):EI(e,a,r,o)}finally{me(s)}}function $x(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ur(~i);else{let o=i,s=t[++r],a=t[++r];LA(s,o);let u=e[o];a(2,u)}}}finally{Ur(-1)}}function jc(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[bn]=i,p[Z]=r|4|128|8|64,(l!==null||n&&n[Z]&2048)&&(p[Z]|=2048),AI(p),p[st]=p[ro]=n,p[$t]=t,p[qt]=s||n&&n[qt],p[at]=a||n&&n[at],p[Qi]=u||n&&n[Qi]||null,p[zt]=o,p[Pc]=ux(),p[hc]=h,p[wI]=l,p[tn]=e.type==2?n[tn]:p,p}function Uc(n,e,t,r,i){let o=n.data[e];if(o===null)o=qx(n,e,t,r,i),FA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=MA();o.injectorIndex=s===null?-1:s.injectorIndex}return Hs(o,!0),o}function qx(n,e,t,r,i){let o=MI(),s=NI(),a=s?o:o&&o.parent,u=n.data[e]=Kx(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function IE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function EE(n,e,t,r,i){let o=Gr(),s=r&2;try{Ur(-1),s&&e.length>Zn&&wE(n,e,Zn,!1),Jt(s?2:0,i),t(r,i)}finally{Ur(o),Jt(s?3:1,i)}}function DE(n,e,t){if(II(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{me(r)}}}function TE(n,e,t){RI()&&(tR(n,e,t,Ht(t,e)),(t.flags&64)===64&&xE(n,e,t))}function CE(n,e,t=Ht){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function bE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=dp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function dp(n,e,t,r,i,o,s,a,u,l,h){let p=Zn+r,m=p+i,v=zx(p,m),S=typeof l=="function"?l():l;return v[he]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function zx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:An);return t}function Hx(n,e,t,r){let o=r.get(mx,aE)||t===en.ShadowDom,s=n.selectRootElement(e,o);return Gx(s),s}function Gx(n){Wx(n)}var Wx=()=>null;function Kx(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return AA()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function A_(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=En.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?x_(r,t,l,a,u):x_(r,t,l,a)}return r}function x_(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Qx(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,S=m?m.outputs:null;u=A_(0,p.inputs,h,u,v),l=A_(1,p.outputs,h,l,S);let C=u!==null&&s!==null&&!$f(e)?lR(u,h,s):null;a.push(C)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Yx(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Zx(n,e,t,r,i,o,s,a){let u=Ht(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(hp(n,t,h,r,i),Oc(e)&&Jx(t,e.index)):e.type&3?(r=Yx(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Jx(n,e){let t=nr(e,n);t[Z]&16||(t[Z]|=64)}function SE(n,e,t,r){if(RI()){let i=r===null?null:{"":-1},o=rR(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&AE(n,e,t,s,i,a),i&&iR(t,r,i)}t.mergedAttrs=Ps(t.mergedAttrs,t.attrs)}function AE(n,e,t,r,i,o){for(let l=0;l<r.length;l++)df(vc(t,e),n,r[l].type);sR(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=IE(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ps(t.mergedAttrs,h.hostAttrs),aR(n,t,e,u,h),oR(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Qx(n,t,o)}function Xx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;eR(s)!=a&&s.push(a),s.push(t,r,o)}}function eR(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function tR(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Oc(t)&&uR(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vc(t,e),$r(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Zi(e,n,a,t);if($r(l,e),s!==null&&cR(e,a-i,l,u,t,s),Jn(u)){let h=nr(t.index,e);h[$t]=Zi(e,n,a,t)}}}function xE(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=VA();try{Ur(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];cf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&nR(u,l)}}finally{Ur(-1),cf(s)}}function nR(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function rR(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(HS(e,s.selectors,!1))if(r||(r=[]),Jn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;vf(n,e,u)}else r.unshift(s),vf(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function vf(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iR(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new K(-301,!1);r.push(e[i],o)}}}function oR(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jn(e)&&(t[""]=n)}}function sR(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aR(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Hi(i.type,!0)),s=new Br(o,Jn(i),Pt);n.blueprint[r]=s,t[r]=s,Xx(n,e,r,IE(n,t,i.hostVars,An),i)}function uR(n,e,t){let r=Ht(e,n),i=bE(t),o=n[qt].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Bc(n,jc(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function cR(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];_E(r,t,u,l,h,p)}}function lR(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function RE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ME(n,e){let t=n.contentQueries;if(t!==null){let r=me(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];kI(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function Bc(n,e){return n[Fs]?n[v_][Bt]=e:n[Fs]=e,n[v_]=e,e}function wf(n,e,t){kI(0);let r=me(null);try{e(n,t)}finally{me(r)}}function dR(n){return n[ks]||(n[ks]=[])}function hR(n){return n.cleanup||(n.cleanup=[])}function NE(n,e){let t=n[Qi],r=t?t.get(Dn,null):null;r&&r.handleError(e)}function hp(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];_E(h,l,r,a,u,i)}}function PE(n,e,t){let r=bI(e,n);Ex(n[at],r,t)}function fR(n,e){let t=nr(e,n),r=t[he];pR(r,t);let i=t[bn];i!==null&&t[hc]===null&&(t[hc]=op(i,t[Qi])),fp(r,t,t[$t])}function pR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function fp(n,e,t){Qf(e);try{let r=n.viewQuery;r!==null&&wf(1,r,t);let i=n.template;i!==null&&EE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Yi]?.finishViewCreation(n),n.staticContentQueries&&ME(n,e),n.staticViewQueries&&wf(2,n.viewQuery,t);let o=n.components;o!==null&&gR(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,Yf()}}function gR(n,e){for(let t=0;t<e.length;t++)fR(n,e[t])}function mR(n,e,t,r){let i=me(null);try{let o=e.tView,a=n[Z]&4096?4096:16,u=jc(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Nc]=l;let h=n[Yi];return h!==null&&(u[Yi]=h.createEmbeddedView(o)),fp(o,u,t),u}finally{me(i)}}function R_(n,e){return!e||e.firstChild===null||tE(n)}function yR(n,e,t,r=!0){let i=e[he];if(bx(i,e,n,t),r){let s=yf(t,n),a=e[at],u=up(a,n[jr]);u!==null&&Tx(i,n[zt],a,e,u,s)}let o=e[hc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ic(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(nn(o)),Sn(o)&&vR(o,r);let s=t.type;if(s&8)Ic(n,e,t.child,r);else if(s&32){let a=ap(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=mE(e,t);if(Array.isArray(a))r.push(...a);else{let u=Vs(e[tn]);Ic(u[he],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vR(n,e){for(let t=Mt;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Ic(r[he],r,i,e)}n[jr]!==n[bn]&&e.push(n[jr])}var OE=[];function wR(n){return n[Vr]??_R(n)}function _R(n){let e=OE.pop()??Object.create(ER);return e.lView=n,e}function IR(n){n.lView[Vr]!==n&&(n.lView=null,OE.push(n))}var ER=je(G({},r_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ls(n.lView)},consumerOnSignalRead(){this.lView[Vr]=this}}),kE=100;function FE(n,e=!0,t=0){let r=n[qt],i=r.rendererFactory,o=!1;o||i.begin?.();try{DR(n,t)}catch(s){throw e&&NE(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function DR(n,e){_f(n,e);let t=0;for(;Kf(n);){if(t===kE)throw new K(103,!1);t++,_f(n,1)}}function TR(n,e,t,r){let i=e[Z];if((i&256)===256)return;let o=!1;!o&&e[qt].inlineEffectRunner?.flush(),Qf(e);let s=null,a=null;!o&&CR(n)&&(a=wR(e),s=i_(a));try{AI(e),kA(n.bindingStartIndex),t!==null&&EE(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&ic(e,p,null)}else{let p=n.preOrderHooks;p!==null&&oc(e,p,0,null),Bh(e,0)}if(bR(e),LE(e,0),n.contentQueries!==null&&ME(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&ic(e,p)}else{let p=n.contentHooks;p!==null&&oc(e,p,1),Bh(e,1)}$x(n,e);let l=n.components;l!==null&&jE(e,l,0);let h=n.viewQuery;if(h!==null&&wf(2,h,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&ic(e,p)}else{let p=n.viewHooks;p!==null&&oc(e,p,2),Bh(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Uh]){for(let p of e[Uh])p();e[Uh]=null}o||(e[Z]&=-73)}catch(u){throw Ls(e),u}finally{a!==null&&(o_(a,s),IR(a)),Yf()}}function CR(n){return n.type!==2}function LE(n,e){for(let t=rE(n);t!==null;t=iE(t))for(let r=Mt;r<t.length;r++){let i=t[r];VE(i,e)}}function bR(n){for(let e=rE(n);e!==null;e=iE(e)){if(!(e[Z]&Hf.HasTransplantedViews))continue;let t=e[pc];for(let r=0;r<t.length;r++){let i=t[r],o=i[st];EA(i)}}}function SR(n,e,t){let r=nr(e,n);VE(r,t)}function VE(n,e){Wf(n)&&_f(n,e)}function _f(n,e){let r=n[he],i=n[Z],o=n[Vr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&kh(o)),o&&(o.dirty=!1),n[Z]&=-9217,s)TR(r,n,r.template,n[$t]);else if(i&8192){LE(n,1);let a=r.components;a!==null&&jE(n,a,1)}}function jE(n,e,t){for(let r=0;r<e.length;r++)SR(n,e[r],t)}function pp(n){for(n[qt].changeDetectionScheduler?.notify();n;){n[Z]|=64;let e=Vs(n);if(fA(n)&&!e)return n;n=e}return null}var qr=class{get rootNodes(){let e=this._lView,t=e[he];return Ic(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$t]}set context(e){this._lView[$t]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[st];if(Sn(e)){let t=e[fc],r=t?t.indexOf(this):-1;r>-1&&(mf(e,r),lc(t,r))}this._attachedToViewContainer=!1}pE(this._lView[he],this._lView)}onDestroy(e){xI(this._lView,e)}markForCheck(){pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Z]&=-129}reattach(){uf(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,FE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,hE(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e,uf(this._lView)}},$c=(()=>{class n{static{this.__NG_ELEMENT_ID__=RR}}return n})(),AR=$c,xR=class extends AR{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=mR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new qr(i)}};function RR(){return MR(Nt(),Se())}function MR(n,e){return n.type&4?new xR(e,n,Fc(n,e)):null}var L$=new RegExp(`^(\\d+)*(${px}|${fx})*(.*)`);var NR=()=>null;function M_(n,e){return NR(n,e)}var If=class{},Ef=class{},Ec=class{};function PR(n){let e=Error(`No component factory found for ${gt(n)}.`);return e[OR]=n,e}var OR="ngComponent";var Df=class{resolveComponentFactory(e){throw PR(e)}},qc=(()=>{class n{static{this.NULL=new Df}}return n})(),js=class{},zc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>kR()}}return n})();function kR(){let n=Se(),e=Nt(),t=nr(e.index,n);return(kr(t)?t:n)[at]}var FR=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}}return n})(),Gh={};var N_=new Set;function gp(n){N_.has(n)||(N_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function P_(...n){}function LR(){let n=typeof xs.requestAnimationFrame=="function",e=xs[n?"requestAnimationFrame":"setTimeout"],t=xs[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var De=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ut(!1),this.onMicrotaskEmpty=new Ut(!1),this.onStable=new Ut(!1),this.onError=new Ut(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=LR().nativeRequestAnimationFrame,UR(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new K(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,VR,P_,P_);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},VR={};function mp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jR(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xs,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Tf(n),n.isCheckStableRunning=!0,mp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Tf(n))}function UR(n){let e=()=>{jR(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(BR(a))return t.invokeTask(i,o,s,a);try{return O_(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),k_(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return O_(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),k_(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Tf(n),mp(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Tf(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function O_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function k_(n){n._nesting--,mp(n)}function BR(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var UE=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Cf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=u_(i,a);else if(o==2){let u=a,l=e[++s];r=u_(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Dc=class extends qc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lr(e);return new Us(t,this.ngModule)}};function F_(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function $R(n){let e=n.toLowerCase();return e==="svg"?yA:e==="math"?vA:null}var bf=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Rc(r);let i=this.injector.get(e,Gh,r);return i!==Gh||t===Gh?i:this.parentInjector.get(e,t,r)}},Us=class extends Ec{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=F_(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return F_(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=QS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=me(null);try{i=i||this.ngModule;let s=i instanceof _t?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new bf(e,s):e,u=a.get(js,null);if(u===null)throw new K(407,!1);let l=a.get(FR,null),h=a.get(UE,null),p=a.get(If,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},v=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",C=r?Hx(v,r,this.componentDef.encapsulation,a):dE(v,S,$R(S)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let k=null;C!==null&&(k=op(C,a,!0));let $=dp(0,null,null,1,0,null,null,null,null,null,null),F=jc(null,$,null,A,null,null,m,v,a,null,k);Qf(F);let W,ae;try{let H=this.componentDef,I,y=null;H.findHostDirectiveDefs?(I=[],y=new Map,H.findHostDirectiveDefs(H,I,y),I.push(H)):I=[H];let _=qR(F,C),E=zR(_,C,H,I,F,m,v);ae=SI($,Zn),C&&WR(v,H,C,r),t!==void 0&&KR(ae,this.ngContentSelectors,t),W=GR(E,H,I,y,F,[QR]),fp($,F,null)}finally{Yf()}return new Sf(this.componentType,W,Fc(ae,F),F,ae)}finally{me(o)}}},Sf=class extends Ef{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new qr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;hp(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=nr(this._tNode.index,o);pp(s)}}get injector(){return new Fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qR(n,e){let t=n[he],r=Zn;return n[r]=e,Uc(t,r,2,"#host",null)}function zR(n,e,t,r,i,o,s){let a=i[he];HR(r,n,e,s);let u=null;e!==null&&(u=op(e,i[Qi]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=jc(i,bE(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&vf(a,n,r.length-1),Bc(i,p),i[n.index]=p}function HR(n,e,t,r){for(let i of n)e.mergedAttrs=Ps(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cf(e,e.mergedAttrs,!0),t!==null&&vE(r,t,e))}function GR(n,e,t,r,i,o){let s=Nt(),a=i[he],u=Ht(s,i);AE(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Zi(i,a,p,s);$r(m,i)}xE(a,i,s),u&&$r(u,i);let l=Zi(i,a,s.directiveStart+s.componentOffset,s);if(n[$t]=i[$t]=l,o!==null)for(let h of o)h(l,e);return DE(a,s,i),l}function WR(n,e,t,r){if(r)nf(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=YS(e.selectors[0]);i&&nf(n,t,i),o&&o.length>0&&yE(n,t,o.join(" "))}}function KR(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function QR(){let n=Nt();Xf(Se()[he],n)}var io=(()=>{class n{static{this.__NG_ELEMENT_ID__=YR}}return n})();function YR(){let n=Nt();return JR(n,Se())}var ZR=io,BE=class extends ZR{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fc(this._hostTNode,this._hostLView)}get injector(){return new Fr(this._hostTNode,this._hostLView)}get parentInjector(){let e=ep(this._hostTNode,this._hostLView);if(qI(e)){let t=yc(e,this._hostLView),r=mc(e),i=t[he].data[r+8];return new Fr(i,t)}else return new Fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=L_(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=M_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,R_(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!hA(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new Us(Lr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(s?l:this.parentInjector).get(_t,null);C&&(o=C)}let h=Lr(u.componentType??{}),p=M_(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,R_(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[st],l=new BE(u,u[zt],u[st]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return yR(s,i,o,r),e.attachToViewContainerRef(),rI(Wh(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=L_(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=mf(this._lContainer,t);r&&(lc(Wh(this._lContainer),t),pE(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=mf(this._lContainer,t);return r&&lc(Wh(this._lContainer),t)!=null?new qr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function L_(n){return n[fc]}function Wh(n){return n[fc]||(n[fc]=[])}function JR(n,e){let t,r=e[n.index];return Sn(r)?t=r:(t=RE(r,e,null,n),e[n.index]=t,Bc(e,t)),eM(t,e,n,r),new BE(t,n,e)}function XR(n,e){let t=n[at],r=t.createComment(""),i=Ht(e,n),o=up(t,i);return _c(t,o,r,Px(t,i),!1),r}var eM=rM,tM=()=>!1;function nM(n,e,t){return tM(n,e,t)}function rM(n,e,t,r){if(n[jr])return;let i;t.type&8?i=nn(r):i=XR(e,t),n[jr]=i}function iM(n){return Object.getPrototypeOf(n.prototype).constructor}function oM(n){let e=iM(n.type),t=!0,r=[n];for(;e;){let i;if(Jn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=tc(n.inputs),s.inputTransforms=tc(n.inputTransforms),s.declaredInputs=tc(n.declaredInputs),s.outputs=tc(n.outputs);let a=i.hostBindings;a&&lM(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&uM(n,u),l&&cM(n,l),sM(n,i),mS(n.outputs,i.outputs),Jn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===oM&&(t=!1)}}e=Object.getPrototypeOf(e)}aM(r)}function sM(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function aM(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ps(i.hostAttrs,t=Ps(t,i.hostAttrs))}}function tc(n){return n===Gi?{}:n===Rt?[]:n}function uM(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function cM(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function lM(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Xn=class{},Bs=class{};var Af=class extends Xn{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dc(this);let i=hI(e);this._bootstrapComponents=lE(i.bootstrap),this._r3Injector=JI(e,t,[{provide:Xn,useValue:this},{provide:qc,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xf=class extends Bs{constructor(e){super(),this.moduleType=e}create(e){return new Af(this.moduleType,e,[])}};var Tc=class extends Xn{constructor(e){super(),this.componentFactoryResolver=new Dc(this),this.instance=null;let t=new Os([...e.providers,{provide:Xn,useValue:this},{provide:qc,useValue:this.componentFactoryResolver}],e.parent||zf(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function yp(n,e,t=null){return new Tc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Kr=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $E(n){return hM(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function dM(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function hM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fM(n,e,t){return n[e]=t}function Ji(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pM(n,e,t,r){let i=Ji(n,e,t);return Ji(n,e+1,r)||i}function gM(n){return(n.flags&32)===32}function mM(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Uc(e,n,4,s||null,gc(l,a));SE(e,t,h,gc(l,u)),Xf(e,h);let p=h.tView=dp(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function yM(n,e,t,r,i,o,s,a){let u=Se(),l=rn(),h=n+Zn,p=l.firstCreatePass?mM(h,l,u,e,t,r,i,o,s):l.data[h];Hs(p,!1);let m=vM(l,u,p,n);Zf()&&cp(l,u,m,p),$r(m,u);let v=RE(m,u,m,p);return u[h]=v,Bc(u,v),nM(v,p,u),Gf(p)&&TE(l,u,p),s!=null&&CE(u,p,a),yM}var vM=wM;function wM(n,e,t,r){return Jf(!0),e[at].createComment("")}function _M(n,e,t,r){return Ji(n,PI(),t)?e+Ms(t)+r:An}function IM(n,e,t,r,i,o){let s=OA(),a=pM(n,s,t,i);return OI(2),a?e+Ms(t)+r+Ms(i)+o:An}function nc(n,e){return n<<17|e<<2}function zr(n){return n>>17&32767}function EM(n){return(n&2)==2}function DM(n,e){return n&131071|e<<17}function Rf(n){return n|2}function Xi(n){return(n&131068)>>2}function Kh(n,e){return n&-131069|e<<2}function TM(n){return(n&1)===1}function Mf(n){return n|1}function CM(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=zr(s),u=Xi(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||zs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=zr(n[a+1]);n[r+1]=nc(m,a),m!==0&&(n[m+1]=Kh(n[m+1],r)),n[a+1]=DM(n[a+1],r)}else n[r+1]=nc(a,0),a!==0&&(n[a+1]=Kh(n[a+1],r)),a=r;else n[r+1]=nc(u,0),a===0?a=r:n[u+1]=Kh(n[u+1],r),u=r;l&&(n[r+1]=Rf(n[r+1])),V_(n,h,r,!0),V_(n,h,r,!1),bM(e,h,n,r,o),s=nc(a,u),o?e.classBindings=s:e.styleBindings=s}function bM(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&zs(o,e)>=0&&(t[r+1]=Mf(t[r+1]))}function V_(n,e,t,r){let i=n[t+1],o=e===null,s=r?zr(i):Xi(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];SM(u,e)&&(a=!0,n[s+1]=r?Mf(l):Rf(l)),s=r?zr(l):Xi(l)}a&&(n[t+1]=r?Rf(i):Mf(i))}function SM(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?zs(n,e)>=0:!1}function AM(n,e,t){let r=Se(),i=PI();if(Ji(r,i,e)){let o=rn(),s=$A();Zx(o,s,r,n,e,r[at],t,!1)}return AM}function j_(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";hp(n,t,o[s],s,r)}function xM(n,e){return RM(n,e,null,!0),xM}function RM(n,e,t,r){let i=Se(),o=rn(),s=OI(2);if(o.firstUpdatePass&&NM(o,n,s,r),e!==An&&Ji(i,s,e)){let a=o.data[Gr()];LM(o,a,i,i[at],n,i[s+1]=VM(e,t),r,s)}}function MM(n,e){return e>=n.expandoStartIndex}function NM(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Gr()],s=MM(n,t);jM(o,r)&&e===null&&!s&&(e=!1),e=PM(i,o,e,r),CM(i,o,e,t,s,r)}}function PM(n,e,t,r){let i=jA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Qh(null,n,e,t,r),t=$s(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Qh(i,n,e,t,r),o===null){let u=OM(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Qh(null,n,e,u[1],r),u=$s(u,e.attrs,r),kM(n,e,r,u))}else o=FM(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function OM(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xi(r)!==0)return n[zr(r)]}function kM(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[zr(i)]=r}function FM(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=$s(r,s,t)}return $s(r,e.attrs,t)}function Qh(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=$s(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function $s(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),FS(n,s,t?!0:e[++o]))}return n===void 0?null:n}function LM(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=TM(l)?U_(u,e,t,i,Xi(l),s):void 0;if(!Cc(h)){Cc(o)||EM(l)&&(o=U_(u,null,t,i,a,s));let p=bI(Gr(),t);Ux(r,s,p,i,o)}}function U_(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===An&&(m=p?Rt:void 0);let v=p?Vh(m,r):h===r?m:void 0;if(l&&!Cc(v)&&(v=Vh(u,r)),Cc(v)&&(a=v,s))return a;let S=n[i+1];i=s?zr(S):Xi(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Vh(u,r))}return a}function Cc(n){return n!==void 0}function VM(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=gt(Lc(n)))),n}function jM(n,e){return(n.flags&(e?8:16))!==0}function UM(n,e,t,r,i,o){let s=e.consts,a=gc(s,i),u=Uc(e,n,2,r,a);return SE(e,t,u,gc(s,o)),u.attrs!==null&&Cf(u,u.attrs,!1),u.mergedAttrs!==null&&Cf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function qE(n,e,t,r){let i=Se(),o=rn(),s=Zn+n,a=i[at],u=o.firstCreatePass?UM(s,o,i,e,t,r):o.data[s],l=BM(o,i,u,a,e,n);i[s]=l;let h=Gf(u);return Hs(u,!0),vE(a,l,u),!gM(u)&&Zf()&&cp(o,i,l,u),CA()===0&&$r(l,i),bA(),h&&(TE(o,i,u),DE(o,u,i)),r!==null&&CE(i,u),qE}function zE(){let n=Nt();NI()?NA():(n=n.parent,Hs(n,!1));let e=n;xA(e)&&RA(),SA();let t=rn();return t.firstCreatePass&&(Xf(t,n),II(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&WA(e)&&j_(t,e,Se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KA(e)&&j_(t,e,Se(),e.stylesWithoutHost,!1),zE}function vp(n,e,t,r){return qE(n,e,t,r),zE(),vp}var BM=(n,e,t,r,i,o)=>(Jf(!0),dE(r,i,qA()));function j$(){return Se()}var bc="en-US";var $M=bc;function qM(n){typeof n=="string"&&($M=n.toLowerCase().replace(/_/g,"-"))}function HE(n,e,t,r){let i=Se(),o=rn(),s=Nt();return HM(o,i,i[at],s,n,e,r),HE}function zM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ks],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function HM(n,e,t,r,i,o,s){let a=Gf(r),l=n.firstCreatePass&&hR(n),h=e[$t],p=dR(e),m=!0;if(r.type&3||s){let C=Ht(r,e),A=s?s(C):C,k=p.length,$=s?W=>s(nn(W[r.index])):r.index,F=null;if(!s&&a&&(F=zM(n,e,i,r.index)),F!==null){let W=F.__ngLastListenerFn__||F;W.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,m=!1}else{o=$_(r,e,h,o,!1);let W=t.listen(A,i,o);p.push(o,W),l&&l.push(i,$,k,k+1)}}else o=$_(r,e,h,o,!1);let v=r.outputs,S;if(m&&v!==null&&(S=v[i])){let C=S.length;if(C)for(let A=0;A<C;A+=2){let k=S[A],$=S[A+1],ae=e[k][$].subscribe(o),H=p.length;p.push(o,ae),l&&l.push(i,r.index,H,-(H+1))}}}function B_(n,e,t,r){let i=me(null);try{return Jt(6,e,t),t(r)!==!1}catch(o){return NE(n,o),!1}finally{Jt(7,e,t),me(i)}}function $_(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?nr(n.index,e):e;pp(a);let u=B_(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=B_(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function U$(n=1){return BA(n)}function B$(n,e=""){let t=Se(),r=rn(),i=n+Zn,o=r.firstCreatePass?Uc(r,i,1,e,null):r.data[i],s=GM(r,t,o,e,n);t[i]=s,Zf()&&cp(r,t,s,o),Hs(o,!1)}var GM=(n,e,t,r,i)=>(Jf(!0),Ix(e[at],r));function WM(n){return GE("",n,""),WM}function GE(n,e,t){let r=Se(),i=_M(r,n,e,t);return i!==An&&PE(r,Gr(),i),GE}function KM(n,e,t,r,i){let o=Se(),s=IM(o,n,e,t,r,i);return s!==An&&PE(o,Gr(),s),KM}function QM(n,e,t){let r=rn();if(r.firstCreatePass){let i=Jn(n);Nf(t,r.data,r.blueprint,i,!0),Nf(e,r.data,r.blueprint,i,!1)}}function Nf(n,e,t,r,i){if(n=pt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Nf(n[o],e,t,r,i);else{let o=rn(),s=Se(),a=Nt(),u=Ki(n)?n:pt(n.provide),l=vI(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ki(n)||!n.multi){let v=new Br(l,i,Pt),S=Zh(u,e,i?h:h+m,p);S===-1?(df(vc(a,s),o,u),Yh(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[S]=v,s[S]=v)}else{let v=Zh(u,e,h+m,p),S=Zh(u,e,h,h+m),C=v>=0&&t[v],A=S>=0&&t[S];if(i&&!A||!i&&!C){df(vc(a,s),o,u);let k=JM(i?ZM:YM,t.length,i,r,l);!i&&A&&(t[S].providerFactory=k),Yh(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=WE(t[i?S:v],l,!i&&r);Yh(o,n,v>-1?v:S,k)}!i&&r&&A&&t[S].componentProviders++}}}function Yh(n,e,t,r){let i=Ki(e),o=iA(e);if(i||o){let u=(o?pt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function WE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Zh(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function YM(n,e,t,r){return Pf(this.multi,[])}function ZM(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Zi(t,t[he],this.providerFactory.index,r);o=a.slice(0,s),Pf(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Pf(i,o);return o}function Pf(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function JM(n,e,t,r,i){let o=new Br(n,t,Pt);return o.multi=[],o.index=e,o.componentProviders=0,WE(o,i,r&&!t),o}function $$(n,e=[]){return t=>{t.providersResolver=(r,i)=>QM(r,i?i(n):n,e)}}var XM=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=gI(!1,t.type),i=r.length>0?yp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(ee(_t))})}}return n})();function KE(n){gp("NgStandalone"),n.getStandaloneInjector=e=>e.get(XM).getOrCreateStandaloneInjector(n)}function q$(n,e,t,r){return tN(Se(),PA(),n,e,t,r)}function eN(n,e){let t=n[e];return t===An?void 0:t}function tN(n,e,t,r,i,o){let s=e+t;return Ji(n,s,i)?fM(n,s+1,o?r.call(o,i):r(i)):eN(n,s+1)}var er=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},wp=new er("17.3.12"),Hc=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var QE=new Y("");function Ws(n){return!!n&&typeof n.then=="function"}function YE(n){return!!n&&typeof n.subscribe=="function"}var ZE=new Y(""),JE=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=U(ZE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ws(o))t.push(o);else if(YE(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gc=new Y("");function nN(){a_(()=>{throw new K(600,!1)})}function rN(n){return n.isBoundToModule}function iN(n,e,t){try{let r=t();return Ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var oo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(XI),this.afterRenderEffectManager=U(UE),this.externalTestViews=new Set,this.beforeRender=new Ge,this.afterTick=new Ge,this.componentTypes=[],this.components=[],this.isStable=U(Kr).hasPendingTasks.pipe(se(t=>!t)),this._injector=U(_t)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ec;if(!this._injector.get(JE).done){let m=!i&&dI(t),v=!1;throw new K(405,v)}let s;i?s=t:s=this._injector.get(qc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=rN(s)?void 0:this._injector.get(Xn),u=r||s.selector,l=s.create(Wr.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(QE,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Jh(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new K(101,!1);let r=me(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,me(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===kE)throw new K(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)oN(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Of(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Of(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Jh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Gc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Jh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new K(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oN(n,e,t){!e&&!Of(n)||sN(n,t,e)}function Of(n){return Kf(n)}function sN(n,e,t){let r;t?(r=0,n[Z]|=1024):n[Z]&64?r=0:r=1,FE(n,e,r)}var kf=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_p=(()=>{class n{compileModuleSync(t){return new xf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=hI(t),o=lE(i.declarations).reduce((s,a)=>{let u=Lr(a);return u&&s.push(new Us(u)),s},[]);return new kf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aN=(()=>{class n{constructor(){this.zone=U(De),this.applicationRef=U(oo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uN(n){return[{provide:De,useFactory:n},{provide:Wi,multi:!0,useFactory:()=>{let e=U(aN,{optional:!0});return()=>e.initialize()}},{provide:Wi,multi:!0,useFactory:()=>{let e=U(hN);return()=>{e.initialize()}}},{provide:XI,useFactory:cN}]}function cN(){let n=U(De),e=U(Dn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function lN(n){let e=uN(()=>new De(dN(n)));return tr([[],e])}function dN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hN=(()=>{class n{constructor(){this.subscription=new Pe,this.initialized=!1,this.zone=U(De),this.pendingTasks=U(Kr)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fN(){return typeof $localize<"u"&&$localize.locale||bc}var Ip=new Y("",{providedIn:"root",factory:()=>U(Ip,ue.Optional|ue.SkipSelf)||fN()});var XE=new Y("");var ac=null;function pN(n=[],e){return Wr.create({name:e,providers:[{provide:Mc,useValue:"platform"},{provide:XE,useValue:new Set([()=>ac=null])},...n]})}function gN(n=[]){if(ac)return ac;let e=pN(n);return ac=e,nN(),mN(e),e}function mN(n){n.get(rp,null)?.forEach(t=>t())}function Ep(){return!1}var Ks=(()=>{class n{static{this.__NG_ELEMENT_ID__=yN}}return n})();function yN(n){return vN(Nt(),Se(),(n&16)===16)}function vN(n,e,t){if(Oc(n)&&!t){let r=nr(n.index,e);return new qr(r,r)}else if(n.type&47){let r=e[tn];return new qr(r,e)}return null}var Ff=class{constructor(){}supports(e){return $E(e)}create(e){return new Lf(e)}},wN=(n,e)=>e,Lf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wN}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<q_(r,i,o)?t:r,a=q_(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,S=v+m;h<=S&&S<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$E(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,dM(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Vf(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Vf=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},jf=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new jf,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function q_(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function z_(){return new Dp([new Ff])}var Dp=(()=>{class n{static{this.\u0275prov=Q({token:n,providedIn:"root",factory:z_})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||z_()),deps:[[n,new nI,new Hr]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new K(901,!1)}}return n})();function eD(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=gN(r),o=[lN(),...t||[]],a=new Tc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(De);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Dn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:v=>{l.handleError(v)}})});let p=()=>a.destroy(),m=i.get(XE);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),iN(l,u,()=>{let v=a.get(JE);return v.runInitializers(),v.donePromise.then(()=>{let S=a.get(Ip,bc);qM(S||bc);let C=a.get(oo);return e!==void 0&&C.bootstrap(e),C})})})}catch(e){return Promise.reject(e)}}var sD=null;function so(){return sD}function aD(n){sD??=n}var Wc=class{};var It=new Y(""),uD=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(DN),providedIn:"platform"})}}return n})();var DN=(()=>{class n extends uD{constructor(){super(),this._doc=U(It),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return so().getBaseHref(this._doc)}onPopState(t){let r=so().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=so().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function cD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function tD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Qr(n){return n&&n[0]!=="?"?"?"+n:n}var Kc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(lD),providedIn:"root"})}}return n})(),TN=new Y(""),lD=(()=>{class n extends Kc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ee(uD),ee(TN,8))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ys=(()=>{class n{constructor(t){this._subject=new Ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=SN(tD(nD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qr(r))}normalize(t){return n.stripTrailingSlash(bN(this._basePath,nD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Qr}static{this.joinWithSlash=cD}static{this.stripTrailingSlash=tD}static{this.\u0275fac=function(r){return new(r||n)(ee(Kc))}}static{this.\u0275prov=Q({token:n,factory:()=>CN(),providedIn:"root"})}}return n})();function CN(){return new Ys(ee(Kc))}function bN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function nD(n){return n.replace(/\/index.html$/,"")}function SN(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Qc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Tp=/\s+/,rD=[],g4=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=rD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Tp):rD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Tp):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Tp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Pt(Gs),Pt(zc))}}static{this.\u0275dir=no({type:n,selectors:[["","ngClass",""]],inputs:{klass:[En.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Cp=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},m4=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Cp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),iD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);iD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Pt(io),Pt($c),Pt(Dp))}}static{this.\u0275dir=no({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function iD(n,e){n.context.$implicit=e.item}var y4=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Pt(io),Pt($c))}}static{this.\u0275dir=no({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),bp=class{constructor(){this.$implicit=null,this.ngIf=null}};function oD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${gt(e)}'.`)}var AN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=to({type:n})}static{this.\u0275inj=eo({})}}return n})(),dD="browser",xN="server";function Yc(n){return n===xN}var ao=class{};var Js=class{},Jc=class{},Yr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ap=class{encodeKey(e){return hD(e)}encodeValue(e){return hD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function PN(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var ON=/%(\d[a-f0-9])/gi,kN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hD(n){return encodeURIComponent(n).replace(ON,(e,t)=>kN[t]??e)}function Zc(n){return`${n}`}var rr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ap,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=PN(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Zc):[Zc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zc(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var xp=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function FN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function fD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function pD(n){return typeof Blob<"u"&&n instanceof Blob}function gD(n){return typeof FormData<"u"&&n instanceof FormData}function LN(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Zs=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(FN(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Yr,this.context??=new xp,!this.params)this.params=new rr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||fD(this.body)||pD(this.body)||gD(this.body)||LN(this.body)?this.body:this.body instanceof rr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||gD(this.body)?null:pD(this.body)?this.body.type||null:fD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof rr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},uo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(uo||{}),Xs=class{constructor(e,t=tl.Ok,r="OK"){this.headers=e.headers||new Yr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Rp=class n extends Xs{constructor(e={}){super(e),this.type=uo.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Xc=class n extends Xs{constructor(e={}){super(e),this.type=uo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},el=class extends Xs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},tl=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(tl||{});function Sp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var VN=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Zs)o=t;else{let u;i.headers instanceof Yr?u=i.headers:u=new Yr(i.headers);let l;i.params&&(i.params instanceof rr?l=i.params:l=new rr({fromObject:i.params})),o=new Zs(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=X(o).pipe(Gn(u=>this.handler.handle(u)));if(t instanceof Zs||i.observe==="events")return s;let a=s.pipe(Tt(u=>u instanceof Xc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(se(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(se(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(se(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(se(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new rr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Sp(i,r))}post(t,r,i={}){return this.request("POST",t,Sp(i,r))}put(t,r,i={}){return this.request("PUT",t,Sp(i,r))}static{this.\u0275fac=function(r){return new(r||n)(ee(Js))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function wD(n,e){return e(n)}function jN(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function UN(n,e,t){return(r,i)=>Cn(t,()=>e(r,o=>n(o,i)))}var BN=new Y(""),Mp=new Y(""),$N=new Y(""),qN=new Y("");function zN(){let n=null;return(e,t)=>{n===null&&(n=(U(BN,{optional:!0})??[]).reduceRight(jN,wD));let r=U(Kr),i=r.add();return n(e,t).pipe(Kn(()=>r.remove(i)))}}var mD=(()=>{class n extends Js{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=U(Kr);let i=U(qN,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Mp),...this.injector.get($N,[])]));this.chain=i.reduceRight((o,s)=>UN(o,s,this.injector),wD)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Kn(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(ee(Jc),ee(_t))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();var HN=/^\)\]\}',?\n/;function GN(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var yD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new K(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?xe(r.\u0275loadImpl()):X(null)).pipe(ot(()=>new le(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,A)=>s.setRequestHeader(C,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let C=s.statusText||"OK",A=new Yr(s.getAllResponseHeaders()),k=GN(s)||t.url;return u=new Rp({headers:A,status:s.status,statusText:C,url:k}),u},h=()=>{let{headers:C,status:A,statusText:k,url:$}=l(),F=null;A!==tl.NoContent&&(F=typeof s.response>"u"?s.responseText:s.response),A===0&&(A=F?tl.Ok:0);let W=A>=200&&A<300;if(t.responseType==="json"&&typeof F=="string"){let ae=F;F=F.replace(HN,"");try{F=F!==""?JSON.parse(F):null}catch(H){F=ae,W&&(W=!1,F={error:H,text:F})}}W?(o.next(new Xc({body:F,headers:C,status:A,statusText:k,url:$||void 0})),o.complete()):o.error(new el({error:F,headers:C,status:A,statusText:k,url:$||void 0}))},p=C=>{let{url:A}=l(),k=new el({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(k)},m=!1,v=C=>{m||(o.next(l()),m=!0);let A={type:uo.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(A.total=C.total),t.responseType==="text"&&s.responseText&&(A.partialText=s.responseText),o.next(A)},S=C=>{let A={type:uo.UploadProgress,loaded:C.loaded};C.lengthComputable&&(A.total=C.total),o.next(A)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",v),a!==null&&s.upload&&s.upload.addEventListener("progress",S)),s.send(a),o.next({type:uo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",v),a!==null&&s.upload&&s.upload.removeEventListener("progress",S)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(ee(ao))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),_D=new Y(""),WN="XSRF-TOKEN",KN=new Y("",{providedIn:"root",factory:()=>WN}),QN="X-XSRF-TOKEN",YN=new Y("",{providedIn:"root",factory:()=>QN}),nl=class{},ZN=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(ee(It),ee(Gt),ee(KN))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function JN(n,e){let t=n.url.toLowerCase();if(!U(_D)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=U(nl).getToken(),i=U(YN);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ID=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ID||{});function XN(n,e){return{\u0275kind:n,\u0275providers:e}}function eP(...n){let e=[VN,yD,mD,{provide:Js,useExisting:mD},{provide:Jc,useExisting:yD},{provide:Mp,useValue:JN,multi:!0},{provide:_D,useValue:!0},{provide:nl,useClass:ZN}];for(let t of n)e.push(...t.\u0275providers);return tr(e)}var vD=new Y("");function tP(){return XN(ID.LegacyInterceptors,[{provide:vD,useFactory:zN},{provide:Mp,useExisting:vD,multi:!0}])}var R4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=to({type:n})}static{this.\u0275inj=eo({providers:[eP(tP())]})}}return n})();var Op=class extends Wc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kp=class n extends Op{static makeCurrent(){aD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=nP();return t==null?null:rP(t)}resetBaseElement(){ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qc(document.cookie,e)}},ea=null;function nP(){return ea=ea||document.querySelector("base"),ea?ea.getAttribute("href"):null}function rP(n){return new URL(n,document.baseURI).pathname}var iP=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Fp=new Y(""),CD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ee(Fp),ee(De))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),rl=class{constructor(e){this._doc=e}},Np="ng-app-id",bD=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yc(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Np}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Np),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Np,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ee(It),ee(np),ee(ip,8),ee(Gt))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),Pp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vp=/%COMP%/g,SD="%COMP%",oP=`_nghost-${SD}`,sP=`_ngcontent-${SD}`,aP=!0,uP=new Y("",{providedIn:"root",factory:()=>aP});function cP(n){return sP.replace(Vp,n)}function lP(n){return oP.replace(Vp,n)}function AD(n,e){return e.map(t=>t.replace(Vp,n))}var ED=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Yc(a),this.defaultRenderer=new ta(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===en.ShadowDom&&(r=je(G({},r),{encapsulation:en.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof il?i.applyToHost(t):i instanceof na&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case en.Emulated:o=new il(u,l,r,this.appId,h,s,a,p);break;case en.ShadowDom:return new Lp(u,l,t,r,s,a,this.nonce,p);default:o=new na(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ee(CD),ee(bD),ee(np),ee(uP),ee(It),ee(Gt),ee(De),ee(ip))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),ta=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Pp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Pp[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Pp[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Tn.DashCase|Tn.Important)?e.style.setProperty(t,r,i&Tn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Tn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=so().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function DD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Lp=class extends ta{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=AD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},na=class extends ta{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?AD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},il=class extends na{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=cP(l),this.hostAttr=lP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},dP=(()=>{class n extends rl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ee(It))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})(),TD=["alt","control","meta","shift"],hP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},pP=(()=>{class n extends rl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>so().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),TD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=hP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TD.forEach(s=>{if(s!==i){let a=fP[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ee(It))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac})}}return n})();function eq(n,e){return eD(G({rootComponent:n},gP(e)))}function gP(n){return{appProviders:[..._P,...n?.providers??[]],platformProviders:wP}}function mP(){kp.makeCurrent()}function yP(){return new Dn}function vP(){return sE(document),document}var wP=[{provide:Gt,useValue:dD},{provide:rp,useValue:mP,multi:!0},{provide:It,useFactory:vP,deps:[]}];var _P=[{provide:Mc,useValue:"root"},{provide:Dn,useFactory:yP,deps:[]},{provide:Fp,useClass:dP,multi:!0,deps:[It,De,Gt]},{provide:Fp,useClass:pP,multi:!0,deps:[It]},ED,bD,CD,{provide:js,useExisting:ED},{provide:ao,useClass:iP,deps:[]},[]];var xD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ee(It))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var re="primary",ya=Symbol("RouteTitle"),qp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function po(n){return new qp(n)}function EP(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function DP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!on(n[t],e[t]))return!1;return!0}function on(n,e){let t=n?zp(n):void 0,r=e?zp(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!kD(n[i],e[i]))return!1;return!0}function zp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function kD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function FD(n){return n.length>0?n[n.length-1]:null}function sr(n){return Sh(n)?n:Ws(n)?xe(Promise.resolve(n)):X(n)}var TP={exact:VD,subset:jD},LD={exact:CP,subset:bP,ignored:()=>!0};function RD(n,e,t){return TP[t.paths](n.root,e.root,t.matrixParams)&&LD[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function CP(n,e){return on(n,e)}function VD(n,e,t){if(!Jr(n.segments,e.segments)||!al(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!VD(n.children[r],e.children[r],t))return!1;return!0}function bP(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kD(n[t],e[t]))}function jD(n,e,t){return UD(n,e,e.segments,t)}function UD(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Jr(i,t)||e.hasChildren()||!al(i,t,r))}else if(n.segments.length===t.length){if(!Jr(n.segments,t)||!al(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!jD(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Jr(n.segments,i)||!al(n.segments,i,r)||!n.children[re]?!1:UD(n.children[re],e,o,r)}}function al(n,e,t){return e.every((r,i)=>LD[t](n[i].parameters,r.parameters))}var ir=class{constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=po(this.queryParams),this._queryParamMap}toString(){return xP.serialize(this)}},ve=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ul(this)}},Zr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=po(this.parameters),this._parameterMap}toString(){return $D(this)}};function SP(n,e){return Jr(n,e)&&n.every((t,r)=>on(t.parameters,e[r].parameters))}function Jr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function AP(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var mg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>new ll,providedIn:"root"})}}return n})(),ll=class{parse(e){let t=new Gp(e);return new ir(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ra(e.root,!0)}`,r=NP(e.queryParams),i=typeof e.fragment=="string"?`#${RP(e.fragment)}`:"";return`${t}${r}${i}`}},xP=new ll;function ul(n){return n.segments.map(e=>$D(e)).join("/")}function ra(n,e){if(!n.hasChildren())return ul(n);if(e){let t=n.children[re]?ra(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${ra(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=AP(n,(r,i)=>i===re?[ra(n.children[re],!1)]:[`${i}:${ra(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${ul(n)}/${t[0]}`:`${ul(n)}/(${t.join("//")})`}}function BD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ol(n){return BD(n).replace(/%3B/gi,";")}function RP(n){return encodeURI(n)}function Hp(n){return BD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cl(n){return decodeURIComponent(n)}function MD(n){return cl(n.replace(/\+/g,"%20"))}function $D(n){return`${Hp(n.path)}${MP(n.parameters)}`}function MP(n){return Object.entries(n).map(([e,t])=>`;${Hp(e)}=${Hp(t)}`).join("")}function NP(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ol(t)}=${ol(i)}`).join("&"):`${ol(t)}=${ol(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var PP=/^[^\/()?;#]+/;function jp(n){let e=n.match(PP);return e?e[0]:""}var OP=/^[^\/()?;=#]+/;function kP(n){let e=n.match(OP);return e?e[0]:""}var FP=/^[^=?&#]+/;function LP(n){let e=n.match(FP);return e?e[0]:""}var VP=/^[^&#]+/;function jP(n){let e=n.match(VP);return e?e[0]:""}var Gp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ve(e,t)),r}parseSegment(){let e=jp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Zr(cl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=kP(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=jp(this.remaining);i&&(r=i,this.capture(r))}e[cl(t)]=cl(r)}parseQueryParam(e){let t=LP(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=jP(this.remaining);s&&(r=s,this.capture(r))}let i=MD(t),o=MD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=jp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function qD(n){return n.segments.length>0?new ve([],{[re]:n}):n}function zD(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=zD(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ve(n.segments,e);return UP(t)}function UP(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ve(n.segments.concat(e.segments),e.children)}return n}function go(n){return n instanceof ir}function BP(n,e,t=null,r=null){let i=HD(n);return GD(i,e,t,r)}function HD(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=qD(r);return e??i}function GD(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Up(i,i,i,t,r);let o=$P(e);if(o.toRoot())return Up(i,i,new ve([],{}),t,r);let s=qP(o,i,n),a=s.processChildren?sa(s.segmentGroup,s.index,o.commands):KD(s.segmentGroup,s.index,o.commands);return Up(i,s.segmentGroup,a,t,r)}function dl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ca(n){return typeof n=="object"&&n!=null&&n.outlets}function Up(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=WD(n,e,t);let a=qD(zD(s));return new ir(a,o,i)}function WD(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=WD(o,e,t)}),new ve(n.segments,r)}var hl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&dl(r[0]))throw new K(4003,!1);let i=r.find(ca);if(i&&i!==FD(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $P(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new hl(t,e,r)}var ho=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function qP(n,e,t){if(n.isAbsolute)return new ho(e,!0,0);if(!t)return new ho(e,!1,NaN);if(t.parent===null)return new ho(t,!0,0);let r=dl(n.commands[0])?0:1,i=t.segments.length-1+r;return zP(t,i,n.numberOfDoubleDots)}function zP(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new ho(r,!1,i-o)}function HP(n){return ca(n[0])?n[0].outlets:{[re]:n}}function KD(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return sa(n,e,t);let r=GP(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ve(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ve(n.segments.slice(r.pathIndex),n.children),sa(o,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?Wp(n,e,t):r.match?sa(n,0,i):Wp(n,e,t)}function sa(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=HP(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=sa(n.children[re],e,t);return new ve(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=KD(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(n.segments,i)}}function GP(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ca(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!PD(u,l,s))return o;r+=2}else{if(!PD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Wp(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ca(o)){let u=WP(o.outlets);return new ve(r,u)}if(i===0&&dl(t[0])){let u=n.segments[e];r.push(new Zr(u.path,ND(t[0]))),i++;continue}let s=ca(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&dl(a)?(r.push(new Zr(s,ND(a))),i+=2):(r.push(new Zr(s,{})),i++)}return new ve(r,{})}function WP(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Wp(new ve([],{}),0,r))}),e}function ND(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function PD(n,e,t){return n==t.path&&on(e,t.parameters)}var aa="imperative",Xe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Xe||{}),Ot=class{constructor(e,t){this.id=e,this.url=t}},la=class extends Ot{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Xe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xr=class extends Ot{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(bt||{}),Kp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Kp||{}),or=class extends Ot{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ei=class extends Ot{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Xe.NavigationSkipped}},da=class extends Ot{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fl=class extends Ot{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qp=class extends Ot{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yp=class extends Ot{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zp=class extends Ot{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jp=class extends Ot{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xp=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},eg=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},tg=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ng=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rg=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ig=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ha=class{},fa=class{constructor(e){this.url=e}};var og=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new wl,this.attachRef=null}},wl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new og,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=sg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=sg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ag(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ag(e,this._root).map(t=>t.value)}};function sg(n,e){if(n===e.value)return e;for(let t of e.children){let r=sg(n,t);if(r)return r}return null}function ag(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ag(n,t);if(r.length)return r.unshift(e),r}return[]}var Ct=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function lo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gl=class extends pl{constructor(e,t){super(e),this.snapshot=t,vg(this,e)}toString(){return this.snapshot.toString()}};function QD(n){let e=KP(n),t=new Je([new Zr("",{})]),r=new Je({}),i=new Je({}),o=new Je({}),s=new Je(""),a=new mo(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new gl(new Ct(a,[]),e)}function KP(n){let e={},t={},r={},i="",o=new pa([],e,r,i,t,re,n,null,{});return new ml("",new Ct(o,[]))}var mo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(se(l=>l[ya]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>po(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>po(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:G(G({},e.params),n.params),data:G(G({},e.data),n.data),resolve:G(G(G(G({},n.data),e.data),i?.data),n._resolvedData)}:r={params:G({},n.params),data:G({},n.data),resolve:G(G({},n.data),n._resolvedData??{})},i&&ZD(i)&&(r.resolve[ya]=i.title),r}var pa=class{get title(){return this.data?.[ya]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=po(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ml=class extends pl{constructor(e,t){super(t),this.url=e,vg(this,t)}toString(){return YD(this._root)}};function vg(n,e){e.value._routerState=n,e.children.forEach(t=>vg(n,t))}function YD(n){let e=n.children.length>0?` { ${n.children.map(YD).join(", ")} } `:"";return`${n.value}${e}`}function Bp(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,on(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),on(e.params,t.params)||n.paramsSubject.next(t.params),DP(e.url,t.url)||n.urlSubject.next(t.url),on(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ug(n,e){let t=on(n.params,e.params)&&SP(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ug(n.parent,e.parent))}function ZD(n){return typeof n.title=="string"||n.title===null}var QP=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new Ut,this.deactivateEvents=new Ut,this.attachEvents=new Ut,this.detachEvents=new Ut,this.parentContexts=U(wl),this.location=U(io),this.changeDetector=U(Ks),this.environmentInjector=U(_t),this.inputBinder=U(wg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new cg(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=no({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kc]})}}return n})(),cg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===mo?this.route:e===wl?this.childContexts:this.parent.get(e,t)}},wg=new Y("");function YP(n,e,t){let r=ga(n,e._root,t?t._root:void 0);return new gl(r,e)}function ga(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ZP(n,e,t);return new Ct(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ga(n,a)),s}}let r=JP(e.value),i=e.children.map(o=>ga(n,o));return new Ct(r,i)}}function ZP(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ga(n,r,i);return ga(n,r)})}function JP(n){return new mo(new Je(n.url),new Je(n.params),new Je(n.queryParams),new Je(n.fragment),new Je(n.data),n.outlet,n.component,n)}var JD="ngNavigationCancelingError";function XD(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=go(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eT(!1,bt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function eT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[JD]=!0,t.cancellationCode=e,t}function XP(n){return tT(n)&&go(n.url)}function tT(n){return!!n&&n[JD]}var eO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=uI({type:n,selectors:[["ng-component"]],standalone:!0,features:[KE],decls:1,vars:0,template:function(r,i){r&1&&vp(0,"router-outlet")},dependencies:[QP],encapsulation:2})}}return n})();function tO(n,e){return n.providers&&!n._injector&&(n._injector=yp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _g(n){let e=n.children&&n.children.map(_g),t=e?je(G({},n),{children:e}):G({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=eO),t}function sn(n){return n.outlet||re}function nO(n,e){let t=n.filter(r=>sn(r)===e);return t.push(...n.filter(r=>sn(r)!==e)),t}function va(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var rO=(n,e,t,r)=>se(i=>(new lg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),lg=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=lo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=lo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ig(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ng(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Bp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Bp(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=va(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},yl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fo=class{constructor(e,t){this.component=e,this.route=t}};function iO(n,e,t){let r=n._root,i=e?e._root:null;return ia(r,i,t,[r.value])}function oO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function vo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Q_(n)?n:e.get(n):r}function ia(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=lo(e);return n.children.forEach(s=>{sO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ua(a,t.getContext(s),i)),i}function sO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=aO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ia(n,e,a?a.children:null,r,i):ia(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fo(a.outlet.component,s))}else s&&ua(e,a,i),i.canActivateChecks.push(new yl(r)),o.component?ia(n,null,a?a.children:null,r,i):ia(n,null,t,r,i);return i}function aO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Jr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Jr(n.url,e.url)||!on(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ug(n,e)||!on(n.queryParams,e.queryParams);case"paramsChange":default:return!ug(n,e)}}function ua(n,e,t){let r=lo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ua(s,e.children.getContext(o),t):ua(s,null,t):ua(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new fo(e.outlet.component,i)):t.canDeactivateChecks.push(new fo(null,i)):t.canDeactivateChecks.push(new fo(null,i))}function wa(n){return typeof n=="function"}function uO(n){return typeof n=="boolean"}function cO(n){return n&&wa(n.canLoad)}function lO(n){return n&&wa(n.canActivate)}function dO(n){return n&&wa(n.canActivateChild)}function hO(n){return n&&wa(n.canDeactivate)}function fO(n){return n&&wa(n.canMatch)}function nT(n){return n instanceof _n||n?.name==="EmptyError"}var sl=Symbol("INITIAL_VALUE");function yo(){return ot(n=>Yu(n.map(e=>e.pipe(In(1),Nh(sl)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===sl)return sl;if(t===!1||t instanceof ir)return t}return!0}),Tt(e=>e!==sl),In(1)))}function pO(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(je(G({},t),{guardsResult:!0})):gO(s,r,i,n).pipe(We(a=>a&&uO(a)?mO(r,o,n,e):X(a)),se(a=>je(G({},t),{guardsResult:a})))})}function gO(n,e,t,r){return xe(n).pipe(We(i=>IO(i.component,i.route,t,e,r)),Zt(i=>i!==!0,!0))}function mO(n,e,t,r){return xe(e).pipe(Gn(i=>Vi(vO(i.route.parent,r),yO(i.route,r),_O(n,i.path,t),wO(n,i.route,t))),Zt(i=>i!==!0,!0))}function yO(n,e){return n!==null&&e&&e(new rg(n)),X(!0)}function vO(n,e){return n!==null&&e&&e(new tg(n)),X(!0)}function wO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>Zu(()=>{let s=va(e)??t,a=vo(o,s),u=lO(a)?a.canActivate(e,n):Cn(s,()=>a(e,n));return sr(u).pipe(Zt())}));return X(i).pipe(yo())}function _O(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>oO(s)).filter(s=>s!==null).map(s=>Zu(()=>{let a=s.guards.map(u=>{let l=va(s.node)??t,h=vo(u,l),p=dO(h)?h.canActivateChild(r,n):Cn(l,()=>h(r,n));return sr(p).pipe(Zt())});return X(a).pipe(yo())}));return X(o).pipe(yo())}function IO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let u=va(e)??i,l=vo(a,u),h=hO(l)?l.canDeactivate(n,e,t,r):Cn(u,()=>l(n,e,t,r));return sr(h).pipe(Zt())});return X(s).pipe(yo())}function EO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=vo(s,n),u=cO(a)?a.canLoad(e,t):Cn(n,()=>a(e,t));return sr(u)});return X(o).pipe(yo(),rT(r))}function rT(n){return _h(Ue(e=>{if(go(e))throw XD(n,e)}),se(e=>e===!0))}function DO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=vo(s,n),u=fO(a)?a.canMatch(e,t):Cn(n,()=>a(e,t));return sr(u)});return X(o).pipe(yo(),rT(r))}var ma=class{constructor(e){this.segmentGroup=e||null}},vl=class extends Error{constructor(e){super(),this.urlTree=e}};function co(n){return Li(new ma(n))}function TO(n){return Li(new K(4e3,!1))}function CO(n){return Li(eT(!1,bt.GuardRejected))}var dg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[re])return TO(e.redirectTo);i=i.children[re]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new vl(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ir(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},hg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bO(n,e,t,r,i){let o=Ig(n,e,t);return o.matched?(r=tO(e,r),DO(r,e,t,i).pipe(se(s=>s===!0?o:G({},hg)))):X(o)}function Ig(n,e,t){if(e.path==="**")return SO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?G({},hg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EP)(t,n,e);if(!i)return G({},hg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?G(G({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function SO(n){return{matched:!0,parameters:n.length>0?FD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function OD(n,e,t,r){return t.length>0&&RO(n,t,r)?{segmentGroup:new ve(e,xO(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&MO(n,t,r)?{segmentGroup:new ve(n.segments,AO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function AO(n,e,t,r){let i={};for(let o of t)if(_l(n,e,o)&&!r[sn(o)]){let s=new ve([],{});i[sn(o)]=s}return G(G({},r),i)}function xO(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&sn(r)!==re){let i=new ve([],{});t[sn(r)]=i}return t}function RO(n,e,t){return t.some(r=>_l(n,e,r)&&sn(r)!==re)}function MO(n,e,t){return t.some(r=>_l(n,e,r))}function _l(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function NO(n,e,t,r){return sn(n)!==r&&(r===re||!_l(e,t,n))?!1:Ig(e,n,t).matched}function PO(n,e,t){return e.length===0&&!n.children[t]}var fg=class{};function OO(n,e,t,r,i,o,s="emptyOnly"){return new pg(n,e,t,r,i,s,o).recognize()}var kO=31,pg=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new dg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=OD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(t=>{let r=new pa([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),i=new Ct(r,t),o=new ml("",i),s=BP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(Hn(r=>{if(r instanceof vl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ma?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=yg(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(se(o=>o instanceof Ct?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return xe(i).pipe(Gn(o=>{let s=r.children[o],a=nO(t,o);return this.processSegmentGroup(e,a,s,o)}),Rh((o,s)=>(o.push(...s),o)),Wn(null),xh(),We(o=>{if(o===null)return co(r);let s=iT(o);return FO(s),X(s)}))}processSegment(e,t,r,i,o,s){return xe(t).pipe(Gn(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(Hn(u=>{if(u instanceof ma)return X(null);throw u}))),Zt(a=>!!a),Hn(a=>{if(nT(a))return PO(r,i,o)?X(new fg):co(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return NO(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):co(i):co(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Ig(t,i,o);if(!a)return co(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kO&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(We(m=>this.processSegment(e,r,t,m.concat(h),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=bO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(ot(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ot(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,v=new pa(h,m,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,VO(r),sn(r),r.component??r._loadedComponent??null,r,jO(r)),{segmentGroup:S,slicedSegments:C}=OD(t,h,p,u);if(C.length===0&&S.hasChildren())return this.processChildren(l,u,S).pipe(se(k=>k===null?null:new Ct(v,k)));if(u.length===0&&C.length===0)return X(new Ct(v,[]));let A=sn(r)===o;return this.processSegment(l,u,S,C,A?re:o,!0).pipe(se(k=>new Ct(v,k instanceof Ct?[k]:[])))}))):co(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):EO(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(Ue(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):CO(t))):X({routes:[],injector:e})}};function FO(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function LO(n){let e=n.value.routeConfig;return e&&e.path===""}function iT(n){let e=[],t=new Set;for(let r of n){if(!LO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=iT(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!t.has(r))}function VO(n){return n.data||{}}function jO(n){return n.resolve||{}}function UO(n,e,t,r,i,o){return We(s=>OO(n,e,t,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:u})=>je(G({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function BO(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of oT(u))s.add(l);let a=0;return xe(s).pipe(Gn(u=>o.has(u)?$O(u,r,n,e):(u.data=yg(u,u.parent,n).resolve,X(void 0))),Ue(()=>a++),ji(1),We(u=>a===s.size?X(t):ft))})}function oT(n){let e=n.children.map(t=>oT(t)).flat();return[n,...e]}function $O(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ZD(i)&&(o[ya]=i.title),qO(o,n,e,r).pipe(se(s=>(n._resolvedData=s,n.data=yg(n,n.parent,t).resolve,null)))}function qO(n,e,t,r){let i=zp(n);if(i.length===0)return X({});let o={};return xe(i).pipe(We(s=>zO(n[s],e,t,r).pipe(Zt(),Ue(a=>{o[s]=a}))),ji(1),Ah(o),Hn(s=>nT(s)?ft:Li(s)))}function zO(n,e,t,r){let i=va(e)??r,o=vo(n,i),s=o.resolve?o.resolve(e,t):Cn(i,()=>o(e,t));return sr(s)}function $p(n){return ot(e=>{let t=n(e);return t?xe(t).pipe(se(()=>e)):X(e)})}var sT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[ya]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(HO),providedIn:"root"})}}return n})(),HO=(()=>{class n extends sT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ee(xD))}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eg=new Y("",{providedIn:"root",factory:()=>({})}),Dg=new Y(""),GO=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(_p)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=sr(t.loadComponent()).pipe(se(aT),Ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Kn(()=>{this.componentLoaders.delete(t)})),i=new Pi(r,()=>new Ge).pipe(Ni());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=WO(r,this.compiler,t,this.onLoadEndListener).pipe(Kn(()=>{this.childrenLoaders.delete(r)})),s=new Pi(o,()=>new Ge).pipe(Ni());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function WO(n,e,t,r){return sr(n.loadChildren()).pipe(se(aT),We(i=>i instanceof Bs||Array.isArray(i)?X(i):xe(e.compileModuleAsync(i))),se(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Dg,[],{optional:!0,self:!0}).flat()),{routes:s.map(_g),injector:o}}))}function KO(n){return n&&typeof n=="object"&&"default"in n}function aT(n){return KO(n)?n.default:n}var Tg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(QO),providedIn:"root"})}}return n})(),QO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YO=new Y("");var ZO=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ge,this.transitionAbortSubject=new Ge,this.configLoader=U(GO),this.environmentInjector=U(_t),this.urlSerializer=U(mg),this.rootContexts=U(wl),this.location=U(Ys),this.inputBindingEnabled=U(wg,{optional:!0})!==null,this.titleStrategy=U(sT),this.options=U(Eg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Tg),this.createViewTransition=U(YO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Xp(i)),r=i=>this.events.next(new eg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(je(G(G({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:aa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(o=>o.id!==0),se(o=>je(G({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ot(o=>{let s=!1,a=!1;return X(o).pipe(ot(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",bt.SupersededByNewNavigation),ft;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?je(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ei(u.id,this.urlSerializer.serialize(u.rawUrl),p,Kp.IgnoredSameUrlNavigation)),u.resolve(null),ft}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(ot(p=>{let m=this.transitions?.getValue();return this.events.next(new la(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?ft:Promise.resolve(p)}),UO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=je(G({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new fl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:S,extras:C}=u,A=new la(p,this.urlSerializer.serialize(m),v,S);this.events.next(A);let k=QD(this.rootComponentType).snapshot;return this.currentTransition=o=je(G({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:je(G({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,X(o)}else{let p="";return this.events.next(new ei(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Kp.IgnoredByUrlHandlingStrategy)),u.resolve(null),ft}}),Ue(u=>{let l=new Qp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),se(u=>(this.currentTransition=o=je(G({},u),{guards:iO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),pO(this.environmentInjector,u=>this.events.next(u)),Ue(u=>{if(o.guardsResult=u.guardsResult,go(u.guardsResult))throw XD(this.urlSerializer,u.guardsResult);let l=new Yp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Tt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",bt.GuardRejected),!1)),$p(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(Ue(l=>{let h=new Zp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ot(l=>{let h=!1;return X(l).pipe(BO(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",bt.NoDataFromResolver)}}))}),Ue(l=>{let h=new Jp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),$p(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ue(m=>{h.component=m}),se(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Yu(l(u.targetSnapshot.root)).pipe(Wn(null),In(1))}),$p(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?xe(h).pipe(se(()=>o)):X(o)}),se(u=>{let l=YP(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=je(G({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ue(()=>{this.events.next(new ha)}),rO(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),In(1),Ue({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Ph(this.transitionAbortSubject.pipe(Ue(u=>{throw u}))),Kn(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",bt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hn(u=>{if(a=!0,tT(u))this.events.next(new or(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),XP(u)?this.events.next(new fa(u.url)):o.resolve(!1);else{this.events.next(new da(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return ft}))}))}cancelNavigationTransition(t,r,i){let o=new or(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JO(n){return n!==aa}var XO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(e1),providedIn:"root"})}}return n})(),gg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},e1=(()=>{class n extends gg{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=tp(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:()=>U(t1),providedIn:"root"})}}return n})(),t1=(()=>{class n extends uT{constructor(){super(...arguments),this.location=U(Ys),this.urlSerializer=U(mg),this.options=U(Eg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Tg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof la)this.stateMemento=this.createStateMemento();else if(t instanceof ei)this.rawUrlTree=r.initialUrl;else if(t instanceof fl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof ha?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof or&&(t.code===bt.GuardRejected||t.code===bt.NoDataFromResolver)?this.restoreHistory(r):t instanceof da?this.restoreHistory(r,!0):t instanceof Xr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=G(G({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=G(G({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=tp(n)))(i||n)}})()}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(oa||{});function n1(n,e){n.events.pipe(Tt(t=>t instanceof Xr||t instanceof or||t instanceof da||t instanceof ei),se(t=>t instanceof Xr||t instanceof ei?oa.COMPLETE:(t instanceof or?t.code===bt.Redirect||t.code===bt.SupersededByNewNavigation:!1)?oa.REDIRECTING:oa.FAILED),Tt(t=>t!==oa.REDIRECTING),In(1)).subscribe(()=>{e()})}function r1(n){throw n}var i1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},cT=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(Hc),this.stateManager=U(uT),this.options=U(Eg,{optional:!0})||{},this.pendingTasks=U(Kr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(ZO),this.urlSerializer=U(mg),this.location=U(Ys),this.urlHandlingStrategy=U(Tg),this._events=new Ge,this.errorHandler=this.options.errorHandler||r1,this.navigated=!1,this.routeReuseStrategy=U(XO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Dg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(wg,{optional:!0}),this.eventsSubscription=new Pe,this.isNgZoneEnabled=U(De)instanceof De&&De.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof or&&r.code!==bt.Redirect&&r.code!==bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xr)this.navigated=!0;else if(r instanceof fa){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||JO(i.source)};this.scheduleNavigation(s,aa,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}a1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),aa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=G({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_g),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a){case"merge":h=G(G({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=HD(m)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return GD(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=go(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,aa,null,r)}navigate(t,r={skipLocationChange:!1}){return s1(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=G({},i1):r===!1?i=G({},o1):i=r,go(t))return RD(this.currentUrlTree,t,i);let o=this.parseUrl(t);return RD(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return n1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s1(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new K(4008,!1)}function a1(n){return!(n instanceof ha)&&!(n instanceof fa)}var u1=new Y("");function xq(n,...e){return tr([{provide:Dg,multi:!0,useValue:n},[],{provide:mo,useFactory:c1,deps:[cT]},{provide:Gc,multi:!0,useFactory:l1},e.map(t=>t.\u0275providers)])}function c1(n){return n.routerState.root}function l1(){let n=U(Wr);return e=>{let t=n.get(oo);if(e!==t.components[0])return;let r=n.get(cT),i=n.get(d1);n.get(h1)===1&&r.initialNavigation(),n.get(f1,null,ue.Optional)?.setUpPreloading(),n.get(u1,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var d1=new Y("",{factory:()=>new Ge}),h1=new Y("",{providedIn:"root",factory:()=>1});var f1=new Y("");var p1="firebase",g1="10.14.1";vn(p1,g1,"app");var bg=new er("ANGULARFIRE2_VERSION");function Uq(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var m1=(n,e)=>{let t=e?[e]:bu(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},lT=class{constructor(){return m1(y1)}},y1="app-check";function wo(){}var Il=class{zone;delegate;constructor(e,t=Ch){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Cg=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wo,{},wo,wo)),t.pipe(Ue({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},dT=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Il(Zone.current)),this.insideAngular=t.run(()=>new Il(Zone.current,Th)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ee(De))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function El(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function v1(n){return El().ngZone.runOutsideAngular(()=>n())}function ti(n){return El().ngZone.run(()=>n())}function w1(n){return _1(El())(n)}function _1(n){return function(t){return t=t.lift(new Cg(n.ngZone)),t.pipe(zn(n.outsideAngular),qn(n.insideAngular))}}var I1=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ti(()=>n.apply(void 0,r))},hT=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=ti(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wo,{},wo,wo))),r[o]=I1(r[o],t));let i=v1(()=>n.apply(this,r));if(!e)if(i instanceof le){let o=El();return i.pipe(zn(o.outsideAngular),qn(o.insideAngular))}else return ti(()=>i);return i instanceof le?i.pipe(w1):i instanceof Promise?ti(()=>new Promise((o,s)=>i.then(a=>ti(()=>o(a)),a=>ti(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:ti(()=>i)};var _a=class{constructor(e){return e}},Sg=class{constructor(){return bu()}};function E1(n){return n&&n.length===1?n[0]:new _a(Cu())}var Ag=new Y("angularfire2._apps"),D1={provide:_a,useFactory:E1,deps:[[new Hr,Ag]]},T1={provide:Sg,deps:[[new Hr,Ag]]};function C1(n){return(e,t)=>{let r=t.get(Gt);vn("angularfire",bg.full,"core"),vn("angularfire",bg.full,"app"),vn("angular",wp.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new _a(i)}}function Zq(n,...e){return tr([D1,T1,{provide:Ag,useFactory:C1(n),multi:!0,deps:[De,Wr,dT,...e]}])}var Jq=hT(Pw,!0);var b1="firebase",S1="10.14.1";Si.registerVersion(b1,S1,"app-compat");var A1=["ngOnDestroy"],uz=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(A1.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var xg=class{constructor(e){return e}},cz=new Y("angularfire2.app.options"),lz=new Y("angularfire2.app.name");function dz(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Si.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Si.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;x1("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new xg(s)}var x1=(n,...e)=>{Ep()&&typeof console<"u"&&console[n](...e)};function hz(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return R1(i,s)||(fT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${M1?" You may need to reload as Firebase is not HMR aware.":""}`),fT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function R1(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var M1=typeof module<"u"&&!!module.hot,fT=(n,...e)=>{Ep()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var pT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gT={};var ar,Rg;(function(){var n;function e(I,y){function _(){}_.prototype=y.prototype,I.D=y.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,b){for(var w=Array(arguments.length-2),gn=2;gn<arguments.length;gn++)w[gn-2]=arguments[gn];return y.prototype[D].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=I.g[0],_=I.g[1],D=I.g[2];var b=I.g[3],w=y+(b^_&(D^b))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[1]+3905402710&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[2]+606105819&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[5]+1200080426&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[6]+2821735955&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[9]+2336552879&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[10]+4294925233&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(b^_&(D^b))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=b+(D^y&(_^D))+E[13]+4254626195&4294967295,b=y+(w<<12&4294967295|w>>>20),w=D+(_^b&(y^_))+E[14]+2792965006&4294967295,D=b+(w<<17&4294967295|w>>>15),w=_+(y^D&(b^y))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=y+(D^b&(_^D))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[6]+3225465664&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[11]+643717713&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[10]+38016083&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[15]+3634488961&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[14]+3275163606&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[3]+4107603335&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(D^b&(_^D))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=b+(_^D&(y^_))+E[2]+4243563512&4294967295,b=y+(w<<9&4294967295|w>>>23),w=D+(y^_&(b^y))+E[7]+1735328473&4294967295,D=b+(w<<14&4294967295|w>>>18),w=_+(b^y&(D^b))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=y+(_^D^b)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[8]+2272392833&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[11]+1839030562&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[4]+1272893353&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[7]+4139469664&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[0]+3936430074&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[3]+3572445317&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(_^D^b)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=b+(y^_^D)+E[12]+3873151461&4294967295,b=y+(w<<11&4294967295|w>>>21),w=D+(b^y^_)+E[15]+530742520&4294967295,D=b+(w<<16&4294967295|w>>>16),w=_+(D^b^y)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=y+(D^(_|~b))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[7]+1126891415&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[14]+2878612391&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[3]+2399980690&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[10]+4293915773&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[15]+4264355552&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[6]+2734768916&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=y+(D^(_|~b))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=b+(_^(y|~D))+E[11]+3174756917&4294967295,b=y+(w<<10&4294967295|w>>>22),w=D+(y^(b|~_))+E[2]+718787259&4294967295,D=b+(w<<15&4294967295|w>>>17),w=_+(b^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var _=y-this.blockSize,E=this.B,D=this.h,b=0;b<y;){if(D==0)for(;b<=_;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<y;)if(E[D++]=I.charCodeAt(b++),D==this.blockSize){i(this,E),D=0;break}}else for(;b<y;)if(E[D++]=I[b++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var _=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=_&255,_/=256;for(this.u(I),I=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)I[_++]=this.g[y]>>>E&255;return I};function o(I,y){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=y(I)}function s(I,y){this.h=y;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var b=I[D]|0;E&&b==y||(_[D]=b,E=!1)}this.g=_}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return A(l(-I));for(var y=[],_=1,E=0;I>=_;E++)y[E]=I/_|0,_*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return A(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var b=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+b),y);8>b?(b=l(Math.pow(y,b)),E=E.j(b).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(C(this))return-A(this).m();for(var I=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(C(this))return"-"+A(this).toString(I);for(var y=l(Math.pow(I,6)),_=this,E="";;){var D=W(_,y).g;_=k(_,D.j(y));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,S(_))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=k(this,I),C(I)?-1:S(I)?0:1};function A(I){for(var y=I.g.length,_=[],E=0;E<y;E++)_[E]=~I.g[E];return new s(_,~I.h).add(m)}n.abs=function(){return C(this)?A(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=y;D++){var b=E+(this.i(D)&65535)+(I.i(D)&65535),w=(b>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,b&=65535,w&=65535,_[D]=w<<16|b}return new s(_,_[_.length-1]&-2147483648?-1:0)};function k(I,y){return I.add(A(y))}n.j=function(I){if(S(this)||S(I))return p;if(C(this))return C(I)?A(this).j(A(I)):A(A(this).j(I));if(C(I))return A(this.j(A(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var b=this.i(E)>>>16,w=this.i(E)&65535,gn=I.i(D)>>>16,os=I.i(D)&65535;_[2*E+2*D]+=w*os,$(_,2*E+2*D),_[2*E+2*D+1]+=b*os,$(_,2*E+2*D+1),_[2*E+2*D+1]+=w*gn,$(_,2*E+2*D+1),_[2*E+2*D+2]+=b*gn,$(_,2*E+2*D+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new s(_,0)};function $(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function W(I,y){if(S(y))throw Error("division by zero");if(S(I))return new F(p,p);if(C(I))return y=W(A(I),y),new F(A(y.g),A(y.h));if(C(y))return y=W(I,A(y)),new F(A(y.g),y.h);if(30<I.g.length){if(C(I)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(I);)_=ae(_),E=ae(E);var D=H(_,1),b=H(E,1);for(E=H(E,2),_=H(_,2);!S(E);){var w=b.add(E);0>=w.l(I)&&(D=D.add(_),b=w),E=H(E,1),_=H(_,1)}return y=k(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(_=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=l(_),w=b.j(y);C(w)||0<w.l(I);)_-=E,b=l(_),w=b.j(y);S(b)&&(b=m),D=D.add(b),I=k(I,w)}return new F(D,I)}n.A=function(I){return W(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function ae(I){for(var y=I.g.length+1,_=[],E=0;E<y;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function H(I,y){var _=y>>5;y%=32;for(var E=I.g.length-_,D=[],b=0;b<E;b++)D[b]=0<y?I.i(b+_)>>>y|I.i(b+_+1)<<32-y:I.i(b+_);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Rg=gT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ar=gT.Integer=s}).apply(typeof pT<"u"?pT:typeof self<"u"?self:typeof window<"u"?window:{});var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn={};var Mg,N1,_o,Ng,Ia,Tl,Pg,Og,kg;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,R){for(var L=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)L[_e-2]=arguments[_e];return d.prototype[T].apply(g,L)}}function C(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function A(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,R=g.length||0;c.length=T+R;for(let L=0;L<R;L++)c[T+L]=g[L]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var ae=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function H(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let R=0;R<_.length;R++)f=_[R],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function b(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Bd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class gn{constructor(){this.h=this.g=null}add(d,f){let g=os.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var os=new k(()=>new rb,c=>c.reset());class rb{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ss,as=!1,Bd=new gn,_v=()=>{let c=a.Promise.resolve(void 0);ss=()=>{c.then(ib)}};var ib=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){b(f)}var d=os;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}as=!1};function jn(){this.s=this.s,this.C=this.C}jn.prototype.s=!1,jn.prototype.ma=function(){this.s||(this.s=!0,this.N())},jn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var ob=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function us(c,d){if(tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ae){e:{try{W(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:sb[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&us.aa.h.call(this)}}S(us,tt);var sb={2:"touch",3:"pen",4:"mouse"};us.prototype.h=function(){us.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var cs="closure_listenable_"+(1e6*Math.random()|0),ab=0;function ub(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++ab,this.da=this.fa=!1}function au(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function uu(c){this.src=c,this.g={},this.h=0}uu.prototype.add=function(c,d,f,g,T){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var L=qd(c,d,g,T);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new ub(d,this.src,R,!!g,T),d.fa=f,c.push(d)),d};function $d(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),R;(R=0<=T)&&Array.prototype.splice.call(g,T,1),R&&(au(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function qd(c,d,f,g){for(var T=0;T<c.length;++T){var R=c[T];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==g)return T}return-1}var zd="closure_lm_"+(1e6*Math.random()|0),Hd={};function Iv(c,d,f,g,T){if(g&&g.once)return Dv(c,d,f,g,T);if(Array.isArray(d)){for(var R=0;R<d.length;R++)Iv(c,d[R],f,g,T);return null}return f=Qd(f),c&&c[cs]?c.K(d,f,l(g)?!!g.capture:!!g,T):Ev(c,d,f,!1,g,T)}function Ev(c,d,f,g,T,R){if(!d)throw Error("Invalid event type");var L=l(T)?!!T.capture:!!T,_e=Wd(c);if(_e||(c[zd]=_e=new uu(c)),f=_e.add(d,f,g,L,R),f.proxy)return f;if(g=cb(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)ob||(T=L),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(Cv(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function cb(){function c(f){return d.call(c.src,c.listener,f)}let d=lb;return c}function Dv(c,d,f,g,T){if(Array.isArray(d)){for(var R=0;R<d.length;R++)Dv(c,d[R],f,g,T);return null}return f=Qd(f),c&&c[cs]?c.L(d,f,l(g)?!!g.capture:!!g,T):Ev(c,d,f,!0,g,T)}function Tv(c,d,f,g,T){if(Array.isArray(d))for(var R=0;R<d.length;R++)Tv(c,d[R],f,g,T);else g=l(g)?!!g.capture:!!g,f=Qd(f),c&&c[cs]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=qd(R,f,g,T),-1<f&&(au(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=Wd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=qd(d,f,g,T)),(f=-1<c?d[c]:null)&&Gd(f))}function Gd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[cs])$d(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Cv(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Wd(d))?($d(f,c),f.h==0&&(f.src=null,d[zd]=null)):au(c)}}}function Cv(c){return c in Hd?Hd[c]:Hd[c]="on"+c}function lb(c,d){if(c.da)c=!0;else{d=new us(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Gd(c),c=f.call(g,d)}return c}function Wd(c){return c=c[zd],c instanceof uu?c:null}var Kd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qd(c){return typeof c=="function"?c:(c[Kd]||(c[Kd]=function(d){return c.handleEvent(d)}),c[Kd])}function nt(){jn.call(this),this.i=new uu(this),this.M=this,this.F=null}S(nt,jn),nt.prototype[cs]=!0,nt.prototype.removeEventListener=function(c,d,f,g){Tv(this,c,d,f,g)};function lt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new tt(d,c);else if(d instanceof tt)d.target=d.target||c;else{var T=d;d=new tt(g,c),E(d,T)}if(T=!0,f)for(var R=f.length-1;0<=R;R--){var L=d.g=f[R];T=cu(L,g,!0,d)&&T}if(L=d.g=c,T=cu(L,g,!0,d)&&T,T=cu(L,g,!1,d)&&T,f)for(R=0;R<f.length;R++)L=d.g=f[R],T=cu(L,g,!1,d)&&T}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)au(f[g]);delete c.g[d],c.h--}}this.F=null},nt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},nt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function cu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,R=0;R<d.length;++R){var L=d[R];if(L&&!L.da&&L.capture==f){var _e=L.listener,Ze=L.ha||L.src;L.fa&&$d(c.i,L),T=_e.call(Ze,g)!==!1&&T}}return T&&!g.defaultPrevented}function bv(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Sv(c){c.g=bv(()=>{c.g=null,c.i&&(c.i=!1,Sv(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class db extends jn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(c){jn.call(this),this.h=c,this.g={}}S(ls,jn);var Av=[];function xv(c){H(c.g,function(d,f){this.g.hasOwnProperty(f)&&Gd(d)},c),c.g={}}ls.prototype.N=function(){ls.aa.N.call(this),xv(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yd=a.JSON.stringify,hb=a.JSON.parse,fb=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Zd(){}Zd.prototype.h=null;function Rv(c){return c.h||(c.h=c.i())}function Mv(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jd(){tt.call(this,"d")}S(Jd,tt);function Xd(){tt.call(this,"c")}S(Xd,tt);var Ar={},Nv=null;function lu(){return Nv=Nv||new nt}Ar.La="serverreachability";function Pv(c){tt.call(this,Ar.La,c)}S(Pv,tt);function hs(c){let d=lu();lt(d,new Pv(d))}Ar.STAT_EVENT="statevent";function Ov(c,d){tt.call(this,Ar.STAT_EVENT,c),this.stat=d}S(Ov,tt);function dt(c){let d=lu();lt(d,new Ov(d,c))}Ar.Ma="timingevent";function kv(c,d){tt.call(this,Ar.Ma,c),this.size=d}S(kv,tt);function fs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function pb(c,d,f,g,T,R){c.info(function(){if(c.g)if(R)for(var L="",_e=R.split("&"),Ze=0;Ze<_e.length;Ze++){var ge=_e[Ze].split("=");if(1<ge.length){var rt=ge[0];ge=ge[1];var it=rt.split("_");L=2<=it.length&&it[1]=="type"?L+(rt+"="+ge+"&"):L+(rt+"=redacted&")}}else L=null;else L=R;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+L})}function gb(c,d,f,g,T,R,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+R+" "+L})}function Di(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+yb(c,f)+(g?" "+g:"")})}function mb(c,d){c.info(function(){return"TIMEOUT: "+d})}ps.prototype.info=function(){};function yb(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var R=T[0];if(R!="noop"&&R!="stop"&&R!="close")for(var L=1;L<T.length;L++)T[L]=""}}}}return Yd(f)}catch{return d}}var du={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eh;function hu(){}S(hu,Zd),hu.prototype.g=function(){return new XMLHttpRequest},hu.prototype.i=function(){return{}},eh=new hu;function Un(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lv}function Lv(){this.i=null,this.g="",this.h=!1}var Vv={},th={};function nh(c,d,f){c.L=1,c.v=mu(mn(d)),c.m=f,c.P=!0,jv(c,null)}function jv(c,d){c.F=Date.now(),fu(c),c.A=mn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Xv(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Lv,c.g=yw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new db(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(Av[0]=T.toString()),T=Av);for(var R=0;R<T.length;R++){var L=Iv(f,T[R],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),hs(),pb(c.i,c.u,c.A,c.l,c.R,c.m)}Un.prototype.ca=function(c){c=c.target;let d=this.M;d&&yn(c)==3?d.j():this.Y(c)},Un.prototype.Y=function(c){try{if(c==this.g)e:{let it=yn(this.g);var d=this.g.Ba();let bi=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||sw(this.g)))){this.J||it!=4||d==7||(d==8||0>=bi?hs(3):hs(2)),rh(this);var f=this.g.Z();this.X=f;t:if(Uv(this)){var g=sw(this.g);c="";var T=g.length,R=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),gs(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(R&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,gb(this.i,this.u,this.A,this.l,this.R,it,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,Ze=this.g;if((_e=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(_e)){var ge=_e;break t}}ge=null}if(f=ge)Di(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ih(this,f);else{this.o=!1,this.s=3,dt(12),xr(this),gs(this);break e}}if(this.P){f=!0;let Lt;for(;!this.J&&this.C<L.length;)if(Lt=vb(this,L),Lt==th){it==4&&(this.s=4,dt(14),f=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Vv){this.s=4,dt(15),Di(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Di(this.i,this.l,Lt,null),ih(this,Lt);if(Uv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||L.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)Di(this.i,this.l,L,"[Invalid Chunked Response]"),xr(this),gs(this);else if(0<L.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),lh(rt),rt.M=!0,dt(11))}}else Di(this.i,this.l,L,null),ih(this,L);it==4&&xr(this),this.o&&!this.J&&(it==4?fw(this.j,this):(this.o=!1,fu(this)))}else kb(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),xr(this),gs(this)}}}catch{}finally{}};function Uv(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function vb(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?th:(f=Number(d.substring(f,g)),isNaN(f)?Vv:(g+=1,g+f>d.length?th:(d=d.slice(g,g+f),c.C=g+f,d)))}Un.prototype.cancel=function(){this.J=!0,xr(this)};function fu(c){c.S=Date.now()+c.I,Bv(c,c.I)}function Bv(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fs(m(c.ba,c),d)}function rh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Un.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(mb(this.i,this.A),this.L!=2&&(hs(),dt(17)),xr(this),this.s=2,gs(this)):Bv(this,this.S-c)};function gs(c){c.j.G==0||c.J||fw(c.j,c)}function xr(c){rh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,xv(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ih(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||oh(f.h,c))){if(!c.K&&oh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Iu(f),wu(f);else break e;ch(f),dt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=fs(m(f.Za,f),6e3));if(1>=zv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Mr(f,11)}else if((c.K||f.g==c)&&Iu(f),!$(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let ge=T[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let rt=ge[3];rt!=null&&(f.la=rt,f.j.info("VER="+f.la));let it=ge[4];it!=null&&(f.Aa=it,f.j.info("SVER="+f.Aa));let bi=ge[5];bi!=null&&typeof bi=="number"&&0<bi&&(g=1.5*bi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Lt=c.g;if(Lt){let Du=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var R=g.h;R.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(sh(R,R.h),R.h=null))}if(g.D){let dh=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;dh&&(g.ya=dh,Te(g.I,g.D,dh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=mw(g,g.J?g.ia:null,g.W),L.K){Hv(g.h,L);var _e=L,Ze=g.L;Ze&&(_e.I=Ze),_e.B&&(rh(_e),fu(_e)),g.g=L}else dw(g);0<f.i.length&&_u(f)}else ge[0]!="stop"&&ge[0]!="close"||Mr(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Mr(f,7):uh(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}hs(4)}catch{}}var wb=class{constructor(c,d){this.g=c,this.map=d}};function $v(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qv(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zv(c){return c.h?1:c.g?c.g.size:0}function oh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function sh(c,d){c.g?c.g.add(d):c.h=d}function Hv(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}$v.prototype.cancel=function(){if(this.i=Gv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Gv(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return C(c.i)}function _b(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Ib(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Wv(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Ib(c),g=_b(c),T=g.length,R=0;R<T;R++)d.call(void 0,g[R],f&&f[R],c)}var Kv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eb(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var R=c[f].substring(0,g);T=c[f].substring(g+1)}else R=c[f];d(R,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Rr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Rr){this.h=c.h,pu(this,c.j),this.o=c.o,this.g=c.g,gu(this,c.s),this.l=c.l;var d=c.i,f=new vs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Qv(this,f),this.m=c.m}else c&&(d=String(c).match(Kv))?(this.h=!1,pu(this,d[1]||"",!0),this.o=ms(d[2]||""),this.g=ms(d[3]||"",!0),gu(this,d[4]),this.l=ms(d[5]||"",!0),Qv(this,d[6]||"",!0),this.m=ms(d[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}Rr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ys(d,Yv,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ys(d,Yv,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ys(f,f.charAt(0)=="/"?Cb:Tb,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ys(f,Sb)),c.join("")};function mn(c){return new Rr(c)}function pu(c,d,f){c.j=f?ms(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function gu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Qv(c,d,f){d instanceof vs?(c.i=d,Ab(c.i,c.h)):(f||(d=ys(d,bb)),c.i=new vs(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function mu(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ms(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ys(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Db),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Db(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yv=/[#\/\?@]/g,Tb=/[#\?:]/g,Cb=/[#\?]/g,bb=/[#\?@]/g,Sb=/#/g;function vs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Bn(c){c.g||(c.g=new Map,c.h=0,c.i&&Eb(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=vs.prototype,n.add=function(c,d){Bn(this),this.i=null,c=Ti(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Zv(c,d){Bn(c),d=Ti(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Jv(c,d){return Bn(c),d=Ti(c,d),c.g.has(d)}n.forEach=function(c,d){Bn(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){Bn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let R=0;R<T.length;R++)f.push(d[g])}return f},n.V=function(c){Bn(this);let d=[];if(typeof c=="string")Jv(this,c)&&(d=d.concat(this.g.get(Ti(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Bn(this),this.i=null,c=Ti(this,c),Jv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Xv(c,d,f){Zv(c,d),0<f.length&&(c.i=null,c.g.set(Ti(c,d),C(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let R=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var T=R;L[g]!==""&&(T+="="+encodeURIComponent(String(L[g]))),c.push(T)}}return this.i=c.join("&")};function Ti(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Ab(c,d){d&&!c.j&&(Bn(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(Zv(this,g),Xv(this,T,f))},c)),c.j=d}function xb(c,d){let f=new ps;if(a.Image){let g=new Image;g.onload=v($n,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v($n,f,"TestLoadImage: error",!1,d,g),g.onabort=v($n,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v($n,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Rb(c,d){let f=new ps,g=new AbortController,T=setTimeout(()=>{g.abort(),$n(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(R=>{clearTimeout(T),R.ok?$n(f,"TestPingServer: ok",!0,d):$n(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),$n(f,"TestPingServer: error",!1,d)})}function $n(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function Mb(){this.g=new fb}function Nb(c,d,f){let g=f||"";try{Wv(c,function(T,R){let L=T;l(T)&&(L=Yd(T)),d.push(g+R+"="+encodeURIComponent(L))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function ws(c){this.l=c.Ub||null,this.j=c.eb||!1}S(ws,Zd),ws.prototype.g=function(){return new yu(this.l,this.j)},ws.prototype.i=function(c){return function(){return c}}({});function yu(c,d){nt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(yu,nt),n=yu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Is(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ew(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ew(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?_s(this):Is(this),this.readyState==3&&ew(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,_s(this))},n.Qa=function(c){this.g&&(this.response=c,_s(this))},n.ga=function(){this.g&&_s(this)};function _s(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Is(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Is(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function tw(c){let d="";return H(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ah(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=tw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Me(c){nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Me,nt);var Pb=/^https?$/i,Ob=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eh.g(),this.v=this.o?Rv(this.o):Rv(eh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){nw(this,R);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())f.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ob,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,L]of f)this.g.setRequestHeader(R,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ow(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){nw(this,R)}};function nw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,rw(c),vu(c)}function rw(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,lt(this,"complete"),lt(this,"abort"),vu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vu(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iw(this):this.bb())},n.bb=function(){iw(this)};function iw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||yn(c)!=4||c.Z()!=2)){if(c.u&&yn(c)==4)bv(c.Ea,0,c);else if(lt(c,"readystatechange"),yn(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var T=String(c.D).match(Kv)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!Pb.test(T?T.toLowerCase():"")}f=g}if(f)lt(c,"complete"),lt(c,"success");else{c.m=6;try{var R=2<yn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",rw(c)}}finally{vu(c)}}}}function vu(c,d){if(c.g){ow(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||lt(c,"ready");try{f.onreadystatechange=g}catch{}}}function ow(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function yn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),hb(d)}};function sw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kb(c){let d={};c=(c.g&&2<=yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if($(c[g]))continue;var f=D(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[T]||[];d[T]=R,R.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function aw(c){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,c),this.cb=Es("retryDelaySeedMs",1e4,c),this.Wa=Es("forwardChannelMaxRetries",2,c),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $v(c&&c.concurrentRequestLimit),this.Da=new Mb,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=aw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){dt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=mw(this,null,this.W),_u(this)};function uh(c){if(uw(c),c.G==3){var d=c.U++,f=mn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),Ds(c,f),d=new Un(c,c.j,d),d.L=2,d.v=mu(mn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=yw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),fu(d)}gw(c)}function wu(c){c.g&&(lh(c),c.g.cancel(),c.g=null)}function uw(c){wu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Iu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function _u(c){if(!qv(c.h)&&!c.s){c.s=!0;var d=c.Ga;ss||_v(),as||(ss(),as=!0),Bd.add(d,c),c.B=0}}function Fb(c,d){return zv(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fs(m(c.Ga,c,d),pw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Un(this,this.j,c),R=this.o;if(this.S&&(R?(R=y(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(T.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=lw(this,T,d),f=mn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),Ds(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(tw(R)))+"&"+d:this.m&&ah(f,this.m,R)),sh(this.h,T),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),T.T=!0,nh(T,f,null)):nh(T,f,d),this.G=2}}else this.G==3&&(c?cw(this,c):this.i.length==0||qv(this.h)||cw(this))};function cw(c,d){var f;d?f=d.l:f=c.U++;let g=mn(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),Ds(c,g),c.m&&c.o&&ah(g,c.m,c.o),f=new Un(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=lw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sh(c.h,f),nh(f,g,d)}function Ds(c,d){c.H&&H(c.H,function(f,g){Te(d,g,f)}),c.l&&Wv({},function(f,g){Te(d,g,f)})}function lw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let R=-1;for(;;){let L=["count="+f];R==-1?0<f?(R=T[0].g,L.push("ofs="+R)):R=0:L.push("ofs="+R);let _e=!0;for(let Ze=0;Ze<f;Ze++){let ge=T[Ze].g,rt=T[Ze].map;if(ge-=R,0>ge)R=Math.max(0,T[Ze].g-100),_e=!1;else try{Nb(rt,L,"req"+ge+"_")}catch{g&&g(rt)}}if(_e){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function dw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ss||_v(),as||(ss(),as=!0),Bd.add(d,c),c.v=0}}function ch(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fs(m(c.Fa,c),pw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,hw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fs(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),wu(this),hw(this))};function lh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function hw(c){c.g=new Un(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=mn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),Ds(c,d),c.m&&c.o&&ah(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=mu(mn(d)),f.m=null,f.P=!0,jv(f,c)}n.Za=function(){this.C!=null&&(this.C=null,wu(this),ch(this),dt(19))};function Iu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function fw(c,d){var f=null;if(c.g==d){Iu(c),lh(c),c.g=null;var g=2}else if(oh(c.h,d))f=d.D,Hv(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=lu(),lt(g,new kv(g,f)),_u(c)}else dw(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&Fb(c,d)||g==2&&ch(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Mr(c,5);break;case 4:Mr(c,10);break;case 3:Mr(c,6);break;default:Mr(c,2)}}}function pw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Mr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new Rr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pu(g,"https"),mu(g),T?xb(g.toString(),f):Rb(g.toString(),f)}else dt(2);c.G=0,c.l&&c.l.sa(d),gw(c),uw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function gw(c){if(c.G=0,c.ka=[],c.l){let d=Gv(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ka,d),A(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function mw(c,d,f){var g=f instanceof Rr?mn(f):new Rr(f);if(g.g!="")d&&(g.g=d+"."+g.g),gu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var R=new Rr(null);g&&pu(R,g),d&&(R.g=d),T&&gu(R,T),f&&(R.l=f),g=R}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),Ds(c,g),g}function yw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new ws({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vw(){}n=vw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Eu(){}Eu.prototype.g=function(c,d){return new Dt(c,d)};function Dt(c,d){nt.call(this),this.g=new aw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ci(this)}S(Dt,nt),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){uh(this.g)},Dt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Yd(c),c=f);d.i.push(new wb(d.Ya++,c)),d.G==3&&_u(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,uh(this.g),delete this.g,Dt.aa.N.call(this)};function ww(c){Jd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(ww,Jd);function _w(){Xd.call(this),this.status=1}S(_w,Xd);function Ci(c){this.g=c}S(Ci,vw),Ci.prototype.ua=function(){lt(this.g,"a")},Ci.prototype.ta=function(c){lt(this.g,new ww(c))},Ci.prototype.sa=function(c){lt(this.g,new _w)},Ci.prototype.ra=function(){lt(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,kg=xn.createWebChannelTransport=function(){return new Eu},Og=xn.getStatEventTarget=function(){return lu()},Pg=xn.Event=Ar,Tl=xn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},du.NO_ERROR=0,du.TIMEOUT=8,du.HTTP_ERROR=6,Ia=xn.ErrorCode=du,Fv.COMPLETE="complete",Ng=xn.EventType=Fv,Mv.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",nt.prototype.listen=nt.prototype.K,_o=xn.WebChannel=Mv,N1=xn.FetchXmlHttpFactory=ws,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,Mg=xn.XhrIo=Me}).apply(typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{});var mT="@firebase/firestore";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var Xo="10.14.0";var fr=new xw("@firebase/firestore");function Co(){return fr.logLevel}function Cz(n){fr.setLogLevel(n)}function P(n,...e){if(fr.logLevel<=Qt.DEBUG){let t=e.map(Uy);fr.debug(`Firestore (${Xo}): ${n}`,...t)}}function Oe(n,...e){if(fr.logLevel<=Qt.ERROR){let t=e.map(Uy);fr.error(`Firestore (${Xo}): ${n}`,...t)}}function Nn(n,...e){if(fr.logLevel<=Qt.WARN){let t=e.map(Uy);fr.warn(`Firestore (${Xo}): ${n}`,...t)}}function Uy(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function B(n="Unexpected state"){let e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+n;throw Oe(e),new Error(e)}function q(n,e){n||B()}function bz(n,e){n||B()}function V(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Sw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ke=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ol=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Bg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qe.UNAUTHENTICATED))}shutdown(){}},$g=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},qg=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){q(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Ke;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ke,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ke)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(q(typeof r.accessToken=="string"),new Ol(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string"),new qe(e)}},zg=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Hg=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new zg(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wg=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){q(this.o===void 0);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(q(typeof t.token=="string"),this.R=t.token,new Gg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P1(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var kl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=P1(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function te(n,e){return n<e?-1:n>e?1:0}function ko(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _C(n){return n+"\0"}var ke=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ke(0,0))}static max(){return new n(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(),r===void 0?r=e.length-t:r>e.length-t&&B(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},pe=class n extends Fl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},O1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qe=class n extends Fl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return O1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};var Fo=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Kg(n){return n.fields.find(e=>e.kind===2)}function ri(n){return n.fields.filter(e=>e.kind!==2)}Fo.UNKNOWN_ID=-1;var Mo=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Pa=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Ft.min())}};function IC(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new ke(t+1,0):new ke(t,r));return new Ft(i,j.empty(),e)}function EC(n){return new Ft(n.readTime,n.key,-1)}var Ft=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(z.min(),j.empty(),-1)}static max(){return new n(z.max(),j.empty(),-1)}};function By(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:te(n.largestBatchId,e.largestBatchId))}var DC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ll=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Cr(n){return N(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==DC)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Vl=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ke,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ci(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=$y(r.target.error);this.V.reject(new ci(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ci(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Yg(t)}},pr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ts())===12.2&&Oe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),ii(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!bw())return!1;if(n.v())return!0;let e=Ts(),t=n.S(e),r=0<t&&t<10,i=TC(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ci(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ci(e,s))},i.onupgradeneeded=o=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Vl.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),x.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(P("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function TC(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Qg=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ii(this.B.delete())}},ci=class extends O{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function br(n){return n.name==="IndexedDbTransactionError"}var Yg=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ii(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),ii(this.store.add(e))}get(e){return ii(this.store.get(e)).next(t=>(t===void 0&&(t=null),P("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),ii(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),ii(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new x((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){P("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new x((r,i)=>{t.onerror=o=>{let s=$y(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Qg(a),l=t(a.primaryKey,a.value,u);if(l instanceof x){let h=l.catch(p=>(u.done(),x.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>x.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ii(n){return new x((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=$y(r.target.error);t(i)}})}var yT=!1;function $y(n){let e=pr.S(Ts());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yT||(yT=!0,setTimeout(()=>{throw r},0)),r}}return n}var Zg=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){P("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{P("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){br(t)?P("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Cr(t)}yield this.X(6e4)}))}},Jg=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return x.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return P("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(P("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=EC(o);By(s,r)>0&&(r=s)}),new Ft(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var St=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function tu(n){return n==null}function Oa(n){return n===0&&1/n==-1/0}function CC(n){return typeof n=="number"&&Number.isInteger(n)&&!Oa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function mt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vT(e)),e=k1(n.get(t),e);return vT(e)}function k1(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function vT(n){return n+""}function an(n){let e=n.length;if(q(e>=2),e===2)return q(n.charAt(0)===""&&n.charAt(1)===""),pe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&B(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:B()}o=s+2}return new pe(r)}var wT=["userId","batchId"];function xl(n,e){return[n,mt(e)]}function bC(n,e,t){return[n,mt(e),t]}var F1={},L1=["prefixPath","collectionGroup","readTime","documentId"],V1=["prefixPath","collectionGroup","documentId"],j1=["collectionGroup","readTime","prefixPath","documentId"],U1=["canonicalId","targetId"],B1=["targetId","path"],$1=["path","targetId"],q1=["collectionId","parent"],z1=["indexId","uid"],H1=["uid","sequenceNumber"],G1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],W1=["indexId","uid","orderedDocumentKey"],K1=["userId","collectionPath","documentId"],Q1=["userId","collectionPath","largestBatchId"],Y1=["userId","collectionGroup","largestBatchId"],SC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z1=[...SC,"documentOverlays"],AC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xC=AC,qy=[...xC,"indexConfiguration","indexState","indexEntries"],J1=qy,X1=[...qy,"globals"];var ka=class extends Ll{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Ye(n,e){let t=V(n);return pr.F(t._e,e)}function _T(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _i(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var be=class n{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ro(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ro(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ro(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ro(this.root,e,this.comparator,!0)}},Ro=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,t,r,i,o){return this}insert(e,t,r){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ee=class n{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jl(this.data.getIterator())}getIteratorFrom(e){return new jl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Io(n){return n.hasNext()?n.getNext():void 0}var At=class n{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ee(Qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ul=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Az(){return typeof atob<"u"}var Ve=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ul("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ve.EMPTY_BYTE_STRING=new Ve("");var ek=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pn(n){if(q(!!n),typeof n=="string"){let e=0,t=ek.exec(n);if(q(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gr(n){return typeof n=="string"?Ve.fromBase64String(n):Ve.fromUint8Array(n)}function Md(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function zy(n){let e=n.mapValue.fields.__previous_value__;return Md(e)?zy(e):e}function Fa(n){let e=Pn(n.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}var Xg=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Lo=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var hr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rl={nullValue:"NULL_VALUE"};function li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Md(n)?4:MC(n)?9007199254740991:Nd(n)?10:11:B()}function hn(n,e){if(n===e)return!0;let t=li(n);if(t!==li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fa(n).isEqual(Fa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Pn(i.timestampValue),a=Pn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return gr(i.bytesValue).isEqual(gr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?Oa(s)===Oa(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ko(n.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(_T(s)!==_T(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!hn(s[u],a[u])))return!1;return!0}(n,e);default:return B()}}function La(n,e){return(n.values||[]).find(t=>hn(t,e))!==void 0}function mr(n,e){if(n===e)return 0;let t=li(n),r=li(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ae(o.integerValue||o.doubleValue),u=Ae(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return IT(n.timestampValue,e.timestampValue);case 4:return IT(Fa(n),Fa(e));case 5:return te(n.stringValue,e.stringValue);case 6:return function(o,s){let a=gr(o),u=gr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=te(a[l],u[l]);if(h!==0)return h}return te(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=te(Ae(o.latitude),Ae(s.latitude));return a!==0?a:te(Ae(o.longitude),Ae(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ET(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,C=te(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return C!==0?C:ET(v,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===hr.mapValue&&s===hr.mapValue)return 0;if(o===hr.mapValue)return 1;if(s===hr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=te(u[p],h[p]);if(m!==0)return m;let v=mr(a[u[p]],l[h[p]]);if(v!==0)return v}return te(u.length,h.length)}(n.mapValue,e.mapValue);default:throw B()}}function IT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return te(n,e);let t=Pn(n),r=Pn(e),i=te(t.seconds,r.seconds);return i!==0?i:te(t.nanos,r.nanos)}function ET(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=mr(t[i],r[i]);if(o)return o}return te(t.length,r.length)}function Vo(n){return em(n)}function em(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Pn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=em(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${em(t.fields[s])}`;return i+"}"}(n.mapValue):B()}function di(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tm(n){return!!n&&"integerValue"in n}function Va(n){return!!n&&"arrayValue"in n}function DT(n){return!!n&&"nullValue"in n}function TT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ml(n){return!!n&&"mapValue"in n}function Nd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Aa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _i(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Aa(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Aa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var NC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function tk(n){return"nullValue"in n?Rl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?di(Lo.empty(),j.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Nd(n)?NC:{mapValue:{}}:B()}function nk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?di(Lo.empty(),j.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?NC:"mapValue"in n?Nd(n)?{mapValue:{}}:hr:B()}function CT(n,e){let t=mr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function bT(n,e){let t=mr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var ct=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ml(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Aa(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ml(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ml(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_i(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Aa(this.value))}};function PC(n){let e=[];return _i(n.fields,(t,r)=>{let i=new Qe([t]);if(Ml(r)){let o=PC(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new At(e)}var ze=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,z.min(),z.min(),z.min(),ct.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,z.min(),z.min(),ct.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,z.min(),z.min(),ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fn=class{constructor(e,t){this.position=e,this.inclusive=t}};function ST(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),t.key):r=mr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hn(n.position[t],e.position[t]))return!1;return!0}var hi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Bl=class{},de=class n extends Bl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new im(e,t,r):t==="array-contains"?new am(e,r):t==="in"?new $l(e,r):t==="not-in"?new um(e,r):t==="array-contains-any"?new cm(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new om(e,r):new sm(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(mr(t,this.value)):t!==null&&li(this.value)===li(t)&&this.matchesComparison(mr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},we=class n extends Bl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return jo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function jo(n){return n.op==="and"}function nm(n){return n.op==="or"}function Hy(n){return OC(n)&&jo(n)}function OC(n){for(let e of n.filters)if(e instanceof we)return!1;return!0}function rm(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+Vo(n.value);if(Hy(n))return n.filters.map(e=>rm(e)).join(",");{let e=n.filters.map(t=>rm(t)).join(",");return`${n.op}(${e})`}}function kC(n,e){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&hn(r.value,i.value)}(n,e):n instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&kC(s,i.filters[a]),!0):!1}(n,e):void B()}function FC(n,e){let t=n.filters.concat(e);return we.create(t,n.op)}function LC(n){return n instanceof de?function(t){return`${t.field.canonicalString()} ${t.op} ${Vo(t.value)}`}(n):n instanceof we?function(t){return t.op.toString()+" {"+t.getFilters().map(LC).join(" ,")+"}"}(n):"Filter"}var im=class extends de{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},om=class extends de{constructor(e,t){super(e,"in",t),this.keys=VC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},sm=class extends de{constructor(e,t){super(e,"not-in",t),this.keys=VC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function VC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var am=class extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Va(t)&&La(t.arrayValue,this.value)}},$l=class extends de{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&La(this.value.arrayValue,t)}},um=class extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!La(this.value.arrayValue,t)}},cm=class extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Va(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>La(this.value.arrayValue,r))}};var lm=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function dm(n,e=null,t=[],r=[],i=null,o=null,s=null){return new lm(n,e,t,r,i,o,s)}function fi(n){let e=V(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),tu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Vo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Vo(r)).join(",")),e.ue=t}return e.ue}function nu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AT(n.startAt,e.startAt)&&AT(n.endAt,e.endAt)}function ql(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zl(n,e){return n.filters.filter(t=>t instanceof de&&t.field.isEqual(e))}function xT(n,e,t){let r=Rl,i=!0;for(let o of zl(n,e)){let s=Rl,a=!0;switch(o.op){case"<":case"<=":s=tk(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Rl}CT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];CT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function RT(n,e,t){let r=hr,i=!0;for(let o of zl(n,e)){let s=hr,a=!0;switch(o.op){case">=":case">":s=nk(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=hr}bT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];bT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Wt=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function jC(n,e,t,r,i,o,s,a){return new Wt(n,e,t,r,i,o,s,a)}function es(n){return new Wt(n)}function MT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gy(n){return n.collectionGroup!==null}function No(n){let e=V(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ee(Qe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new hi(o,r))}),t.has(Qe.keyField().canonicalString())||e.ce.push(new hi(Qe.keyField(),r))}return e.ce}function yt(n){let e=V(n);return e.le||(e.le=ik(e,No(n))),e.le}function ik(n,e){if(n.limitType==="F")return dm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new hi(i.field,o)});let t=n.endAt?new fn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fn(n.startAt.position,n.startAt.inclusive):null;return dm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function hm(n,e){let t=n.filters.concat([e]);return new Wt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hl(n,e,t){return new Wt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ru(n,e){return nu(yt(n),yt(e))&&n.limitType===e.limitType}function UC(n){return`${fi(yt(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LC(i)).join(", ")}]`),tu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Vo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Vo(i)).join(",")),`Target(${r})`}(yt(n))}; limitType=${n.limitType})`}function iu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of No(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=ST(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,No(r),i)||r.endAt&&!function(s,a,u){let l=ST(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,No(r),i))}(n,e)}function BC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $C(n){return(e,t)=>{let r=!1;for(let i of No(n)){let o=ok(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ok(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?mr(u,l):B()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var pn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return RC(this.inner)}size(){return this.innerSize}};var sk=new be(j.comparator);function Et(){return sk}var qC=new be(j.comparator);function ba(...n){let e=qC;for(let t of n)e=e.insert(t.key,t);return e}function zC(n){let e=qC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function un(){return xa()}function HC(){return xa()}function xa(){return new pn(n=>n.toString(),(n,e)=>n.isEqual(e))}var ak=new be(j.comparator),uk=new Ee(j.comparator);function ne(...n){let e=uk;for(let t of n)e=e.add(t);return e}var ck=new Ee(te);function Wy(){return ck}function Ky(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oa(e)?"-0":e}}function GC(n){return{integerValue:""+n}}function WC(n,e){return CC(e)?GC(e):Ky(n,e)}var Uo=class{constructor(){this._=void 0}};function lk(n,e,t){return n instanceof yr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Md(o)&&(o=zy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof On?QC(n,e):n instanceof kn?YC(n,e):function(i,o){let s=KC(i,o),a=NT(s)+NT(i.Pe);return tm(s)&&tm(i.Pe)?GC(a):Ky(i.serializer,a)}(n,e)}function dk(n,e,t){return n instanceof On?QC(n,e):n instanceof kn?YC(n,e):t}function KC(n,e){return n instanceof vr?function(r){return tm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var yr=class extends Uo{},On=class extends Uo{constructor(e){super(),this.elements=e}};function QC(n,e){let t=ZC(e);for(let r of n.elements)t.some(i=>hn(i,r))||t.push(r);return{arrayValue:{values:t}}}var kn=class extends Uo{constructor(e){super(),this.elements=e}};function YC(n,e){let t=ZC(e);for(let r of n.elements)t=t.filter(i=>!hn(i,r));return{arrayValue:{values:t}}}var vr=class extends Uo{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function NT(n){return Ae(n.integerValue||n.doubleValue)}function ZC(n){return Va(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var pi=class{constructor(e,t){this.field=e,this.transform=t}};function hk(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof On&&i instanceof On||r instanceof kn&&i instanceof kn?ko(r.elements,i.elements,hn):r instanceof vr&&i instanceof vr?hn(r.Pe,i.Pe):r instanceof yr&&i instanceof yr}(n.transform,e.transform)}var fm=class{constructor(e,t){this.version=e,this.transformResults=t}},Ne=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Nl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Bo=class{};function JC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _r(n.key,Ne.none()):new wr(n.key,n.data,Ne.none());{let t=n.data,r=ct.empty(),i=new Ee(Qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Kt(n.key,r,new At(i.toArray()),Ne.none())}}function fk(n,e,t){n instanceof wr?function(i,o,s){let a=i.value.clone(),u=OT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Kt?function(i,o,s){if(!Nl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=OT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(XC(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ra(n,e,t,r){return n instanceof wr?function(o,s,a,u){if(!Nl(o.precondition,s))return a;let l=o.value.clone(),h=kT(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Kt?function(o,s,a,u){if(!Nl(o.precondition,s))return a;let l=kT(o.fieldTransforms,u,s),h=s.data;return h.setAll(XC(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Nl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function pk(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=KC(r.transform,i||null);o!=null&&(t===null&&(t=ct.empty()),t.set(r.field,o))}return t||null}function PT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ko(r,i,(o,s)=>hk(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wr=class extends Bo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Kt=class extends Bo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XC(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function OT(n,e,t){let r=new Map;q(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,dk(s,a,t[i]))}return r}function kT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,lk(o,s,e))}return r}var _r=class extends Bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ja=class extends Bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ua=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&fk(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ra(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ra(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=HC();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=JC(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ne())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(t,r)=>PT(t,r))&&ko(this.baseMutations,e.baseMutations,(t,r)=>PT(t,r))}},pm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){q(e.mutations.length===r.length);let i=function(){return ak}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ba=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Be,fe;function e0(n){switch(n){default:return B();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function t0(n){if(n===void 0)return Oe("GRPC error has no .code"),M.UNKNOWN;switch(n){case Be.OK:return M.OK;case Be.CANCELLED:return M.CANCELLED;case Be.UNKNOWN:return M.UNKNOWN;case Be.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Be.INTERNAL:return M.INTERNAL;case Be.UNAVAILABLE:return M.UNAVAILABLE;case Be.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Be.NOT_FOUND:return M.NOT_FOUND;case Be.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Be.ABORTED:return M.ABORTED;case Be.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Be.DATA_LOSS:return M.DATA_LOSS;default:return B()}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var FT=null;function n0(){return new TextEncoder}var gk=new ar([4294967295,4294967295],0);function LT(n){let e=n0().encode(n),t=new Rg;return t.update(e),new Uint8Array(t.digest())}function VT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ar([t,r],0),new ar([i,o],0)]}var mm=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ui(`Invalid padding: ${t}`);if(r<0)throw new ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ui(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ar.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ar.fromNumber(r)));return i.compare(gk)===1&&(i=new ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=LT(e),[r,i]=VT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=LT(e),[r,i]=VT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $a=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,qa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(z.min(),i,new be(te),Et(),ne())}},qa=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ne(),ne(),ne())}};var Po=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Gl=class{constructor(e,t){this.targetId=e,this.me=t}},Wl=class{constructor(e,t,r=Ve.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Kl=class{constructor(){this.fe=0,this.ge=UT(),this.pe=Ve.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),t=ne(),r=ne();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B()}}),new qa(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=UT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ym=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Et(),this.qe=jT(),this.Qe=new be(te)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(ql(o))if(r===0){let s=new j(o.path);this.Ue(t,s,ze.newNoDocument(s,z.min()))}else q(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}FT?.et(function(h,p,m,v,S){var C,A,k,$,F,W;let ae={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},H=p.unchangedNames;return H&&(ae.bloomFilter={applied:S===0,hashCount:(C=H?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:($=(k=(A=H?.bits)===null||A===void 0?void 0:A.bitmap)===null||k===void 0?void 0:k.length)!==null&&$!==void 0?$:0,padding:(W=(F=H?.bits)===null||F===void 0?void 0:F.padding)!==null&&W!==void 0?W:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ae}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=gr(r).toUint8Array()}catch(u){if(u instanceof Ul)return Nn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new mm(s,i,o)}catch(u){return Nn(u instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ql(a.target)){let u=new j(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ze.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ne();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new $a(e,t,this.Qe,this.ke,r);return this.ke=Et(),this.qe=jT(),this.Qe=new be(te),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Kl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ee(te),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kl),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function jT(){return new be(j.comparator)}function UT(){return new be(j.comparator)}var mk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"},vm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function wm(n,e){return n.useProto3Json||tu(e)?e:{value:e}}function $o(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wk(n,e){return $o(n,e.toTimestamp())}function Fe(n){return q(!!n),z.fromTimestamp(function(t){let r=Pn(t);return new ke(r.seconds,r.nanos)}(n))}function Qy(n,e){return _m(n,e).canonicalString()}function _m(n,e){let t=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function i0(n){let e=pe.fromString(n);return q(p0(e)),e}function za(n,e){return Qy(n.databaseId,e.path)}function ln(n,e){let t=i0(e);if(t.get(1)!==n.databaseId.projectId)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(a0(t))}function o0(n,e){return Qy(n.databaseId,e)}function s0(n){let e=i0(n);return e.length===4?pe.emptyPath():a0(e)}function Im(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a0(n){return q(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function BT(n,e,t){return{name:za(n,e),fields:t.value.mapValue.fields}}function u0(n,e,t){let r=ln(n,e.name),i=Fe(e.updateTime),o=e.createTime?Fe(e.createTime):z.min(),s=new ct({mapValue:{fields:e.fields}}),a=ze.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function _k(n,e){return"found"in e?function(r,i){q(!!i.found),i.found.name,i.found.updateTime;let o=ln(r,i.found.name),s=Fe(i.found.updateTime),a=i.found.createTime?Fe(i.found.createTime):z.min(),u=new ct({mapValue:{fields:i.found.fields}});return ze.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){q(!!i.missing),q(!!i.readTime);let o=ln(r,i.missing),s=Fe(i.readTime);return ze.newNoDocument(o,s)}(n,e):B()}function Ik(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(q(h===void 0||typeof h=="string"),Ve.fromBase64String(h||"")):(q(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ve.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:t0(l.code);return new O(h,l.message||"")}(s);t=new Wl(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ln(n,r.document.name),o=Fe(r.document.updateTime),s=r.document.createTime?Fe(r.document.createTime):z.min(),a=new ct({mapValue:{fields:r.document.fields}}),u=ze.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Po(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ln(n,r.document),o=r.readTime?Fe(r.readTime):z.min(),s=ze.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Po([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ln(n,r.document),o=r.removedTargetIds||[];t=new Po([],o,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new gm(i,o),a=r.targetId;t=new Gl(a,s)}}return t}function Ha(n,e){let t;if(e instanceof wr)t={update:BT(n,e.key,e.value)};else if(e instanceof _r)t={delete:za(n,e.key)};else if(e instanceof Kt)t={update:BT(n,e.key,e.data),updateMask:Sk(e.fieldMask)};else{if(!(e instanceof ja))return B();t={verify:za(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof yr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof On)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw B()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:wk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B()}(n,e.precondition)),t}function Em(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ne.updateTime(Fe(o.updateTime)):o.exists!==void 0?Ne.exists(o.exists):Ne.none()}(e.currentDocument):Ne.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)q(a.setToServerValue==="REQUEST_TIME"),u=new yr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new On(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new kn(h)}else"increment"in a?u=new vr(s,a.increment):B();let l=Qe.fromServerFormat(a.fieldPath);return new pi(l,u)}(n,i)):[];if(e.update){e.update.name;let i=ln(n,e.update.name),o=new ct({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new At(l.map(h=>Qe.fromServerFormat(h)))}(e.updateMask);return new Kt(i,o,s,t,r)}return new wr(i,o,t,r)}if(e.delete){let i=ln(n,e.delete);return new _r(i,t)}if(e.verify){let i=ln(n,e.verify);return new ja(i,t)}return B()}function Ek(n,e){return n&&n.length>0?(q(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Fe(i.updateTime):Fe(o);return s.isEqual(z.min())&&(s=Fe(o)),new fm(s,i.transformResults||[])}(t,e))):[]}function c0(n,e){return{documents:[o0(n,e.path)]}}function l0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=o0(n,i);let o=function(l){if(l.length!==0)return f0(we.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:So(m.field),direction:Tk(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=wm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function d0(n){let e=s0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){q(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=h0(p);return m instanceof we&&Hy(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(S){return new hi(Ao(S.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,tu(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new fn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new fn(v,m)}(t.endAt)),jC(e,i,s,o,a,"F",u,l)}function Dk(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function h0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ao(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ao(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ao(t.unaryFilter.field);return de.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ao(t.unaryFilter.field);return de.create(s,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(n):n.fieldFilter!==void 0?function(t){return de.create(Ao(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return we.create(t.compositeFilter.filters.map(r=>h0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(t.compositeFilter.op))}(n):B()}function Tk(n){return mk[n]}function Ck(n){return yk[n]}function bk(n){return vk[n]}function So(n){return{fieldPath:n.canonicalString()}}function Ao(n){return Qe.fromServerFormat(n.fieldPath)}function f0(n){return n instanceof de?function(t){if(t.op==="=="){if(TT(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(DT(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TT(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(DT(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:Ck(t.op),value:t.value}}}(n):n instanceof we?function(t){let r=t.getFilters().map(i=>f0(i));return r.length===1?r[0]:{compositeFilter:{op:bk(t.op),filters:r}}}(n):B()}function Sk(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function p0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var qo=class n{constructor(e,t,r,i,o=z.min(),s=z.min(),a=Ve.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ql=class{constructor(e){this.ct=e}};function Ak(n,e){let t;if(e.document)t=u0(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=j.fromSegments(e.noDocument.path),i=mi(e.noDocument.readTime);t=ze.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return B();{let r=j.fromSegments(e.unknownDocument.path),i=mi(e.unknownDocument.version);t=ze.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ke(i[0],i[1]);return z.fromTimestamp(o)}(e.readTime)),t}function $T(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Yl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:za(o,s.key),fields:s.data.value.mapValue.fields,updateTime:$o(o,s.version.toTimestamp()),createTime:$o(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gi(e.version)};else{if(!e.isUnknownDocument())return B();r.unknownDocument={path:t.path.toArray(),version:gi(e.version)}}return r}function Yl(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mi(n){let e=new ke(n.seconds,n.nanoseconds);return z.fromTimestamp(e)}function oi(n,e){let t=(e.baseMutations||[]).map(o=>Em(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Em(n.ct,o)),i=ke.fromMillis(e.localWriteTimeMs);return new Ua(e.batchId,i,t,r)}function Sa(n){let e=mi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?mi(n.lastLimboFreeSnapshotVersion):z.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return q(o.documents.length===1),yt(es(s0(o.documents[0])))}(n.query):function(o){return yt(d0(o))}(n.query),new qo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ve.fromBase64String(n.resumeToken))}function g0(n,e){let t=gi(e.snapshotVersion),r=gi(e.lastLimboFreeSnapshotVersion),i;i=ql(e.target)?c0(n.ct,e.target):l0(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Yy(n){let e=d0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hl(e,e.limit,"L"):e}function Fg(n,e){return new Ba(e.largestBatchId,Em(n.ct,e.overlayMutation))}function qT(n,e){let t=e.path.lastSegment();return[n,mt(e.path.popLast()),t]}function zT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:gi(r.readTime),documentKey:mt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Dm=class{getBundleMetadata(e,t){return HT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:mi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return HT(e).put(function(i){return{bundleId:i.id,createTime:gi(Fe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return GT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Yy(o.bundledQuery),readTime:mi(o.readTime)}}(r)})}saveNamedQuery(e,t){return GT(e).put(function(i){return{name:i.name,readTime:gi(Fe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function HT(n){return Ye(n,"bundles")}function GT(n){return Ye(n,"namedQueries")}var Zl=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ea(e).get(qT(this.userId,t)).next(r=>r?Fg(this.serializer,r):null)}getOverlays(e,t){let r=un();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ba(t,s);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(mt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ea(e).j("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,t,r){let i=un(),o=mt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ea(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Fg(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=un(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ea(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Fg(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Ea(e).put(function(i,o,s){let[a,u,l]=qT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ha(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Ea(n){return Ye(n,"documentOverlays")}var Tm=class{Pt(e){return Ye(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ve.fromUint8Array(r):Ve.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Rn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Oa(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Pn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(gr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?MC(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Nd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):B()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ae(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Rn.vt=new Rn;function xk(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function WT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=xk(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Cm=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=WT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=WT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},bm=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Sm=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},si=class{constructor(){this.jt=new Cm,this.Ht=new bm(this.jt),this.Jt=new Sm(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ai=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=KT(n.arrayValue,e.arrayValue),t!==0?t:(t=KT(n.directionalValue,e.directionalValue),t!==0?t:j.comparator(n.documentKey,e.documentKey)))}function KT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Jl=class{constructor(e){this.Xt=new Ee((t,r)=>Qe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(q(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Kg(e);if(t!==void 0&&!this.sn(t))return!1;let r=ri(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ee(Qe.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Mo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Mo(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Mo(r.field,r.dir==="asc"?0:1)));return new Fo(Fo.UNKNOWN_ID,this.collectionId,t,Pa.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function m0(n){var e,t;if(q(n instanceof de||n instanceof we),n instanceof de){if(n instanceof $l){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>de.create(n.field,"==",o)))||[];return we.create(i,"or")}return n}let r=n.filters.map(i=>m0(i));return we.create(r,n.op)}function Rk(n){if(n.getFilters().length===0)return[];let e=Rm(m0(n));return q(y0(e)),Am(e)||xm(e)?[e]:e.getFilters()}function Am(n){return n instanceof de}function xm(n){return n instanceof we&&Hy(n)}function y0(n){return Am(n)||xm(n)||function(t){if(t instanceof we&&nm(t)){for(let r of t.getFilters())if(!Am(r)&&!xm(r))return!1;return!0}return!1}(n)}function Rm(n){if(q(n instanceof de||n instanceof we),n instanceof de)return n;if(n.filters.length===1)return Rm(n.filters[0]);let e=n.filters.map(r=>Rm(r)),t=we.create(e,n.op);return t=Xl(t),y0(t)?t:(q(t instanceof we),q(jo(t)),q(t.filters.length>1),t.filters.reduce((r,i)=>Zy(r,i)))}function Zy(n,e){let t;return q(n instanceof de||n instanceof we),q(e instanceof de||e instanceof we),t=n instanceof de?e instanceof de?function(i,o){return we.create([i,o],"and")}(n,e):QT(n,e):e instanceof de?QT(e,n):function(i,o){if(q(i.filters.length>0&&o.filters.length>0),jo(i)&&jo(o))return FC(i,o.getFilters());let s=nm(i)?i:o,a=nm(i)?o:i,u=s.filters.map(l=>Zy(l,a));return we.create(u,"or")}(n,e),Xl(t)}function QT(n,e){if(jo(e))return FC(e,n.getFilters());{let t=e.filters.map(r=>Zy(n,r));return we.create(t,"or")}}function Xl(n){if(q(n instanceof de||n instanceof we),n instanceof de)return n;let e=n.getFilters();if(e.length===1)return Xl(e[0]);if(OC(n))return n;let t=e.map(i=>Xl(i)),r=[];return t.forEach(i=>{i instanceof de?r.push(i):i instanceof we&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:we.create(r,n.op)}var Mm=class{constructor(){this.un=new Ga}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Ft.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Ft.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Ga=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ee(pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ee(pe.comparator)).toArray()}};var Cl=new Uint8Array(0),Nm=class{constructor(e,t){this.databaseId=t,this.cn=new Ga,this.ln=new pn(r=>fi(r),(r,i)=>nu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:mt(i)};return YT(e).put(o)}return x.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[_C(t),""],!1,!0);return YT(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(an(s.parent))}return r})}addFieldIndex(e,t){let r=Da(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Do(e);return o.next(a=>{s.put(zT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Da(e),i=Do(e),o=Eo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Da(e),r=Eo(e),i=Do(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return x.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Jl(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Eo(e),i=!0,o=new Map;return x.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ne(),a=[];return x.forEach(o,(u,l)=>{P("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(u)} to execute ${fi(t)}`);let h=function(F,W){let ae=Kg(W);if(ae===void 0)return null;for(let H of zl(F,ae.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(l,u),p=function(F,W){let ae=new Map;for(let H of ri(W))for(let I of zl(F,H.fieldPath))switch(I.op){case"==":case"in":ae.set(H.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ae.set(H.fieldPath.canonicalString(),I.value),Array.from(ae.values())}return null}(l,u),m=function(F,W){let ae=[],H=!0;for(let I of ri(W)){let y=I.kind===0?xT(F,I.fieldPath,F.startAt):RT(F,I.fieldPath,F.startAt);ae.push(y.value),H&&(H=y.inclusive)}return new fn(ae,H)}(l,u),v=function(F,W){let ae=[],H=!0;for(let I of ri(W)){let y=I.kind===0?RT(F,I.fieldPath,F.endAt):xT(F,I.fieldPath,F.endAt);ae.push(y.value),H&&(H=y.inclusive)}return new fn(ae,H)}(l,u),S=this.In(u,l,m),C=this.In(u,l,v),A=this.Tn(u,l,p),k=this.En(u.indexId,h,S,m.inclusive,C,v.inclusive,A);return x.forEach(k,$=>r.G($,t.limit).next(F=>{F.forEach(W=>{let ae=j.fromSegments(W.documentKey);s.has(ae)||(s=s.add(ae),a.push(ae))})}))}).next(()=>a)}return x.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=Rk(we.create(e.filters,"and")).map(r=>dm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Cl,v=this.An(e,m,r[p%l],i),S=this.Rn(e,m,o[p%l],s),C=a.map(A=>this.An(e,m,A,!0));h.push(...this.createRange(v,S,C))}return h}An(e,t,r,i){let o=new ai(e,j.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ai(e,j.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Jl(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return x.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ee(Qe.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new si;for(let i of ri(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Rn.vt.It(o,s)}return r.zt()}dn(e){let t=new si;return Rn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new si;return Rn.vt.It(di(this.databaseId,t),r.Yt(function(o){let s=ri(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new si);let o=0;for(let s of ri(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Va(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Rn.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new si;u.seed(a.zt()),Rn.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof de&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Da(e),i=Do(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new Pa(p.sequenceNumber,new Ft(mi(p.readTime),new j(an(p.documentKey)),p.largestBatchId)):Pa.empty(),v=h.fields.map(([S,C])=>new Mo(Qe.fromServerFormat(S),C));return new Fo(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:te(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Da(e),o=Do(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>x.forEach(a,u=>o.put(zT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return x.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?x.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Eo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Eo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Eo(e),o=new Ee(ur);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ai(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ee(ur),i=this.Vn(t,e);if(i==null)return r;let o=Kg(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Va(s))for(let a of s.arrayValue.values||[])r=r.add(new ai(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ai(t.indexId,e.key,Cl,i));return r}bn(e,t,r,i,o){P("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),S=l.getIterator(),C=Io(v),A=Io(S);for(;C||A;){let k=!1,$=!1;if(C&&A){let F=h(C,A);F<0?$=!0:F>0&&(k=!0)}else C!=null?$=!0:k=!0;k?(p(A),A=Io(S)):$?(m(C),C=Io(v)):(C=Io(v),A=Io(S))}}(i,o,ur,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),x.waitFor(s)}yn(e){let t=1;return Do(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ur(s,a)).filter((s,a,u)=>!a||ur(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ur(s,e),u=ur(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Cl,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Cl,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZT)}getMinOffset(e,t){return x.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||B())).next(ZT)}};function YT(n){return Ye(n,"collectionParents")}function Eo(n){return Ye(n,"indexEntries")}function Da(n){return Ye(n,"indexConfiguration")}function Do(n){return Ye(n,"indexState")}function ZT(n){q(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;By(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ft(e.readTime,e.documentKey,t)}var JT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function v0(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{q(a===1)}));let l=[];for(let h of t.mutations){let p=bC(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return x.waitFor(o).next(()=>l)}function ed(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw B();e=n.noDocument}return JSON.stringify(e).length}kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(41943040,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);var td=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=xo(e),s=cr(e);return s.add({}).next(a=>{q(typeof a=="number");let u=new Ua(a,t,r,i),l=function(v,S,C){let A=C.baseMutations.map($=>Ha(v.ct,$)),k=C.mutations.map($=>Ha(v.ct,$));return{userId:S,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:A,mutations:k}}(this.serializer,this.userId,u),h=[],p=new Ee((m,v)=>te(m.canonicalString(),v.canonicalString()));for(let m of i){let v=bC(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,F1))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),x.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return cr(e).get(t).next(r=>r?(q(r.userId===this.userId),oi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?x.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return cr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(q(a.batchId>=r),o=oi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return cr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).U("userMutationsIndex",t).next(r=>r.map(i=>oi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=xl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return xo(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=an(h);if(l===this.userId&&t.path.isEqual(m))return cr(e).get(p).next(v=>{if(!v)throw B();q(v.userId===this.userId),o.push(oi(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ee(te),i=[];return t.forEach(o=>{let s=xl(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=xo(e).J({range:a},(l,h,p)=>{let[m,v,S]=l,C=an(v);m===this.userId&&o.path.isEqual(C)?r=r.add(S):p.done()});i.push(u)}),x.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=xl(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ee(te);return xo(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,S=an(m);p===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(cr(e).get(o).next(s=>{if(s===null)throw B();q(s.userId===this.userId),r.push(oi(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return v0(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return x.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return xo(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=an(o[1]);i.push(u)}else a.done()}).next(()=>{q(i.length===0)})})}containsKey(e,t){return w0(e,this.userId,t)}Nn(e){return _0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function w0(n,e,t){let r=xl(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return xo(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function cr(n){return Ye(n,"mutations")}function xo(n){return Ye(n,"documentMutations")}function _0(n){return Ye(n,"mutationQueues")}var zo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Pm=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new zo(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>z.fromTimestamp(new ke(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>To(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return To(e).J((s,a)=>{let u=Sa(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,t){return To(e).J((r,i)=>{let o=Sa(i);t(o)})}qn(e){return XT(e).get("targetGlobalKey").next(t=>(q(t!==null),t))}Qn(e,t){return XT(e).put("targetGlobalKey",t)}Kn(e,t){return To(e).put(g0(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=fi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return To(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Sa(a);nu(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=lr(e);return t.forEach(s=>{let a=mt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,t,r){let i=lr(e);return x.forEach(t,o=>{let s=mt(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=lr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=lr(e),o=ne();return i.J({range:r,H:!0},(s,a,u)=>{let l=an(s[1]),h=new j(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=mt(t.path),i=IDBKeyRange.bound([r],[_C(r)],!1,!0),o=0;return lr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return To(e).get(t).next(r=>r?Sa(r):null)}};function To(n){return Ye(n,"targets")}function XT(n){return Ye(n,"targetGlobal")}function lr(n){return Ye(n,"targetDocuments")}function eC([n,e],[t,r]){let i=te(n,t);return i===0?te(e,r):i}var Om=class{constructor(e){this.Un=e,this.buffer=new Ee(eC),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();eC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},km=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){br(t)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Cr(t)}yield this.Hn(3e5)}))}},Fm=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(St.oe);let r=new Om(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(JT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JT):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Co()<=Qt.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Mk(n,e){return new Fm(n,e)}var Lm=class{constructor(e,t){this.db=e,this.garbageCollector=Mk(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return bl(e,r)}removeReference(e,t,r){return bl(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bl(e,t)}nr(e,t){return function(i,o){let s=!1;return _0(i).Y(a=>w0(i,a,o).next(u=>(u&&(s=!0),x.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,z.min()),lr(e).delete(function(p){return[0,mt(p.path)]}(s))))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bl(e,t)}tr(e,t){let r=lr(e),i,o=St.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==St.oe&&t(new j(an(i)),o),o=l,i=u):o=St.oe}).next(()=>{o!==St.oe&&t(new j(an(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function bl(n,e){return lr(n).put(function(r,i){return{targetId:0,path:mt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var nd=class{constructor(){this.changes=new pn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Vm=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ni(e).put(r)}removeEntry(e,t,r){return ni(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Yl(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ze.newInvalidDocument(t);return ni(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ta(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ze.newInvalidDocument(t)};return ni(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ta(t))},(i,o)=>{r={document:this.ir(t,o),size:ed(o)}}).next(()=>r)}getEntries(e,t){let r=Et();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Et(),i=new be(j.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,ed(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return x.resolve();let i=new Ee(rC);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ta(i.first()),Ta(i.last())),s=i.getIterator(),a=s.getNext();return ni(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=j.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rC(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Ta(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Yl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ni(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Et();for(let p of l){let m=this.ir(j.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(iu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Et(),s=nC(t,r),a=nC(t,Ft.max());return ni(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(j.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new jm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tC(e).get("remoteDocumentGlobalKey").next(t=>(q(!!t),t))}rr(e,t){return tC(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=Ak(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(z.min())))return r}return ze.newInvalidDocument(e)}};function I0(n){return new Vm(n)}var jm=class extends nd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new pn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ee((o,s)=>te(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=$T(this.cr.serializer,s);i=i.add(o.path.popLast());let l=ed(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=$T(this.cr.serializer,s.convertToNoDocument(z.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),x.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function tC(n){return Ye(n,"remoteDocumentGlobal")}function ni(n){return Ye(n,"remoteDocumentsV14")}function Ta(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nC(n,e){let t=e.documentKey.path.toArray();return[n,Yl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rC(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=te(t[o],r[o]),i)return i;return i=te(t.length,r.length),i||(i=te(t[t.length-2],r[r.length-2]),i||te(t[t.length-1],r[r.length-1]))}var Um=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var rd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ra(r.mutation,i,At.empty(),ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ne()){let i=un();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ba();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=un();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Et(),s=xa(),a=function(){return xa()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Kt)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ra(h.mutation,l,h.mutation.getFieldMask(),ke.now())):s.set(l.key,At.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Um(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=xa(),i=new be((s,a)=>s-a),o=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||At.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ne()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=HC();h.forEach(m=>{if(!o.has(m)){let v=JC(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(un()),a=-1,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ne())).next(h=>({batchId:a,changes:zC(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=ba();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ba();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Wt(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ze.newInvalidDocument(h)))});let a=ba();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ra(h.mutation,l,At.empty(),ke.now()),iu(t,l)&&(a=a.insert(u,l))}),a})}};var Bm=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Fe(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Yy(i.bundledQuery),readTime:Fe(i.readTime)}}(t)),x.resolve()}};var $m=class{constructor(){this.overlays=new be(j.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=un();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=un(),o=t.length+1,s=new j(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=un(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=un(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ba(t,r));let o=this.Ir.get(t);o===void 0&&(o=ne(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var qm=class{constructor(){this.sessionToken=Ve.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Wa=class{constructor(){this.Tr=new Ee($e.Er),this.dr=new Ee($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new $e(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new $e(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new pe([])),r=new $e(t,e),i=new $e(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new pe([])),r=new $e(t,e),i=new $e(t,e+1),o=ne();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new $e(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||te(e.wr,t.wr)}static Ar(e,t){return te(e.wr,t.wr)||j.comparator(e.key,t.key)}};var zm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ee($e.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ua(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new $e(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $e(t,0),i=new $e(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ee(te);return t.forEach(i=>{let o=new $e(i,0),s=new $e(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new $e(new j(o),0),a=new Ee(te);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),x.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){q(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let o=new $e(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new $e(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Hm=class{constructor(e){this.Mr=e,this.docs=function(){return new be(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(t))}getEntries(e,t){let r=Et();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ze.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Et(),s=t.path,a=new j(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||By(EC(h),r)<=0||(i.has(h.key)||iu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){B()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gm(this)}getSize(e){return x.resolve(this.size)}},Gm=class extends nd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Wm=class{constructor(e){this.persistence=e,this.Nr=new pn(t=>fi(t),nu),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wa,this.targetCount=0,this.kr=zo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var id=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new St(0),this.Kr=!1,this.Kr=!0,this.$r=new qm,this.referenceDelegate=e(this),this.Ur=new Wm(this),this.indexManager=new Mm,this.remoteDocumentCache=function(i){return new Hm(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ql(t),this.Gr=new Bm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $m,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new zm(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new Km(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Km=class extends Ll{constructor(e){super(),this.currentSequenceNumber=e}},od=class n{constructor(e){this.persistence=e,this.Jr=new Wa,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw B()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Qm=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Vl("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wT,{unique:!0}),u.createObjectStore("documentMutations")}(e),iC(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),iC(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return x.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:K1});l.createIndex("collectionPathOverlayIndex",Q1,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Y1,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:L1});l.createIndex("documentKeyIndex",V1),l.createIndex("collectionGroupIndex",j1)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:z1}).createIndex("sequenceNumberIndex",H1,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:G1}).createIndex("documentKeyIndex",W1,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ed(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>x.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>x.forEach(a,u=>{q(u.userId===o.userId);let l=oi(this.serializer,u);return v0(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new pe(s),l=function(p){return[0,mt(p)]}(u);o.push(t.get(l).next(h=>h?x.resolve():(p=>t.put({targetId:0,path:mt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>x.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:q1});let r=t.store("collectionParents"),i=new Ga,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:mt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new pe(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=an(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Sa(i),s=g0(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new j(pe.fromString(p.document.name).popFirst(5)):p.noDocument?j.fromSegments(p.noDocument.path):p.unknownDocument?j.fromSegments(p.unknownDocument.path):B()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>x.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=I0(this.serializer),o=new id(od.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ne();oi(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),x.forEach(a,(u,l)=>{let h=new qe(l),p=Zl.lt(this.serializer,h),m=o.getIndexManager(h),v=td.lt(h,this.serializer,m,o.referenceDelegate);return new rd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new ka(t,St.oe),u).next()})})}};function iC(n){n.createObjectStore("targetDocuments",{keyPath:B1}).createIndex("documentTargetsIndex",$1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",U1,{unique:!0}),n.createObjectStore("targetGlobal")}var Lg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ym=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new O(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lm(this,i),this.Ai=t+"main",this.serializer=new Ql(u),this.Ri=new pr(this.Ai,this.hi,new Qm(this.serializer)),this.$r=new Tm,this.Ur=new Pm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=I0(this.serializer),this.Gr=new Dm,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Oe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(M.FAILED_PRECONDITION,Lg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new St(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(br(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ca(e).get("owner").next(t=>x.resolve(this.vi(t)))}Ci(e){return Sl(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ye(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return x.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?x.resolve(!0):Ca(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new O(M.FAILED_PRECONDITION,Lg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sl(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new ka(e,St.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sl(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return td.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nm(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Zl.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){P("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?X1:u===16?J1:u===15?qy:u===14?xC:u===13?AC:u===12?Z1:u===11?SC:void B()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new ka(a,this.Qr?this.Qr.next():St.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Oe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new O(M.FAILED_PRECONDITION,DC);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ca(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(M.FAILED_PRECONDITION,Lg)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ca(e).put("owner",t)}static D(){return pr.D()}bi(e){let t=Ca(e);return t.get("owner").next(r=>this.vi(r)?(P("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):x.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Oe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;fh()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Oe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Oe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ca(n){return Ye(n,"owner")}function Sl(n){return Ye(n,"clientMetadata")}function Jy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Zm=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ne(),i=ne();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Jm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fh()?8:TC(Ts())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Jm;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Co()<=Qt.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Co()<=Qt.DEBUG&&P("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Co()<=Qt.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yt(t))):x.resolve())}Yi(e,t){if(MT(t))return x.resolve(null);let r=yt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Hl(t,null,"F"),r=yt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ne(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Hl(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return MT(t)||i.isEqual(z.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?x.resolve(null):(Co()<=Qt.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bo(t)),this.rs(e,s,t,IC(i,-1)).next(a=>a))})}ts(e,t){let r=new Ee($C(e));return t.forEach((i,o)=>{iu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Co()<=Qt.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",bo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ft.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Xm=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new be(te),this._s=new pn(o=>fi(o),nu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function E0(n,e,t,r){return new Xm(n,e,t,r)}function D0(n,e){return N(this,null,function*(){let t=V(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ne();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Nk(n,e){let t=V(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(S=>{v=v.next(()=>h.getEntry(u,S)).next(C=>{let A=l.docVersions.get(S);q(A!==null),C.version.compareTo(A)<0&&(p.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),h.addEntry(C)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ne();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function T0(n){let e=V(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Pk(n,e){let t=V(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ve.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(C,A,k){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=Et(),l=ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(C0(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(z.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function C0(n,e,t){let r=ne(),i=ne();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Et();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function Ok(n,e){let t=V(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ho(n,e){let t=V(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new qo(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Go(n,e,t){return N(this,null,function*(){let r=V(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!br(s))throw s;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ad(n,e,t){let r=V(n),i=z.min(),o=ne();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=V(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,yt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:z.min(),t?o:ne())).next(a=>(A0(r,BC(e),a),{documents:a,Ts:o})))}function b0(n,e){let t=V(n),r=V(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function S0(n,e){let t=V(n),r=t.us.get(e)||z.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,IC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(A0(t,e,i),i))}function A0(n,e,t){let r=n.us.get(e)||z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function kk(n,e,t,r){return N(this,null,function*(){let i=V(n),o=ne(),s=Et();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Ho(i,function(h){return yt(es(pe.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>C0(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function Fk(r,i){return N(this,arguments,function*(n,e,t=ne()){let o=yield Ho(n,yt(Yy(e.bundledQuery))),s=V(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Fe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ve.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function oC(n,e){return`firestore_clients_${n}_${e}`}function sC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Vg(n,e){return`firestore_targets_${n}_${e}`}var ud=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Oe("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ma=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(Oe("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},cd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Wy();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=CC(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Oe("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},ey=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Oe("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ka=class{constructor(){this.activeTargetIds=Wy()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Na=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new be(te),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=oC(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ka),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(oC(this.persistenceKey,r));if(i){let o=cd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Vg(this.persistenceKey,e));if(i){let o=Ma.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return P("SharedClientState","READ",e,t),t}setItem(e,t){P("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){P("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(P("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Oe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=St.oe;if(o!=null)try{let a=JSON.parse(o);q(typeof a=="number"),s=a}catch(a){Oe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==St.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new ud(this.currentUser,e,t,r),o=sC(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=sC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Vg(this.persistenceKey,e),o=new Ma(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return cd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ud.Rs(new qe(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Ma.Rs(i,t)}Ls(e){return ey.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);P("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Wy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},ld=class{constructor(){this.so=new Ka,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ka,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ty=class{_o(e){}shutdown(){}};var dd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Al=null;function jg(){return Al===null?Al=function(){return 268435456+Math.round(2147483648*Math.random())}():Al++,"0x"+Al.toString(16)}var Lk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ny=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ut="WebChannelConnection",ry=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=jg(),u=this.xo(t,r.toUriEncodedString());P("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(P("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Nn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=Lk[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=jg();return new Promise((s,a)=>{let u=new Mg;u.setWithCredentials(!0),u.listenOnce(Ng.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ia.NO_ERROR:let h=u.getResponseJson();P(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ia.TIMEOUT:P(ut,`RPC '${e}' ${o} timed out`),a(new O(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:let p=u.getStatus();if(P(ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let S=function(A){let k=A.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(v.status);a(new O(S,v.message))}else a(new O(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new O(M.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{P(ut,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);P(ut,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=jg(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kg(),a=Og(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");P(ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,S=new ny({Io:A=>{v?P(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(P(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(ut,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},To:()=>p.close()}),C=(A,k,$)=>{A.listen(k,F=>{try{$(F)}catch(W){setTimeout(()=>{throw W},0)}})};return C(p,_o.EventType.OPEN,()=>{v||(P(ut,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),C(p,_o.EventType.CLOSE,()=>{v||(v=!0,P(ut,`RPC '${e}' stream ${i} transport closed`),S.So())}),C(p,_o.EventType.ERROR,A=>{v||(v=!0,Nn(ut,`RPC '${e}' stream ${i} transport errored:`,A),S.So(new O(M.UNAVAILABLE,"The operation could not be completed")))}),C(p,_o.EventType.MESSAGE,A=>{var k;if(!v){let $=A.data[0];q(!!$);let F=$,W=F.error||((k=F[0])===null||k===void 0?void 0:k.error);if(W){P(ut,`RPC '${e}' stream ${i} received error:`,W);let ae=W.status,H=function(_){let E=Be[_];if(E!==void 0)return t0(E)}(ae),I=W.message;H===void 0&&(H=M.INTERNAL,I="Unknown error status: "+ae+" with message "+W.message),v=!0,S.So(new O(H,I)),p.close()}else P(ut,`RPC '${e}' stream ${i} received:`,$),S.bo($)}}),C(a,Pg.STAT_EVENT,A=>{A.stat===Tl.PROXY?P(ut,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Tl.NOPROXY&&P(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function x0(){return typeof window<"u"?window:null}function Pl(){return typeof document<"u"?document:null}function ou(n){return new vm(n,!0)}var Qa=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var hd=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Qa(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Oe(t.toString()),Oe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new O(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iy=class extends hd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Ik(this.serializer,e),r=function(o){if(!("targetChange"in o))return z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?z.min():s.readTime?Fe(s.readTime):z.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Im(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=ql(u)?{documents:c0(o,u)}:{query:l0(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=r0(o,s.resumeToken);let l=wm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(z.min())>0){a.readTime=$o(o,s.snapshotVersion.toTimestamp());let l=wm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Dk(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Im(this.serializer),t.removeTarget=e,this.a_(t)}},oy=class extends hd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return q(!!e.streamToken),this.lastStreamToken=e.streamToken,q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Ek(e.writeResults,e.commitTime),r=Fe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Im(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Ha(this.serializer,r))};this.a_(t)}};var sy=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,_m(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(M.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,_m(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ay=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Oe(t),this.D_=!1):P("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var uy=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Sr(this)&&(P("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=V(u);l.L_.add(4),yield ts(l),l.q_.set("Unknown"),l.L_.delete(4),yield su(l)})}(this))}))}),this.q_=new ay(r,i)}};function su(n){return N(this,null,function*(){if(Sr(n))for(let e of n.B_)yield e(!0)})}function ts(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Pd(n,e){let t=V(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),tv(t)?ev(t):rs(t).r_()&&Xy(t,e))}function Wo(n,e){let t=V(n),r=rs(t);t.N_.delete(e),r.r_()&&R0(t,e),t.N_.size===0&&(r.r_()?r.o_():Sr(t)&&t.q_.set("Unknown"))}function Xy(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rs(n).A_(e)}function R0(n,e){n.Q_.xe(e),rs(n).R_(e)}function ev(n){n.Q_=new ym({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),rs(n).start(),n.q_.v_()}function tv(n){return Sr(n)&&!rs(n).n_()&&n.N_.size>0}function Sr(n){return V(n).L_.size===0}function M0(n){n.Q_=void 0}function Vk(n){return N(this,null,function*(){n.q_.set("Online")})}function jk(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Xy(n,e)})})}function Uk(n,e){return N(this,null,function*(){M0(n),tv(n)?(n.q_.M_(e),ev(n)):n.q_.set("Unknown")})}function Bk(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof Wl&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fd(n,r)}else if(e instanceof Po?n.Q_.Ke(e):e instanceof Gl?n.Q_.He(e):n.Q_.We(e),!t.isEqual(z.min()))try{let r=yield T0(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Ve.EMPTY_BYTE_STRING,h.snapshotVersion)),R0(o,u);let p=new qo(h.target,u,l,h.sequenceNumber);Xy(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P("RemoteStore","Failed to raise snapshot:",r),yield fd(n,r)}})}function fd(n,e,t){return N(this,null,function*(){if(!br(e))throw e;n.L_.add(1),yield ts(n),n.q_.set("Offline"),t||(t=()=>T0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){P("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield su(n)}))})}function N0(n,e){return e().catch(t=>fd(n,t,e))}function ns(n){return N(this,null,function*(){let e=V(n),t=Ir(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$k(e);)try{let i=yield Ok(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,qk(e,i)}catch(i){yield fd(e,i)}P0(e)&&O0(e)})}function $k(n){return Sr(n)&&n.O_.length<10}function qk(n,e){n.O_.push(e);let t=Ir(n);t.r_()&&t.V_&&t.m_(e.mutations)}function P0(n){return Sr(n)&&!Ir(n).n_()&&n.O_.length>0}function O0(n){Ir(n).start()}function zk(n){return N(this,null,function*(){Ir(n).p_()})}function Hk(n){return N(this,null,function*(){let e=Ir(n);for(let t of n.O_)e.m_(t.mutations)})}function Gk(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=pm.from(r,e,t);yield N0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ns(n)})}function Wk(n,e){return N(this,null,function*(){e&&Ir(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return e0(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();Ir(r).s_(),yield N0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ns(r)}})}(n,e)),P0(n)&&O0(n)})}function aC(n,e){return N(this,null,function*(){let t=V(n);t.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");let r=Sr(t);t.L_.add(3),yield ts(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield su(t)})}function cy(n,e){return N(this,null,function*(){let t=V(n);e?(t.L_.delete(2),yield su(t)):e||(t.L_.add(2),yield ts(t),t.q_.set("Unknown"))})}function rs(n){return n.K_||(n.K_=function(t,r,i){let o=V(t);return o.w_(),new iy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Vk.bind(null,n),Ro:jk.bind(null,n),mo:Uk.bind(null,n),d_:Bk.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),tv(n)?ev(n):n.q_.set("Unknown")):(yield n.K_.stop(),M0(n))}))),n.K_}function Ir(n){return n.U_||(n.U_=function(t,r,i){let o=V(t);return o.w_(),new oy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zk.bind(null,n),mo:Wk.bind(null,n),f_:Hk.bind(null,n),g_:Gk.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield ns(n)):(yield n.U_.stop(),n.O_.length>0&&(P("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var ly=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ke,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function is(n,e){if(Oe("AsyncQueue",`${e}: ${n}`),br(n))return new O(M.UNAVAILABLE,`${e}: ${n}`);throw n}var pd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=ba(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var gd=class{constructor(){this.W_=new be(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):B():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ko=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,pd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var dy=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},hy=class{constructor(){this.queries=uC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=V(t),o=i.queries;i.queries=uC(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new O(M.ABORTED,"Firestore shutting down"))}};function uC(){return new pn(n=>UC(n),ru)}function nv(n,e){return N(this,null,function*(){let t=V(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new dy,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=is(s,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&iv(t)})}function rv(n,e){return N(this,null,function*(){let t=V(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Kk(n,e){let t=V(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&iv(t)}function Qk(n,e,t){let r=V(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function iv(n){n.Y_.forEach(e=>{e.next()})}var fy,cC;(cC=fy||(fy={})).ea="default",cC.Cache="cache";var Ya=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fy.Cache}};var py=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var md=class{constructor(e){this.serializer=e}Es(e){return ln(this.serializer,e)}ds(e){return e.metadata.exists?u0(this.serializer,e.document,!1):ze.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Fe(e)}},gy=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=k0(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new md(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ne()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield kk(this.localStore,new md(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield Fk(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function k0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var yd=class{constructor(e){this.key=e}},vd=class{constructor(e){this.key=e}},wd=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=$C(e),this.Ra=new pd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new gd,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=iu(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),A=!1;m&&v?m.data.isEqual(v.data)?S!==C&&(r.track({type:3,doc:v}),A=!0):this.ga(m,v)||(r.track({type:2,doc:v}),A=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),A=!0):m&&!v&&(r.track({type:1,doc:m}),A=!0,(u||l)&&(a=!0)),A&&(v?(s=s.add(v),o=C?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,S){let C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return C(v)-C(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ko(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new vd(r))}),this.da.forEach(r=>{e.has(r)||t.push(new yd(r))}),t}ba(e){this.Ta=e.Ts,this.da=ne();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},my=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},yy=class{constructor(e){this.key=e,this.va=!1}},vy=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new pn(a=>UC(a),ru),this.Ma=new Map,this.xa=new Set,this.Oa=new be(j.comparator),this.Na=new Map,this.La=new Wa,this.Ba={},this.ka=new Map,this.qa=zo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Yk(n,e,t=!0){return N(this,null,function*(){let r=Od(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield F0(r,e,t,!0),i})}function Zk(n,e){return N(this,null,function*(){let t=Od(n);yield F0(t,e,!0,!1)})}function F0(n,e,t,r){return N(this,null,function*(){let i=yield Ho(n.localStore,yt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield ov(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Pd(n.remoteStore,i),a})}function ov(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,v)=>function(C,A,k,$){return N(this,null,function*(){let F=A.view.ma(k);F.ns&&(F=yield ad(C.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,F)));let W=$&&$.targetChanges.get(A.targetId),ae=$&&$.targetMismatches.get(A.targetId)!=null,H=A.view.applyChanges(F,C.isPrimaryClient,W,ae);return wy(C,A.targetId,H.wa),H.snapshot})}(n,p,m,v);let o=yield ad(n.localStore,e,!0),s=new wd(e,o.Ts),a=s.ma(o.documents),u=qa.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);wy(n,t,l.wa);let h=new my(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Jk(n,e,t){return N(this,null,function*(){let r=V(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ru(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Go(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Wo(r.remoteStore,i.targetId),Qo(r,i.targetId)}).catch(Cr))):(Qo(r,i.targetId),yield Go(r.localStore,i.targetId,!0))})}function Xk(n,e){return N(this,null,function*(){let t=V(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wo(t.remoteStore,r.targetId))})}function eF(n,e,t){return N(this,null,function*(){let r=cv(n);try{let i=yield function(s,a){let u=V(s),l=ke.now(),h=a.reduce((v,S)=>v.add(S.key),ne()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=Et(),C=ne();return u.cs.getEntries(v,h).next(A=>{S=A,S.forEach((k,$)=>{$.isValidDocument()||(C=C.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,S)).next(A=>{p=A;let k=[];for(let $ of a){let F=pk($,p.get($.key).overlayedDocument);F!=null&&k.push(new Kt($.key,F,PC(F.value.mapValue),Ne.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,k,a)}).next(A=>{m=A;let k=A.applyToLocalDocumentSet(p,C);return u.documentOverlayCache.saveOverlays(v,A.batchId,k)})}).then(()=>({batchId:m.batchId,changes:zC(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new be(te)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Vn(r,i.changes),yield ns(r.remoteStore)}catch(i){let o=is(i,"Failed to persist write");t.reject(o)}})}function L0(n,e){return N(this,null,function*(){let t=V(n);try{let r=yield Pk(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?q(s.va):i.removedDocuments.size>0&&(q(s.va),s.va=!1))}),yield Vn(t,r,e)}catch(r){yield Cr(r)}})}function lC(n,e,t){let r=V(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=V(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&iv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tF(n,e,t){return N(this,null,function*(){let r=V(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new be(j.comparator);s=s.insert(o,ze.newNoDocument(o,z.min()));let a=ne().add(o),u=new $a(z.min(),new Map,new be(te),s,a);yield L0(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),uv(r)}else yield Go(r.localStore,e,!1).then(()=>Qo(r,e,t)).catch(Cr)})}function nF(n,e){return N(this,null,function*(){let t=V(n),r=e.batch.batchId;try{let i=yield Nk(t.localStore,e);av(t,r,null),sv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vn(t,i)}catch(i){yield Cr(i)}})}function rF(n,e,t){return N(this,null,function*(){let r=V(n);try{let i=yield function(s,a){let u=V(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(q(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);av(r,e,t),sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vn(r,i)}catch(i){yield Cr(i)}})}function iF(n,e){return N(this,null,function*(){let t=V(n);Sr(t.remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=V(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=is(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function sv(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function av(n,e,t){let r=V(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Qo(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||V0(n,r)})}function V0(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Wo(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),uv(n))}function wy(n,e,t){for(let r of t)r instanceof yd?(n.La.addReference(r.key,e),oF(n,r)):r instanceof vd?(P("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||V0(n,r.key)):B()}function oF(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(P("SyncEngine","New document in limbo: "+t),n.xa.add(r),uv(n))}function uv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(pe.fromString(e)),r=n.qa.next();n.Na.set(r,new yy(t)),n.Oa=n.Oa.insert(t,r),Pd(n.remoteStore,new qo(yt(es(t.path)),r,"TargetPurposeLimboResolution",St.oe))}}function Vn(n,e,t){return N(this,null,function*(){let r=V(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Zm.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=V(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!br(p))throw p;P("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),S=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,C)}}})}(r.localStore,o))})}function sF(n,e){return N(this,null,function*(){let t=V(n);if(!t.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());let r=yield D0(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new O(M.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vn(t,r.hs)}})}function aF(n,e){let t=V(n),r=t.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function uF(n,e){return N(this,null,function*(){let t=V(n),r=yield ad(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&wy(t,e.targetId,i.wa),i})}function cF(n,e){return N(this,null,function*(){let t=V(n);return S0(t.localStore,e).then(r=>Vn(t,r))})}function lF(n,e,t,r){return N(this,null,function*(){let i=V(n),o=yield function(a,u){let l=V(a),h=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):x.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ns(i.remoteStore):t==="acknowledged"||t==="rejected"?(av(i,e,r||null),sv(i,e),function(a,u){V(V(a).mutationQueue).On(u)}(i.localStore,e)):B(),yield Vn(i,o)):P("SyncEngine","Cannot apply mutation batch with id: "+e)})}function dF(n,e){return N(this,null,function*(){let t=V(n);if(Od(t),cv(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield dC(t,r.toArray());t.Qa=!0,yield cy(t.remoteStore,!0);for(let o of i)Pd(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Qo(t,s),Go(t.localStore,s,!0))),Wo(t.remoteStore,s)}),yield i,yield dC(t,r),function(s){let a=V(s);a.Na.forEach((u,l)=>{Wo(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new be(j.comparator)}(t),t.Qa=!1,yield cy(t.remoteStore,!1)}})}function dC(n,e,t){return N(this,null,function*(){let r=V(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Ho(r.localStore,yt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield uF(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield b0(r.localStore,s);a=yield Ho(r.localStore,l),yield ov(r,j0(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function j0(n){return jC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function hF(n){return function(t){return V(V(t).persistence).Qi()}(V(n).localStore)}function fF(n,e,t,r){return N(this,null,function*(){let i=V(n);if(i.Qa)return void P("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield S0(i.localStore,BC(o[0])),a=$a.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ve.EMPTY_BYTE_STRING);yield Vn(i,s,a);break}case"rejected":yield Go(i.localStore,e,!0),Qo(i,e,r);break;default:B()}})}function pF(n,e,t){return N(this,null,function*(){let r=Od(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){P("SyncEngine","Adding an already active target "+i);continue}let o=yield b0(r.localStore,i),s=yield Ho(r.localStore,o);yield ov(r,j0(o),s.targetId,!1,s.resumeToken),Pd(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Go(r.localStore,i,!1).then(()=>{Wo(r.remoteStore,i),Qo(r,i)}).catch(Cr))}})}function Od(n){let e=V(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=L0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tF.bind(null,e),e.Ca.d_=Kk.bind(null,e.eventManager),e.Ca.$a=Qk.bind(null,e.eventManager),e}function cv(n){let e=V(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rF.bind(null,e),e}function gF(n,e,t){let r=V(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,S){let C=V(v),A=Fe(S.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",k=>C.Gr.getBundleMetadata(k,S.id)).then(k=>!!k&&k.createTime.compareTo(A)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(k0(u));let l=new gy(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Vn(o,p.Ia,void 0),yield function(v,S){let C=V(v);return C.persistence.runTransaction("Save bundle","readwrite",A=>C.Gr.saveBundleMetadata(A,S))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Nn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var _y=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=ou(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return E0(this.persistence,new sd,t.initialUser,this.serializer)}Ga(t){return new id(od.Zr,this.serializer)}Wa(t){return new ld}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var _d=class n extends _y{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield hh(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield cv(this.Ja.syncEngine),yield ns(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return E0(this.persistence,new sd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new km(r,e.asyncQueue,t)}Ha(e,t){let r=new Jg(t,this.persistence);return new Zg(e.asyncQueue,r)}Ga(e){let t=Jy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,x0(),Pl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new ld}},Iy=class n extends _d{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield hh(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Na&&(this.sharedClientState.syncEngine={no:lF.bind(null,t),ro:fF.bind(null,t),io:pF.bind(null,t),Qi:hF.bind(null,t),eo:cF.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield dF(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=x0();if(!Na.D(t))throw new O(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Jy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Na(t,e.asyncQueue,r,e.clientId,e.initialUser)}},lv=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sF.bind(null,this.syncEngine),yield cy(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new hy}()}createDatastore(t){let r=ou(t.databaseInfo.databaseId),i=function(s){return new ry(s)}(t.databaseInfo);return function(s,a,u,l){return new sy(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new uy(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>lC(this.syncEngine,r,0),function(){return dd.D()?new dd:new ty}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new vy(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=V(o);P("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ts(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function hC(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Yo=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Oe("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ey=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Ke,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new py(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Dy=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=V(i),a={documents:o.map(p=>za(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,pe.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=_k(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());q(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _r(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=j.fromPath(r);this.mutations.push(new ja(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=V(r),s={writes:i.map(a=>Ha(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw B();t=z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(z.min())?Ne.exists(!1):Ne.updateTime(t):Ne.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(z.min()))throw new O(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ne.updateTime(t)}return Ne.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Ty=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Qa(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new Dy(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!tu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!e0(t)}return!1}};var Cy=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=kl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){P("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ke;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=is(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ug(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield D0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function fC(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield dv(n);P("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aC(e.remoteStore,i)),n._onlineComponents=e})}function dv(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ug(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Nn("Error using user provided cache. Falling back to memory cache: "+t),yield Ug(n,new _y)}}else P("FirestoreClient","Using default OfflineComponentProvider"),yield Ug(n,new _y);return n._offlineComponents})}function kd(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P("FirestoreClient","Using user provided OnlineComponentProvider"),yield fC(n,n._uninitializedComponentsProvider._online)):(P("FirestoreClient","Using default OnlineComponentProvider"),yield fC(n,new lv))),n._onlineComponents})}function U0(n){return dv(n).then(e=>e.persistence)}function hv(n){return dv(n).then(e=>e.localStore)}function B0(n){return kd(n).then(e=>e.remoteStore)}function fv(n){return kd(n).then(e=>e.syncEngine)}function mF(n){return kd(n).then(e=>e.datastore)}function Zo(n){return N(this,null,function*(){let e=yield kd(n),t=e.eventManager;return t.onListen=Yk.bind(null,e.syncEngine),t.onUnlisten=Jk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Zk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Xk.bind(null,e.syncEngine),t})}function yF(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield U0(n),t=yield B0(n);return e.setNetworkEnabled(!0),function(i){let o=V(i);return o.L_.delete(0),su(o)}(t)}))}function vF(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield U0(n),t=yield B0(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=V(i);o.L_.add(0),yield ts(o),o.q_.set("Offline")})}(t)}))}function wF(n,e){let t=new Ke;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=V(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new O(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=is(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield hv(n),e,t)})),t.promise}function $0(n,e,t={}){let r=new Ke;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Yo({next:m=>{h.Za(),s.enqueueAndForget(()=>rv(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new O(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ya(es(a.path),h,{includeMetadataChanges:!0,_a:!0});return nv(o,p)}(yield Zo(n),n.asyncQueue,e,t,r)})),r.promise}function _F(n,e){let t=new Ke;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield ad(i,o,!0),u=new wd(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=is(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield hv(n),e,t)})),t.promise}function q0(n,e,t={}){let r=new Ke;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Yo({next:m=>{h.Za(),s.enqueueAndForget(()=>rv(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ya(a,h,{includeMetadataChanges:!0,_a:!0});return nv(o,p)}(yield Zo(n),n.asyncQueue,e,t,r)})),r.promise}function IF(n,e){let t=new Yo(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){V(i).Y_.add(o),o.next()}(yield Zo(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){V(i).Y_.delete(o)}(yield Zo(n),t)}))}}function EF(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?n0().encode(s):s,function(h,p){return new Ey(h,p)}(function(h,p){if(h instanceof Uint8Array)return hC(h,p);if(h instanceof ArrayBuffer)return hC(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,ou(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){gF(yield fv(n),i,r)}))}function DF(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=V(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield hv(n),e)}))}function z0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pC=new Map;function pv(n,e,t){if(!t)throw new O(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TF(n,e,t,r){if(e===!0&&r===!0)throw new O(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gC(n){if(!j.isDocumentKey(n))throw new O(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mC(n){if(j.isDocumentKey(n))throw new O(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B()}function ye(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Fd(n);throw new O(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function H0(n,e){if(e<=0)throw new O(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Id=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Id({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Id(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bg;switch(r.type){case"firstParty":return new Hg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=pC.get(t);r&&(P("ComponentProvider","Removing Datastore"),pC.delete(t),r.terminate())}(this),Promise.resolve()}};function CF(n,e,t,r={}){var i;let o=(n=ye(n,yi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Nn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=qe.MOCK_USER;else{a=Cw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qe(l)}n._authCredentials=new $g(new Ol(a,u))}}var et=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},dn=class n extends et{constructor(e,t,r){super(e,t,es(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Mz(n,e,...t){if(n=He(n),pv("collection","path",e),n instanceof yi){let r=pe.fromString(e,...t);return mC(r),new dn(n,null,r)}{if(!(n instanceof Le||n instanceof dn))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return mC(r),new dn(n.firestore,null,r)}}function Nz(n,e){if(n=ye(n,yi),pv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new et(n,null,function(r){return new Wt(pe.emptyPath(),r)}(e))}function bF(n,e,...t){if(n=He(n),arguments.length===1&&(e=kl.newId()),pv("doc","path",e),n instanceof yi){let r=pe.fromString(e,...t);return gC(r),new Le(n,null,new j(r))}{if(!(n instanceof Le||n instanceof dn))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return gC(r),new Le(n.firestore,n instanceof dn?n.converter:null,new j(r))}}function Pz(n,e){return n=He(n),e=He(e),(n instanceof Le||n instanceof dn)&&(e instanceof Le||e instanceof dn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function SF(n,e){return n=He(n),e=He(e),n instanceof et&&e instanceof et&&n.firestore===e.firestore&&ru(n._query,e._query)&&n.converter===e.converter}var Ed=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Qa(this,"async_queue_retry"),this.Vu=()=>{let r=Pl();r&&P("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Pl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Pl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Ke;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!br(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Oe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=ly.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&B()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function by(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Sy=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ke,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Oz=-1,Re=class extends yi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ed,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ed(e),this._firestoreClient=void 0,yield e}})}};function kz(n,e){let t=typeof n=="object"?n:Cu(),r=typeof n=="string"?n:e||"(default)",i=Mw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Tw("firestore");o&&CF(i,...o)}return i}function vt(n){if(n._terminated)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G0(n),n._firestoreClient}function G0(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Xg(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,z0(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Cy(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function Fz(n,e){Nn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return W0(n,lv.provider,{build:r=>new _d(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function Lz(n){return N(this,null,function*(){Nn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();W0(n,lv.provider,{build:t=>new Iy(t,e.cacheSizeBytes)})})}function W0(n,e,t){if((n=ye(n,Re))._firestoreClient||n._terminated)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(M.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},G0(n)}function Vz(n){if(n._initialized&&!n._terminated)throw new O(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ke;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!pr.D())return Promise.resolve();let i=r+"main";yield pr.delete(i)})}(Jy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function jz(n){return function(t){let r=new Ke;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return iF(yield fv(t),r)})),r.promise}(vt(n=ye(n,Re)))}function Uz(n){return yF(vt(n=ye(n,Re)))}function Bz(n){return vF(vt(n=ye(n,Re)))}function $z(n,e){let t=vt(n=ye(n,Re)),r=new Sy;return EF(t,n._databaseId,e,r),r}function qz(n,e){return DF(vt(n=ye(n,Re)),e).then(t=>t?new et(n,null,t.query):null)}var Jo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ve.fromBase64String(e))}catch(t){throw new O(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Er=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fn=class{constructor(e){this._methodName=e}};var Za=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var Ja=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var AF=/^__.*__$/,Ay=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Kt(e,this.data,this.fieldMask,t,this.fieldTransforms):new wr(e,this.data,t,this.fieldTransforms)}},Dd=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Kt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function K0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var Td=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(K0(this.Cu)&&AF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},xy=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ou(e)}Qu(e,t,r,i=!1){return new Td({Cu:e,methodName:t,qu:r,path:Qe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ii(n){let e=n._freezeSettings(),t=ou(n._databaseId);return new xy(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ld(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);yv("Data must be an object, but it was:",s,r);let a=Z0(r,s),u,l;if(o.merge)u=new At(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Oy(e,p,t);if(!s.contains(m))throw new O(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);X0(h,m)||h.push(m)}u=new At(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Ay(new ct(a),u,l)}var Xa=class n extends Fn{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Q0(n,e,t){return new Td({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Ry=class n extends Fn{_toFieldTransform(e){return new pi(e.path,new yr)}isEqual(e){return e instanceof n}},My=class n extends Fn{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Q0(this,e,!0),r=this.Ku.map(o=>Ei(o,t)),i=new On(r);return new pi(e.path,i)}isEqual(e){return e instanceof n&&ph(this.Ku,e.Ku)}},Ny=class n extends Fn{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Q0(this,e,!0),r=this.Ku.map(o=>Ei(o,t)),i=new kn(r);return new pi(e.path,i)}isEqual(e){return e instanceof n&&ph(this.Ku,e.Ku)}},Py=class n extends Fn{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new vr(e.serializer,WC(e.serializer,this.$u));return new pi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function gv(n,e,t,r){let i=n.Qu(1,e,t);yv("Data must be an object, but it was:",i,r);let o=[],s=ct.empty();_i(r,(u,l)=>{let h=vv(e,u,t);l=He(l);let p=i.Nu(h);if(l instanceof Xa)o.push(h);else{let m=Ei(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new At(o);return new Dd(s,a,i.fieldTransforms)}function mv(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Oy(e,r,t)],u=[i];if(o.length%2!=0)throw new O(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Oy(e,o[m])),u.push(o[m+1]);let l=[],h=ct.empty();for(let m=a.length-1;m>=0;--m)if(!X0(l,a[m])){let v=a[m],S=u[m];S=He(S);let C=s.Nu(v);if(S instanceof Xa)l.push(v);else{let A=Ei(S,C);A!=null&&(l.push(v),h.set(v,A))}}let p=new At(l);return new Dd(h,p,s.fieldTransforms)}function Y0(n,e,t,r=!1){return Ei(t,n.Qu(r?4:3,e))}function Ei(n,e){if(J0(n=He(n)))return yv("Unsupported field value:",e,n),Z0(n,e);if(n instanceof Fn)return function(r,i){if(!K0(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ei(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ke.fromDate(r);return{timestampValue:$o(i.serializer,o)}}if(r instanceof ke){let o=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$o(i.serializer,o)}}if(r instanceof Za)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jo)return{bytesValue:r0(i.serializer,r._byteString)};if(r instanceof Le){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Qy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ja)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ky(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fd(r)}`)}(n,e)}function Z0(n,e){let t={};return RC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(n,(r,i)=>{let o=Ei(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function J0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof Za||n instanceof Jo||n instanceof Le||n instanceof Fn||n instanceof Ja)}function yv(n,e,t){if(!J0(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Fd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Oy(n,e,t){if((e=He(e))instanceof Er)return e._internalPath;if(typeof e=="string")return vv(n,e);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,t)}var xF=new RegExp("[~\\*/\\[\\]]");function vv(n,e,t){if(e.search(xF)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Er(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(M.INVALID_ARGUMENT,a+n+u)}function X0(n,e){return n.some(t=>t.isEqual(e))}var vi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ky(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Vd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ky=class extends vi{data(){return super.data()}};function Vd(n,e){return typeof e=="string"?vv(n,e):e instanceof Er?e._internalPath:e._delegate._internalPath}function eb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eu=class{},wi=class extends eu{};function zz(n,e,...t){let r=[];e instanceof eu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Fy).length,a=o.filter(u=>u instanceof bd).length;if(s>1||s>0&&a>0)throw new O(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var bd=class n extends wi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return nb(e._query,t),new et(e.firestore,e.converter,hm(e._query,t))}_parse(e){let t=Ii(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new O(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vC(p,h);let v=[];for(let S of p)v.push(yC(u,o,S));m={arrayValue:{values:v}}}else m=yC(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vC(p,h),m=Y0(a,s,p,h==="in"||h==="not-in");return de.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Hz(n,e,t){let r=e,i=Vd("where",n);return bd._create(i,r,t)}var Fy=class n extends eu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:we.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)nb(s,u),s=hm(s,u)}(e._query,t),new et(e.firestore,e.converter,hm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ly=class n extends wi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hi(o,s)}(e._query,this._field,this._direction);return new et(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Wt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Gz(n,e="asc"){let t=e,r=Vd("orderBy",n);return Ly._create(r,t)}var Sd=class n extends wi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new et(e.firestore,e.converter,Hl(e._query,this._limit,this._limitType))}};function Wz(n){return H0("limit",n),Sd._create("limit",n,"F")}function Kz(n){return H0("limitToLast",n),Sd._create("limitToLast",n,"L")}var Ad=class n extends wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=tb(e,this.type,this._docOrFields,this._inclusive);return new et(e.firestore,e.converter,function(i,o){return new Wt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Qz(...n){return Ad._create("startAt",n,!0)}function Yz(...n){return Ad._create("startAfter",n,!1)}var xd=class n extends wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=tb(e,this.type,this._docOrFields,this._inclusive);return new et(e.firestore,e.converter,function(i,o){return new Wt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Zz(...n){return xd._create("endBefore",n,!1)}function Jz(...n){return xd._create("endAt",n,!0)}function tb(n,e,t,r){if(t[0]=He(t[0]),t[0]instanceof vi)return function(o,s,a,u,l){if(!u)throw new O(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of No(o))if(p.field.isKeyField())h.push(di(s,u.key));else{let m=u.data.field(p.field);if(Md(m))throw new O(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new O(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new fn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ii(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new O(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let S=0;S<h.length;S++){let C=h[S];if(m[S].field.isKeyField()){if(typeof C!="string")throw new O(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!Gy(s)&&C.indexOf("/")!==-1)throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let A=s.path.child(pe.fromString(C));if(!j.isDocumentKey(A))throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let k=new j(A);v.push(di(a,k))}else{let A=Y0(u,l,C);v.push(A)}}return new fn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function yC(n,e,t){if(typeof(t=He(t))=="string"){if(t==="")throw new O(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gy(e)&&t.indexOf("/")!==-1)throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(pe.fromString(t));if(!j.isDocumentKey(r))throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return di(n,new j(r))}if(t instanceof Le)return di(n,t._key);throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fd(t)}.`)}function vC(n,e){if(!Array.isArray(n)||n.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nb(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Rd=class{convertValue(e,t="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw B()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return _i(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new Ja(o)}convertGeoPoint(e){return new Za(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=zy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){let t=Pn(e);return new ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=pe.fromString(e);q(p0(r));let i=new Lo(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(t)||Oe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function jd(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Vy=class extends Rd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};var Mn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Dr=class extends vi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Oo=class extends Dr{data(e={}){return super.data(e)}},Tr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Oo(this._firestore,this._userDataWriter,r.key,r,new Mn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Oo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Oo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:RF(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function RF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function Xz(n,e){return n instanceof Dr&&e instanceof Dr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Tr&&e instanceof Tr&&n._firestore===e._firestore&&SF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function eH(n){n=ye(n,Le);let e=ye(n.firestore,Re);return $0(vt(e),n._key).then(t=>wv(e,n,t))}var Ln=class extends Rd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function tH(n){n=ye(n,Le);let e=ye(n.firestore,Re),t=vt(e),r=new Ln(e);return wF(t,n._key).then(i=>new Dr(e,r,n._key,i,new Mn(i!==null&&i.hasLocalMutations,!0),n.converter))}function nH(n){n=ye(n,Le);let e=ye(n.firestore,Re);return $0(vt(e),n._key,{source:"server"}).then(t=>wv(e,n,t))}function rH(n){n=ye(n,et);let e=ye(n.firestore,Re),t=vt(e),r=new Ln(e);return eb(n._query),q0(t,n._query).then(i=>new Tr(e,r,n,i))}function iH(n){n=ye(n,et);let e=ye(n.firestore,Re),t=vt(e),r=new Ln(e);return _F(t,n._query).then(i=>new Tr(e,r,n,i))}function oH(n){n=ye(n,et);let e=ye(n.firestore,Re),t=vt(e),r=new Ln(e);return q0(t,n._query,{source:"server"}).then(i=>new Tr(e,r,n,i))}function sH(n,e,t){n=ye(n,Le);let r=ye(n.firestore,Re),i=jd(n.converter,e,t);return Ud(r,[Ld(Ii(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ne.none())])}function aH(n,e,t,...r){n=ye(n,Le);let i=ye(n.firestore,Re),o=Ii(i),s;return s=typeof(e=He(e))=="string"||e instanceof Er?mv(o,"updateDoc",n._key,e,t,r):gv(o,"updateDoc",n._key,e),Ud(i,[s.toMutation(n._key,Ne.exists(!0))])}function uH(n){return Ud(ye(n.firestore,Re),[new _r(n._key,Ne.none())])}function cH(n,e){let t=ye(n.firestore,Re),r=bF(n),i=jd(n.converter,e);return Ud(t,[Ld(Ii(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ne.exists(!1))]).then(()=>r)}function lH(n,...e){var t,r,i;n=He(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||by(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(by(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Le)l=ye(n.firestore,Re),h=es(n._key.path),u={next:p=>{e[s]&&e[s](wv(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ye(n,et);l=ye(p.firestore,Re),h=p._query;let m=new Ln(l);u={next:v=>{e[s]&&e[s](new Tr(l,m,p,v))},error:e[s+1],complete:e[s+2]},eb(n._query)}return function(m,v,S,C){let A=new Yo(C),k=new Ya(v,A,S);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return nv(yield Zo(m),k)})),()=>{A.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return rv(yield Zo(m),k)}))}}(vt(l),h,a,u)}function dH(n,e){return IF(vt(n=ye(n,Re)),by(e)?e:{next:e})}function Ud(n,e){return function(r,i){let o=new Ke;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return eF(yield fv(r),i,o)})),o.promise}(vt(n),e)}function wv(n,e,t){let r=t.docs.get(e._key),i=new Ln(n);return new Dr(n,i,e._key,r,new Mn(t.hasPendingWrites,t.fromCache),e.converter)}var MF={maxAttempts:5};var wC=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ii(e)}set(e,t,r){this._verifyNotCommitted();let i=dr(e,this._firestore),o=jd(i.converter,t,r),s=Ld(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ne.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=dr(e,this._firestore),s;return s=typeof(t=He(t))=="string"||t instanceof Er?mv(this._dataReader,"WriteBatch.update",o._key,t,r,i):gv(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ne.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=dr(e,this._firestore);return this._mutations=this._mutations.concat(new _r(t._key,Ne.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function dr(n,e){if((n=He(n)).firestore!==e)throw new O(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var jy=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ii(t)}get(t){let r=dr(t,this._firestore),i=new Vy(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return B();let s=o[0];if(s.isFoundDocument())return new vi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new vi(this._firestore,i,r._key,null,r.converter);throw B()})}set(t,r,i){let o=dr(t,this._firestore),s=jd(o.converter,r,i),a=Ld(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=dr(t,this._firestore),a;return a=typeof(r=He(r))=="string"||r instanceof Er?mv(this._dataReader,"Transaction.update",s._key,r,i,o):gv(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=dr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=dr(e,this._firestore),r=new Ln(this._firestore);return super.get(e).then(i=>new Dr(this._firestore,r,t._key,i._document,new Mn(!1,!1),t.converter))}};function fH(n,e,t){n=ye(n,Re);let r=Object.assign(Object.assign({},MF),t);return function(o){if(o.maxAttempts<1)throw new O(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Ke;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield mF(o);new Ty(o.asyncQueue,l,a,s,u).au()})),u.promise}(vt(n),i=>e(new jy(n,i)),r)}function pH(){return new Xa("deleteField")}function gH(){return new Ry("serverTimestamp")}function mH(...n){return new My("arrayUnion",n)}function yH(...n){return new Ny("arrayRemove",n)}function vH(n){return new Py("increment",n)}(function(e,t=!0){(function(i){Xo=i})(Nw),Rw(new Aw("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Re(new qg(r.getProvider("auth-internal")),new Wg(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),vn(mT,"4.7.3",e),vn(mT,"4.7.3","esm2017")})();export{Pe as a,le as b,Ge as c,Th as d,qn as e,zn as f,xe as g,X as h,se as i,rS as j,iS as k,Tt as l,oS as m,Zt as n,uS as o,Rh as p,cS as q,Nh as r,ot as s,lS as t,K as u,W_ as v,Q as w,eo as x,Y as y,ee as z,U as A,Hr as B,En as C,uI as D,to as E,no as F,tr as G,eA as H,kc as I,N$ as J,P$ as K,tp as L,Wr as M,Gs as N,Ut as O,Gt as P,O$ as Q,k$ as R,Pt as S,zc as T,De as U,oM as V,yM as W,AM as X,xM as Y,qE as Z,zE as _,vp as $,j$ as aa,HE as ba,U$ as ca,B$ as da,WM as ea,GE as fa,KM as ga,$$ as ha,KE as ia,q$ as ja,Ws as ka,so as la,g4 as ma,m4 as na,y4 as oa,AN as pa,Yc as qa,VN as ra,R4 as sa,eq as ta,QP as ua,cT as va,xq as wa,bg as xa,Uq as ya,m1 as za,lT as Aa,dT as Ba,w1 as Ca,hT as Da,_a as Ea,Sg as Fa,Zq as Ga,Jq as Ha,Cz as Ia,Nn as Ja,bz as Ka,O as La,ke as Ma,Qe as Na,j as Oa,Az as Pa,Lo as Qa,TF as Ra,ye as Sa,CF as Ta,Le as Ua,Mz as Va,Nz as Wa,bF as Xa,Pz as Ya,SF as Za,Oz as _a,kz as $a,vt as ab,Fz as bb,Lz as cb,Vz as db,jz as eb,Uz as fb,Bz as gb,$z as hb,qz as ib,Jo as jb,Er as kb,Za as lb,zz as mb,Hz as nb,Gz as ob,Wz as pb,Kz as qb,Qz as rb,Yz as sb,Zz as tb,Jz as ub,Rd as vb,Dr as wb,Oo as xb,Tr as yb,Xz as zb,eH as Ab,tH as Bb,nH as Cb,rH as Db,iH as Eb,oH as Fb,sH as Gb,aH as Hb,uH as Ib,cH as Jb,lH as Kb,dH as Lb,Ud as Mb,wC as Nb,fH as Ob,pH as Pb,gH as Qb,mH as Rb,yH as Sb,vH as Tb,uz as Ub,cz as Vb,lz as Wb,dz as Xb,hz as Yb};
